//===== eAthena Script ======================================= 
//= The Sign Quest
//===== By: ================================================== 
//= SinSloth(Most of the NPCs), MasterOfMuppets(Some of the NPCs + bug fixes) & Kargha(The quiz NPCs)
//===== Current Version: ===================================== 
//= 2.5a
//===== Compatible With: ===================================== 
//= eAthena SVN 3422+(Requires jA Script System)
//===== Description: ========================================= 
//= - Quest for opening the doors to Geffenia.
//===== Comments: ============================================
//= This script uses sign_01.bmp - sign_04.bmp, these will be
//= found in the language of your client.
//===== Additional Comments: ================================= 
//= 1.0 First version, beware of potential nasty bugs :x [MasterOfMuppets]
//= 1.1 Finalized for stable, might still contain bugs though. [MasterOfMuppets]
//= 1.1a moved #aldesignwarp to fix enless warp [Lupus]
//= 1.2 Fixed a minor bug that prevented people from advancing [MasterOfMuppets]
//= 	quest at one point.
//= 1.3 Removed duplicates [Toms]
//= 1.4 Fixed a bug in Dearles script where it was checking for the wrong items.
//=     Fixed a major bug that was allowing players to continue before
//=     getting all the Sobbing Starlight pieces.
//=     Also moved the Alberta sign since another NPC was on top of it. [Llyr]
//= 1.5 Fixed exploits and bugs. Plus add a removal of exttra sobbing pieces
//= 	as suggested Tantarian, to let people Reborn [Lupus]
//= 1.6 Minor fix, thanks to theultramage for pointing it out. [MasterOfMuppets]
//= 1.7 Fixed exploit [KarLaeda]
//= 1.7a Fixed wrong dialogue [Lupus]
//= 1.7b Fixed possible exploit [Lupus]
//= 1.7c Reformatted for future bughunt. WIP [Lupus]
//= 1.8 Fixed some bugs and exploit which allowed players helping in the final
//= fight to finish the quest as well. Completely revamped quiz system. [SinSloth]
//= 1.9 Made some changes in last event to reflect recent bug exploit fix. [SinSloth]
//= 2.0 Fixed some various minor bugs. [SinSloth]
//= 2.1 Fixed experience gains to match upcoming rate adjustments. [SinSloth]
//= 2.2 Fixed a small bug which occured when people had to return The Sign around midnight. [SinSloth]
//= 2.3 Made some adjustments in last event with dialogs/summoning and fixed a possible exploit earlier. [SinSloth]
//= 2.4 Optimized/simplified some poorly written code; fixed wrong quiz answers [ultramage]
//= 2.5 Updated to fall within proper name restrictions. [L0ne_W0lf]
//= 2.5a Corrected a Typo error ";;". [Samuray22]
//= 2.6 Fixed Engel giving back 7 Sobbing Starlight on failing to refine it, bugreport:1473 [Brainstorm]
//============================================================ 
//===== Configuration : ======================================
prontera,1,1,1	script	TheSignConfig	-1,{
OnInit:
//= This string will be used to show which timezone your server
//= is located in, it's necessary for the quest, so please change it.

	set $timezonestring$,"^FF0000GMT^000000";

//= This variable determines whether the "sign_xx.bmps" will be used or
//= if raw text will be used in the 'Sign::GeffeniaSigns' script.
//= Set it to 0 if you want to use text.
//= The bmp's are in the language of your client. If you are using a
//= kRO Client, you may want to download the English bmp's available in
//= the Texture.rar at http://mrmagoo.psiblade.net/translation/index.php?section=downloads

	set $signbmps,1;
}
//============================================================

alberta,34,241,1	script	Sign::GeffeniaSigns	111,{
    if (signquest < 1)set signquest,1;
    if ($signbmps) {
        cutin "sign_01",4;
        mes "^3355FFNext";
        next;
        cutin "",255;
        cutin "sign_02",4;
        mes "^3355FFNext";
        next;
        cutin "",255;
        cutin "sign_03",4;
        mes "^3355FFNext";
        next;
        cutin "",255;
        cutin "sign_04",4;
        mes "^3355FFClose";
        close2;
        cutin "",255;
        end;
    } else {
        mes "^3355FFTo the talented and";
        mes "experienced adventurers who";
        mes "have dreams of achieving true";
        mes "greatness...";
        next;
        mes "^3355FFI present a once in a";
        mes "lifetime opportunity to the one";
        mes "who proves most worthy. You must";
        mes "have the courage to risk peril,";
        mes "the wisdowm to perforum right";
        mes "action and the strength to be";
        mes "victorious in combat.";
        next;
        mes "^3355FFThe way will be fraught";
        mes "with danger and only the most";
        mes "adept adventurers may have a";
        mes "chance of surviving. But if we";
        mes "can succeed, I promies on my";
        mes "good name that power beyond";
        mes "imagining will become yours.";
        next;
        mes "^3355FFThose of you who are interested,";
        mes "come to me and I will test";
        mes "your abilities. The one who";
        mes "can manage to pass this testing";
        mes "just might be capable of helping";
        mes "me prove a forgotten legend";
        mes "and uncover a long lost power";
        next;
        mes "^3355FFI shall be waiting.";
        mes "";
        mes "^000000-Metz Brayde";
        close;
    }
}

morocc,168,264,1	duplicate(GeffeniaSigns)	Sign#2	111
payon,160,183,1	duplicate(GeffeniaSigns)	Sign#3	111
prontera,147,305,1	duplicate(GeffeniaSigns)	Sign#4	111
geffen,168,175,1	duplicate(GeffeniaSigns)	Sign#5	111
aldebaran,54,223,1	duplicate(GeffeniaSigns)	Sign#6	111

prt_in,228,26,4	script	Steward	55,{

    if (signquest > 22) goto L_Situation;
    if (signquest == 14) goto L_Artisan;
    if (signquest > 1) {
        mes "[Vendez]";
        mes "Ah, master " + strcharinfo(0) + ".";
        mes "Welcome. How may I be";
        mes "of service today?";
        next;
        menu "Who is Arian?",s_Arian,"What is Metz doing?",-,"How is Elle?",s_Elle;

        mes "[Vendez]";
        mes "Althought I've served";
        mes "the Brayde family for years";
        mes "I'm unfamiliar with Master";
        mes "Metz's work. My appologies, but";
        mes "I simply cannot even begin to";
        mes "fathom his research...";
        close;
s_Arian:
        mes "[Vendez]";
        mes "Ah yes, Arian.";
        mes "I consider him to be";
        mes "a man of few words. The";
        mes "words he does choose to";
        mes "use are rather harsh and";
        mes "brutish, you might say.";
        close;
s_Elle:
        mes "[Vendez]";
        mes "Ah, Mistress Elle";
        mes "has been working here";
        mes "since she was a very young";
        mes "girl. She is almost like";
        mes "a granddaughter to me.";
        mes "Ha ha-^222222*Ahem*";
        close;

    } else {
        mes "[Vendez]";
        mes "Welcome to the";
        mes "Brayde Estate. How";
        mes "may I be of service?";
        next;
        menu "Nothing",-,"I'm here to see Metz",s_Metz,"Gimmie your cash!",s_Cash;

        mes "[Vendez]";
        mes "If you do not have";
        mes "any business to conduct";
        mes "with Master Metz, please";
        mes "leave immediately";
        close;

s_Metz:
        mes "[Vendez]";
        mes "Very good, sir.";
        mes "Please wait a moment";
        mes "while I consult with";
        mes "the master in his study.";
        close;

s_Cash:
        mes "[Vendez]";
        mes "My apologies,";
        mes "but I insist that";
        mes "you leave the premises";
        mes "^FF0000immediately^000000.";
        close2;
        warp "prontera",150,150;
        end;
    }

L_Artisan:
    mes "[Vendez]";
    mes "Oh, congratulations~";
    mes "You finally passed all";
    mes "of the tests. I know they";
    mes "must have been incredibly";
    mes "taxing and challenging.";
    next;
    mes "[Vendez]";
    mes "Master Metz has informed";
    mes "me that he wishes for you";
    mes "to find someone";
    mes "to restore the Sobbing";
    mes "Starlight. I wish you luck";
    mes "in that endeavor.";
    close;

L_Situation:
    mes "[Vendez]";
    mes "There will always";
    mes "be situations where";
    mes "you won't be getting";
    mes "any second chances.";
    mes "Anyways remember that.";
    close;

}

prt_in,227,45,4	script	Archaeologist	804,{
    cutin "mets_alpha",2;
    if (sign_fail) goto L_Stop;
    if (signquest)goto s_Cont;
    mes "[Metz]";
    mes "Although you need everlasting";
    mes "patience in an archaeological";
    mes "excavation, the feeling you get";
    mes "when you find something makes";
    mes "all those long hours of study and";
    mes "research worth it.";
    close2;
    cutin "",255;
    end;

s_Cont:
    if (signquest == 1) {
        mes "[Metz]";
        mes "Hm...?";
        mes "Can I help you?";
        next;
        menu "I've been following these signs and...",s_Sign,"I was just passing by",-;

        mes "[Metz]";
        mes "Oh really?";
        mes "I see, I though you";
        mes "were an applicant for";
        mes "the position I'm offering";
        mes "to brave adventurers.";
        close2;
        cutin "",255;
        end;

s_Sign:
        mes "[Metz]";
        mes "Great...!";
        mes "Welcome to my";
        mes "humble lodgings.";
        mes "Hmm, let me see...";
        next;
        if (BaseLevel < 70) {
            mes "[Metz]";
            mes "Uh, it pains me to say this, but I";
            mes "don't think you qualify to help";
            mes "me out. Once you gain enough";
            mes "experience though, I'll be happy";
            mes "to have you on board~";
            close2;
            cutin "",255;
            end;
        }
        mes "[Metz]";
        mes "Hey, I think you might";
        mes "be well suited for the job!";
        mes "But do you think you could come";
        mes "back later? I've got my hands full";
        mes "with some other business.";
        next;
        mes "[Metz]";
        mes "Oh right, would you tell";
        mes "me your name? " + strcharinfo(0) + "?";
        mes "Okay then, I'll remember that.";
        mes "Talk to you later, alright?";
        set signquest,2;
        close2;
        cutin "",255;
        end;
    } else if (signquest == 2) {
        mes "[Metz]";
        mes "I'm sorry I made you wait,";
        mes "but I had some research to finish";
        mes "and it took longer than I";
        mes "expected. Now, before I tell you";
        mes "more about the job, I want to";
        mes "test your competency";
        next;
        mes "[Metz]";
        mes "The job I'm offering is";
        mes "pretty risky and not just";
        mes "anybody can handle it.";
        mes "You'll actually go through";
        mes "a series of tests conducted";
        mes "by my trusted friends.";
        next;
        mes "[Metz]";
        mes "Now, the first person";
        mes "you must visit is ^FF0000Arian^000000";
        mes "in Morroc. Please speak";
        mes "to him and he'll give you";
        mes "all the details about his";
        mes "examination... I hope";
        next;
        mes "[Metz]";
        mes "Once you're finished with";
        mes "the test, Arian will tell you";
        mes "what to do next. Afterwards,";
        mes "come back to me so that we";
        mes "can finally talk business.";
        next;
        mes "[Metz]";
        mes "Ah, almost forgot.";
        mes "Arian won't talk to anybody";
        mes "unless he knows them or";
        mes "receives a message from me.";
        mes "So if he's snubbed you in the past,";
        mes "just understand that's his";
        mes "way.";
        set signquest,3;
        close2;
        cutin "",255;
        end;
    } else if (signquest == 3 || signquest == 4) {
        mes "[Metz]";
        mes "Hm...?";
        mes "Shouldn't you leave";
        mes "for Morroc to see Arian?";
        mes "You better hurrty in case";
        mes "somebody else applies";
        mes "for this little job.";
        close2;
        cutin "",255;
        end;
    } else if (signquest == 13) {
        mes "[Metz]";
        mes "Congratulations~";
        mes "You managed to pass";
        mes "all of the tests! You seem";
        mes "to be the perfect person";
        mes "to carry out this special";
        mes "assignment!";
        next;
        mes "[Metz]";
        mes "By now, you must have";
        mes "six Sobbing Starlight pieces.";
        mes "I'm sure that you want to know";
        mes "more about those fragments.";
        next;
        mes "[Metz]";
        mes "I remember last summer,";
        mes "I found the wholly formed";
        mes "Sobbing Starlight north";
        mes "of Mount Mjolnir during";
        mes "one of my expeditions.";
        next;
        mes "[Metz]";
        mes "Although it was in perfect";
        mes "shape, once it was exposed";
        mes "to the air, it began to crack";
        mes "and shattered into the pieces";
        mes "you now hold in your hands.";
        next;
        mes "[Metz]";
        mes "Now, an ordinary artisan";
        mes "can't put the Sobbing Starlight";
        mes "back together. This mysterious";
        mes "stone has some strange properties.";
        mes "But it's imperative to me to get";
        mes "this stone reassembled.";
        next;
        mes "[Metz]";
        mes "Once restored, a strange";
        mes "pattern can be seen within";
        mes "the Sobbing Starlight. I guess";
        mes "that the pattern is a message";
        mes "written in an ancient language.";
        next;
        mes "[Metz]";
        mes "Would you let me borrow";
        mes "the pieces for a second ?";
        mes "I'll show you something";
        mes "quite interesting...";
        next;
        mes "^0066CCOnce you hand the pieces";
        mes "of the Sobbing Starlight to";
        mes "Metz, he pulls out a seventh";
        mes "piece. Once gathered, they";
        mes "begin to emit a strange light.";
        misceffect 34;
        next;
        mes "[Metz]";
        mes "Since the pieces still";
        mes "respond to each other,";
        mes "I believe that it's possible";
        mes "for the Sobbing Starlight";
        mes "to be restored to its";
        mes "original form.";
        next;
        mes "[Metz]";
        mes "We're still seeking";
        mes "an artisan of great";
        mes "skill for this task. Once";
        mes "know right away. For now,";
        mes "please hold on these pieces.";
        getitem 7177,1;
        set signquest,14;
        close2;
        cutin "",255;
        end;
    } else if (signquest == 14) {
        mes "[Metz]";
        if (rand(5)){
        	mes "Although I've made";
        	mes "some progress, I still";
        	mes "haven't found an artisan";
        	mes "capable of restoring the";
        	mes "Sobbing Starlight. Please";
        	mes "give me a little more time.";
        	close2;
        	cutin "",255;
        	end;
		}
        mes "Ah, you've come just";
        mes "just in the nick of time!";
        mes "I just found someone who";
        mes "may be capable of restoring";
        mes "the Sobbing Starlight.";
        next;
        mes "[Metz]";
        mes "His name is";
        mes "^FF0000Engel Howard^000000,";
        mes "a legendary Blacksmith";
        mes "in Rune Midgard. I don't";
        mes "know where he is, but maybe";
        mes "his family in Geffen may know.";
        next;
        mes "[Metz]";
        mes "Unfortunately, that's all";
        mes "the information that I have";
        mes "to give you for now. You'll";
        mes "have to investigate this lead";
        mes "on your own, "+ strcharinfo(0) +".";
        set signquest,15;
        close2;
        cutin "",255;
        end;

    } else if (signquest == 23) {
        mes "[Metz]";
        mes "Amazing...! You've";
        mes "managed to restore";
        mes "the Sobbing Starlight!";
        mes "Now, I recently learned that";
        mes "this stone can lead you to";
        mes "an ancient place...";
        next;
        mes "[Metz]";
        mes "That's why we need to";
        mes "know what the message in";
        mes "the Sobbing Starlight means.";
        mes "First, we need a Wizard that";
        mes "is skilled in unlocking the";
        mes "messages stored in gems...";
        next;
        mes "[Metz]";
        mes "Hmm. It would probably";
        mes "be best to visit the Wizards";
        mes "on the top floor of the Geffen";
        mes "Tower. There's someone I know";
        mes "there who might just be up for";
        mes "this task...";
        set signquest,24;
        close2;
        cutin "",255;
        end;

    } else if (signquest == 24) {
        mes "[Metz]";
        mes "Now that the";
        mes "Sobbing Starlight";
        mes "is restored, we need";
        mes "to find someone who can";
        mes "break the seal on the";
        mes "gem's message...";
        next;
        mes "[Metz]";
        mes "For now, please visit";
        mes "the Wizards at the top";
        mes "floor of the Geffen Tower.";
        mes "I know that one of them is";
        mes "capable of getting the gem's";
        mes "text on a paper...";
        close2;
        cutin "",255;
        end;
    } else if (signquest == 28) {
        mes "[Metz]";
        mes "Great...!";
        mes "You were able to get the";
        mes "text in the gem printed on a";
        mes "Record of Ancient Language?";
        next;
        mes "[Metz]";
        mes "Just as I thought.";
        mes "This language isn't";
        mes "one I recognize. It's";
        mes "probably too ancient.";
        next;
        mes "[Metz]";
        mes "Fortunately, I know";
        mes "one person who may";
        mes "be able to translate this.";
        mes "If he's not able to do it...";
        mes "We'll have to give up.";
        next;
        mes "[Metz]";
        mes "Bring this Record";
        mes "of Ancient Language";
        mes "to a man named Frank.";
        mes "I hope he'll be able to";
        mes "understand what it says.";
L_Frank:
        next;
        menu "Who is Frank?",L_Who,"Where is he?",L_Where,"I see.",-;
        mes "[Metz]";
        mes "Good luck, then.";
        mes "I hope that you can";
        mes "find a way to get Frank";
        mes "Franklin to help us.";
        set signquest,29;
        close2;
        cutin "",255;
        end;

L_Who:
        mes "[Metz]";
        mes "Frank Franklin has lived";
        mes "in seclusion and only a few";
        mes "people are aware of his skill.";
        mes "But I can assure you that his";
        mes "knowledge of ancient languages";
        mes "isn't rivaled by any mortal.";
        next;
        mes "[Metz]";
        mes "I suppose his interest";
        mes "in history is what drives";
        mes "him in work. Still, I've";
        mes "heard that he doesn't like";
        mes "meeting people. I hope you";
        mes "can convince him to help us...";
        goto L_Frank;

L_Where:
        mes "[Metz]";
        mes "It's said that";
        mes "Frank Franklin lives";
        mes "on the Alberta Sunken Ship";
        mes "where he devotes his time";
        mes "to his researches. He may not";
        mes "always be home though...";
        goto L_Frank;

    } else if (signquest == 29) {
        mes "[Metz]";
        mes "So far, I've learned";
        mes "from my research that";
        mes "the gem's message has";
        mes "details about a certain";
        mes "location and an item that";
        mes "serves as some kind of key...";
        next;
        mes "[Metz]";
        mes "While I investigate,";
        mes "please try to have Frank";
        mes "Franklin translate the";
        mes "message in the Record of";
        mes "Ancient Language. Keep up";
        mes "the good work," + strcharinfo(0) + ".";
        close2;
        cutin "",255;
        end;
    } else if (signquest == 53) {
        mes "[Metz]";
        mes "Angrboda...?!";
        mes "According to legend,";
        mes "her soul was split into";
        mes "pieces and placed behind";
        mes "seals created by the gods!";
        next;
        mes "[Metz]";
        mes "You'll need a stout,";
        mes "heavy or really sharp";
        mes "weapon. Of course, I'm";
        mes "told that such weapons";
        mes "are truly rare...";
        next;
        mes "[Metz]";
        mes "Supposedly, normal";
        mes "Blacksmiths can't even";
        mes "forge those kinds of rare";
        mes "weapons. But if you manage";
        mes "to get one, you might have a";
        mes "chance of breaking the seals.";
        next;
        mes "[Metz]";
        mes "Of course, I'm worried";
        mes "that may be violating the";
        mes "will of the gods by releasing";
        mes "Angrboda, but we've already";
        mes "gone this far...";
        close2;
        cutin "",255;
        end;
    } else if ( (signquest > 54 && signquest < 59) || (signquest == 59 && !countitem(2644))) {
        mes "[Metz]";
        mes "I think you're";
        mes "almost there. All";
        mes "of our efforts will";
        mes "soon come to fruition!";
        close2;
        cutin "",255;
        end;
    } else if (signquest == 59 && countitem(2644)) {
        mes "[Metz]";
        mes "This is it...!";
        mes "You've brought me,";
        mes "'The Sign'! I've finally";
        mes "proven its existence!";
        mes "Please let me handle";
        mes "this and come back later~";
        delitem 2644,1;
        set @metzhour,gettime(3);
        set @metzmin,gettime(2);
        if (@metzmin > 29) set @metzhour,@metzhour +1;
        set signmetzhour,@metzhour + rand(2,4);
        if (signmetzhour > 23) set signmetzhour,signmetzhour - 24;
        set signquest,60;
        close2;
        cutin "",255;
        end;
    } else if (signquest == 60) {
        if (gettime(3) == signmetzhour || gettime(3) == signmetzhour +1 || gettime(3) == signmetzhour +2 || (signmetzhour +1 == 24 && gettime(3) == 0) || (signmetzhour +2 == 24 && gettime(3) == 0) || (signmetzhour +2 == 25 && gettime(3) == 1)) {
            mes "[Metz]";
            mes "Fascinating...";
            mes "This was made with";
            mes "a material outside of";
            mes "Rune-Midgard! See this";
            mes "blue lens? That must be";
            mes "its incredible power source!";
            next;
            mes "[Metz]";
            mes "I've found that the runes";
            mes "around the lens control some";
            mes "kind of seals placed at the Geffen";
            mes "Tower and Geffen Fountain. But with";
            mes "this in your hands, the seals";
            mes "should be broken...";
            next;
            mes "[Metz]";
            mes "I... I think";
            mes "you can even use this";
            mes "to enter Valhalla. There";
            mes "may be even other applications";
            mes "using the power of this item...";
            next;
            getitem 2644,1;
            set signquest,61;
            mes "[Metz]";
            mes "I can only think of";
            mes "one person who can";
            mes "handle working with";
            mes "this: Engel Howard,";
            mes "Rune-Midgard's best";
            mes "Blacksmith.";
            close2;
            cutin "",255;
            end;
        } else {
            mes "[Metz]";
            mes "I'm sorry, but I'm";
            mes "still examinating the";
            mes "artifact you've lent to";
            mes "me. Would you please";
            mes "give me some more time?";
            close2;
            cutin "",255;
            end;
        }

    } else if (signquest == 61) {
        mes "[Metz]";
        mes "Have you visited";
        mes "Engel Howard yet?";
        mes "He's the only one";
        mes "who can unlock the";
        mes "Sign's power for you...";
        close2;
        cutin "",255;
        end;
    } else if (signquest == 63) {
        set signquest,64;
        mes "[Metz]";
        mes "Ah, you're finally";
        mes "here. I've been waiting";
        mes "to speak with you. First,";
        mes "let me thank you again";
        mes "for all of your help.";
        next;
        mes "[Metz]";
        mes "Thanks to you, my wish";
        mes "of proving the existence";
        mes "of the Sign has finally been";
        mes "fulfilled. Its power is now";
        mes "yours to do as you wish.";
        next;
        mes "[Metz]";
        mes "You may have had your doubts,";
        mes "but I'm happy enough to confirm";
        mes "that the Sign really exists. Thanks";
        mes "again, and I hope you stop by and";
        mes "chat from time to time.";
        getexp 1823951,0;
        close2;
        cutin "",255;
        end;
    } else if (signquest >= 64) {
        mes "[Metz]";
        mes "Thank you so much";
        mes "for helping me make";
        mes "my dream come true.";
        mes "I hope we can work on";
        mes "another project together.";
        next;
        mes "[Metz]";
        mes "Well then...";
        mes "Good luck on";
        mes "your journeys,";
        mes "brave " + strcharinfo(0) + ".";
        close2;
        cutin "",255;
        end;
    } else {
        mes "[Metz]";
        mes "How are going your";
        mes "researches about";
        mes "the Sobbing Starlight?";
        mes "I wish you to come";
        mes "back to me when you";
        mes "have passed all tests.";
        close2;
        cutin "",255;
        end;
    }

L_Stop:
    if (sign_fail != 3) {
        mes "[Metz]";
        mes "What...?";
        mes "Were you really lacking";
        mes "that much courage...?";
        mes "Does it mean I'll never";
        mes "see that legendary artifact";
        mes "with my own eyes?";
        next;
        mes "[Metz]";
        mes "So much work for nothing...";
        mes "Oh, excuse me. I should feel";
        mes "honored to just have been";
        mes "able to hold that Sobbing";
        mes "Starlight in my own hands.";
        mes "May I please take one last";
        mes "look at it?";
        next;
        getitem 617,1;
        getexp 876543,0;
    }
    set sign_fail,3;
    mes "[Metz]";
    mes "Thanks for your help. My dream";
    mes "might never come true but I've";
    mes "seen things that some people";
    mes "will never see in their whole lives.";
    close2;
    cutin "",255;
    end;
}

prt_in,248,23,4	script	Maid#2	1275,{

end;

}

morocc_in,114,162,4	script	Young Man#13	118,{

    if (signquest == 5) {
        mes "[Gaanan]";
        mes "^444444*Sigh...*^000000";
        mes "I wish the weather'd";
        mes "cool down, even just a little.";
        mes "While I'm asking for miracles,";
        mes "I may as well wish for a billion";
        mes "kajillion zeny. And maybe a yacht.";
        close;
    }
    else if (arianstest == 8) {
        if (gaanantest == 1) {
            mes "[Gaanan]";
            mes "Hm...?";
            mes "Arian is the one";
            mes "who's grading your";
            mes "test. But I understand.";
            mes "If you failed, I'd want";
            mes "to avoid him too...";
            close;
        }
        mes "[Gaanan]";
        mes "Oh, Arian sent you to me,";
        mes "right? I'm sorry, but he takes";
        mes "a little time getting used to.";
        mes "Even though I still have to get";
        mes "used to his... mannerisms";
        next;
        mes "[Gaanan]";
        mes "Anyway, since he thinks it's";
        mes "boring, Arian put me in charge";
        mes "of the quiz portion of your test.";
        mes "Please carefully choose an";
        mes "answer when I ask you a";
        mes "question. Are you ready?";
        next;
        set gaananpoint,0;
        mes "[Gaanan]";
        mes "Now, the first question.";
        mes "Let's say that you just";
        mes "found yourself on a deserted";
        mes "island. What is the very first";
        mes "thing that you should do?";
        next;
        switch( select( "Look for fresh water","Just wait for rescue.","Forage for food.","Explore the island." ) )
        {
        	case 1: set gaananpoint,gaananpoint +7; break;
        	case 2: set gaananpoint,gaananpoint +1; break;
        	case 3: set gaananpoint,gaananpoint +4; break;
        	case 4: set gaananpoint,gaananpoint +10; break;
	}
        mes "[Gaanan]";
        mes "The second question is...";
        mes "You happen to be stuck in";
        mes "a narrow place inside some collapsed building. What";
        mes "do you plan to do first?";
        next;
        switch( select( "Scream for help","Stay quiet.","Wait for death to come.","Find a way out." ) )
        {
        	case 1: set gaananpoint,gaananpoint +3; break;
        	case 2: set gaananpoint,gaananpoint +7; break;
        	case 3: set gaananpoint,gaananpoint +1; break;
        	case 4: set gaananpoint,gaananpoint +7; break;
        }
        mes "[Gaanan]";
        mes "Now, the third question.";
        mes "You're on some dungeon";
        mes "expedition with your friends,";
        mes "but you got lost somehow.";
        mes "How do you handle it?";
        next;
        switch( select( "Try to find my friends.","Find a way out.","Stay put.","Continue exploring the dungeon." ) )
        {
        	case 1: set gaananpoint,gaananpoint +0; break;
        	case 2: set gaananpoint,gaananpoint +5; break;
        	case 3: set gaananpoint,gaananpoint +10; break;
        	case 4: set gaananpoint,gaananpoint +1; break;
	}
        mes "[Gaanan]";
        mes "Here's the fourth question.";
        mes "You're with your friends inside";
        mes "a mansion with no exit. What do";
        mes "you do first when a murder happens";
        mes "inside the mansion?";
        next;
        switch( select( "Wait for the case to get solved.","Try to find my friends first.","Find a way out.","Solve the murder case on my own.","Kill the others before they kill me." ) )
        {
        	case 1: set gaananpoint,gaananpoint +7; break;
        	case 2: set gaananpoint,gaananpoint +5; break;
        	case 3: set gaananpoint,gaananpoint +3; break;
        	case 4: set gaananpoint,gaananpoint +1; break;
        	case 5: set gaananpoint,gaananpoint +1; break;
  	}
        mes "[Gaanan]";
        mes "The fifth question is";
        mes "You hear that the end of";
        mes "the world is in one week.";
        mes "So what do you do during";
        mes "this final week?";
        next;
        switch( select( "Wait to see the end.","Plant an apple tree.","Look to move to a different world.","What else? Save the world.","What else? Go on a crime spree." ) )
        {
        	case 1: set gaananpoint,gaananpoint +5; break;
        	case 2: set gaananpoint,gaananpoint +3; break;
        	case 3: set gaananpoint,gaananpoint +7; break;
        	case 4: set gaananpoint,gaananpoint +10; break;
        	case 5: set gaananpoint,gaananpoint +1; break;
	}
        mes "[Gaanan]";
        mes "Oh! We're done!";
        mes "Okay, let me give";
        mes "these answers to Arian.";
        mes "Sooo... Talk to him and";
        mes "he'll let you know how";
        mes "you did.";
        set gaanantest,1;
        close;
    }
    else if (ariantest < 8) {

        emotion e_swt2;
        mes "[Gaanan]";
        mes "The weather here in";
        mes "Morroc is too hot for me.";
        mes "I'm having a hard time just";
        mes "trying to live here. Do you";
        mes "know a nice and cool place";
        mes "where I can work?";
        close;
    }
}


morocc_in,115,154,5	script	Rogue	810,{

    if (signquest == 5) {
        mes "[Arian]";
        mes "..........";
        mes "Payon...?";
        mes "Daewooon?";
        mes "Any of it ring a bell?";
        mes "Cuz it really oughtta!";
        close;
    }
    else if (signquest < 3 || signquest > 5) {
        emotion e_dots;
        end;
    } else if (signquest == 3) {

        mes "[Arian]";
        mes "...";
        mes "Who the hell";
        mes "are you, jerkface?";
        next;
        menu "Metz sent me here.",s_Metz,"^0000FF" + strcharinfo(0) + "^000000",s_Name,"Who are you then?",-;

        mes "[Arian]";
        mes "...";
        mes "......";
        next;
        percentheal -50,0;
        mes "[Arian]";
        mes "...";
        mes "......";
        mes "Your mom.";
        mes "Now get the";
        mes "hell outta here!";
        close;

s_Metz:

        mes "[Arian]";
        mes "Oh yeah...?";
        mes "Well, I'm sending you";
        mes "back! No way I'm fallin'";
        mes "for that trick, chump!";
        close2;
        warp "morocc",279,173;
        end;

s_Name:

        mes "[Arian]";
        mes "Wha...?";
        mes "^0000FF" + strcharinfo(0) + "^000000.";
        mes "Yeah, okay. Metz did";
        mes "mention something about";
        mes "you. You're here for";
        mes "the test, right?";
        next;
        mes "[Arian]";
        mes "Aliright, this";
        mes "test is simple.";
        mes "I tell you to bring me";
        mes "a bunch of items and";
        mes "you go get them.";
        next;
        mes "[Arian]";
        mes "I know you jerkward adventurers";
        mes "are always talking and you share";
        mes "the answers for any test some dude";
        mes "is givin' out. 'Course, it doesn't";
        mes "help that I use the same test";
        mes "every frickin' time...";
        next;
        mes "[Arian]";
        mes "Now, you gotta bring and only";
        mes "have the item I ask you for when";
        mes "you come to me. If you know that";
        mes "I'll be asking for something later";
        mes "and you happen to have it, I'll";
        mes "straight up ^FF0000jack it^000000.";
        next;
        mes "[Arian]";
        mes "The first item?";
        mes "Gimme ^FF0000100 Fluff^000000.";
        mes "Bring that and I'll";
        mes "tell you what to";
        mes "bring next.";
        set signquest,4;
        set arianstest,1;
        close;
    } else if (signquest == 4) {

        if (arianstest == 1) {
            if (countitem(914) < 100)goto s_Bringfluff;
            delitem 914,100;
            mes "[Arian]";
            mes "What the hell took you so";
            mes "long? Now bring me ^FF000050 Poison Spores^000000";
            mes "or I'll kick your ass.";
            set arianstest,2;
            close2;
            goto Verifyitems;

s_Bringfluff:
            mes "[Arian]";
            mes "...";
            mes "Hey. What the hell's wrong";
            mes "with you? Hurry and get me";
            mes "^FF0000100 Fluff^000000, ya slacker.";
            close;
        }
        else if (arianstest == 2) {
            if (countitem(7033) < 50)goto s_Bringspore;
            delitem 7033,50;
            mes "[Arian]";
            mes "...";
            mes "It's about time you";
            mes "got here with those";
            mes "Poison Spores. Now, go";
            mes "and get ^FF000030 Scorpion Tails";
            set arianstest,3;
            close2;
            goto Verifyitems;

s_Bringspore:
            mes "[Arian]";
            mes "...";
            mes "Hey. What part of 'Get me";
            mes "^FF000050 Poison Spores^000000 or I'll";
            mes "kick your ass, don't";
            mes "you understand?";
            close;
        } else if (arianstest == 3) {
            if (countitem(904) < 30)goto s_Bringtails;
            delitem 904,30;
            mes "[Arian]";
            mes "...";
            mes "Damn, you sure took your";
            mes "sweet time bringing over this";
            mes "crap. Okay, now bring";
            mes "^FF000020 Rotten Bandages^000000.";
            set arianstest,4;
            close2;
            goto Verifyitems;

s_Bringtails:
            mes "[Arian]";
            mes "...";
            mes "What, your mom drop you on the";
            mes "head right after you were born?";
            mes "Stop bein' stupid and get me";
            mes "^FF000030 Scorpion Tails^000000, nimrod.";
            close;
        } else if (arianstest == 4) {
            if (countitem(930) < 20)goto s_Bringbandages;
            delitem 930,20;
            mes "[Arian]";
            mes "...";
            mes "You brought the bandages.";
            mes "Okay short stuff, go and get";
            mes "me ^FF000015 Little Evil Horn^000000. What";
            mes "are you waiting for, a memo?";
            mes "Get outta here~!";
            set arianstest,5;
            close2;
            goto Verifyitems;

s_Bringbandages:
            mes "[Arian]";
            mes "...";
            mes "Is it really that hard to get";
            mes "^FF000020 Rotten Bandages^000000? Cuz if it";
            mes "is, then you must really blow.";
            mes "How hustle it up, punk!";
            close;
        } else if (arianstest == 5) {
            if (countitem(1038) < 15)goto s_Bringhorns;
            delitem 1038,15;
            mes "[Arian]";
            mes "...";
            mes "My grandma coulda grown";
            mes "out her beard in the time";
            mes "it took you to come back.";
            mes "Now hurry it up and get";
            mes "me ^FF000010 Coral Reefs^000000!";
            set arianstest,6;
            close2;
            goto Verifyitems;

s_Bringhorns:
            mes "[Arian]";
            mes "...";
            mes "I don't get it.";
            mes "You don't have the";
            mes "^FF000015 Little Evil Horn";
            mes "I told you to get.";
            next;
            mes "[Arian]";
            mes "I see, so it's my";
            mes "fault for not telling you";
            mes "not to bring your crap face";
            mes "back without 'em. ^222222*A-hem*";
            mes "Don't bring your crap face here";
            mes "without 15 Little Evil Horns!!";
            close;
        } else if (arianstest == 6) {
            if (countitem(7013) < 10)goto s_Bringcorals;
            delitem 7013,10;
            mes "[Arian]";
            mes "Finally you're back";
            mes "Gimme a sec to count";
            mes "all this stuff so I can make";
            mes "sure you're not trying to";
            mes "cheat. God help you if you";
            mes "try to pull a fast one on me...!";
            set arianstest,7;
            close;

s_Bringcorals:
            mes "[Arian]";
            mes "I don't care how pretty";
            mes "they are or if you're ruining";
            mes "the ecosystem! When I say";
            mes "'bring ^FF000010 Coral Reefs^000000',you";
            mes "better have them! All the";
            mes "fish can die for all I care.";
            close;
        } else if (arianstest == 7) {
            mes "[Arian]";
            mes "...";
            mes "Alright. Go talk";
            mes "to the guy to my left.";
            mes "The dude at the counter.";
            mes "What's-his-face, Ganaan.";
            set arianstest,8;
            close;
        } else if (arianstest == 8) {
            if (gaanantest == 1) {
                if (gaananpoint < 3)goto s_Suck;
                mes "[Arian]";
                mes "Alright. The answers";
                mes "you have Ganaan tell me";
                mes "you're not a total dumbass.";
                mes "Now you're supposed to go see";
                mes "Daewoon in Payon. And don't forget";
                mes "to show him this Star thingiee.";
                getitem 7177,1;
                set signquest,5;
                close;
s_Suck:
                mes "[Arian]";
                mes "Let's see...";
                mes "I'm looking at your";
                mes "answers and they totally";
                mes "suck. Take the test again";
                mes "and do it right this time!";
                next;
                mes "[Arian]";
                mes "Geez...";
                mes "You're givin' Ganaan";
                mes "a hard time. You hear";
                mes "me? That's my job!";
                set gaananpoint,0;
                set gaanantest,0;
                close;
            }
            mes "[Arian]";
            mes "You wanna leave me";
            mes "alone now and gimme";
            mes "a little personal space?!";
            mes "I need a break from looking";
            mes "at your ugly mug, you know?";
            close;
        }

    }

Verifyitems:

    if (arianstest == 2 && countitem(7033) > 49) {
        delitem 7033,countitem(7033);
        mes "[Arian]";
        mes "Hey! What did I tell you";
        mes "about bringing stuff before";
        mes "I asked you about it";
        next;
        mes "[Arian]";
        mes "I'll confiscate those Poison Spores.";
        close2;
    } else if (arianstest == 3 && countitem(904) > 29) {
        delitem 904,countitem(904);
        mes "[Arian]";
        mes "Hey! What did I tell you";
        mes "about bringing stuff before";
        mes "I asked you about it";
        next;
        mes "[Arian]";
        mes "I'll take those Scorpion Tails.";
        close2;
    } else if (arianstest == 4 && countitem(930) > 19) {
        delitem 930,countitem(930);
        mes "[Arian]";
        mes "Hey! What did I tell you";
        mes "about bringing stuff before";
        mes "I asked you about it";
        next;
        mes "[Arian]";
        mes "I'll take those Rotten Bandages.";
        close2;
    } else if (arianstest == 5 && countitem(1038) > 14) {
        delitem 1038,countitem(1038);
        mes "[Arian]";
        mes "Hey! What did I tell you";
        mes "about bringing stuff before";
        mes "I asked you about it";
        next;
        mes "[Arian]";
        mes "I'll confiscate those Little Evil Horns.";
        close2;
    } else if (arianstest == 6 && countitem(7013) > 9) {
        delitem 7013,countitem(7013);
        mes "[Arian]";
        mes "Hey! What did I tell you";
        mes "about bringing stuff before";
        mes "I asked you about it";
        next;
        mes "[Arian]";
        mes "I'll confiscate those Coral Reefs.";
        close2;
    }
    end;
}

payon_in03,81,16,8	script	Maid::Sohee	1170,{

end;

}

payon_in03,78,16,8	script	Maid::Miyabi	1404,{

end;

}

payon_in03,13,31,4	script	Maid::Nymph	1416,{

end;

}

payon_in03,81,21,4	duplicate(Sohee)	Maid::Sohee2	1170
payon_in03,78,21,4	duplicate(Miyabi)	Maid::Miyabi2	1404
payon_in03,8,31,4	duplicate(Nymph)	Maid::Nymph2	1416

payon_in03,11,31,4	script	Daewoon	808,{

    mes "[Daewoon]";
    mes "Mwah ah hah!";
    mes "Feasting and merriment,";
    mes "wine, women and song!";
    mes "I could ask for nothing more!";
    next;
    mes "[Daewoon]";
    mes "The most scumptious";
    mes "delicacies are all mine to";
    mes "taste! And I'm not just talking";
    mes "about the food. Mwah ah hah!";
    mes "I'm the king of the world!";
    next;

    if (signquest < 4 || signquest > 6) {
        mes "[Daewoon]";
        mes "Mwah ah hah~!";
        mes "I couldn't be happier!";
        mes "What more do I need?";
        mes "Gourmet food, find wine";
        mes "nubile women...!";
        close;
    } else if (signquest == 5) {
        mes "[Daewoon]";
        mes "Oh, a visitor?";
        mes "I'm sorry, but I believe";
        mes "you're an uninvited guest~";
        mes "You'll have to forgive me";
        mes "if I wish to spend my time with";
        mes "maidens as opposed to men";
        next;
        mes "[" + strcharinfo(0) + "]";
        mes "Sure...";
        mes "But first, would you";
        mes "take a look at this?";
        next;
        mes "^3355FFYou carefully take";
        mes "out the small, lucid";
        mes "jewel that Arian gave";
        mes "you and reveal it to";
        mes "Daewoon's roving eyes.";
        next;
        emotion e_gasp;
        mes "[Daewoon]";
        mes "Eh? Why that's...";
        mes "I see now, Arian must";
        mes "have sent you! Oh you";
        mes "should have said so";
        mes "at the very beginning~";
        next;
        mes "[Daewoon]";
        mes "My apologies~";
        mes "Lately I've been attracting";
        mes "all sorts of strange attention";
        mes "like some kind of teen celebrity.";
        mes "I've gotten used to being too";
        mes "careful in screening out the";
        mes "dangerous sort.";
        next;
        mes "[Daewoon]";
        mes "Now then.";
        mes "Do you have any";
        mes "idea what that jewel";
        mes "you're holding actually is?";
        next;
        menu "Kind of?",-,"How the hell would I know?",s_How,"No, but would you tell me?",s_Tell;

        mes "[Daewoon]";
        mes "Oh...!";
        mes "You must be much";
        mes "smarter than I expected.";
        mes "So tell me, what do you";
        mes "understand about this jewel?";
        next;
        menu "It's handy.",-,"I actually don't know...",s_Honest;

        emotion e_dots;
        mes "[Daewoon]";
        mes "Mmm...?";
        mes "Handy? If you truly";
        mes "understood, I don't";
        mes "think you'd describe this";
        mes "jewel as merely 'handy'.";
        next;
        goto s_Cont;
s_Honest:
        emotion e_pif;
        mes "[Daewoon]";
        mes "Really?";
        mes "Mm. At least you";
        mes "admit it ^000200*Sigh*";
        next;
        goto s_Cont;
s_How:
        emotion e_dots;
        mes "[Daewoon]";
        mes "...";
        mes "A rather crass way";
        mes "of speaking, but perhaps";
        mes "you picked it up from Arian.";
        mes "In any case, let me explain.";
        next;
        goto s_Cont;
s_Tell:
        mes "[Daewoon]";
        mes "Didn't Arian tell you";
        mes "anything? I appreciate";
        mes "your honesty. And I don't";
        mes "mind chatting a while, I much";
        mes "prefer speaking to honest people";
        mes "rather than foolish know-it-alls.";
        next;
s_Cont:
        mes "[Daewoon]";
        mes "That ^301A8ASobbing Starlight^000000";
        mes "is no mere jewel. It is a key";
        mes "item for unlocking some incredible";
        mes "power. I believe Metz happened to";
        mes "obtain a piece, though I am";
        mes "unsure how...";
        next;
        mes "[Daewoon]";
        mes "Metz has asked me and";
        mes "some other friends who";
        mes "hold the fragments of the";
        mes "Sobbing Starlight to entrust";
        mes "them to someone worthy of";
        mes "finding the power it leads to.";
        next;
        mes "[Daewoon]";
        mes "Of course, we all agreed";
        mes "and now you're here for me";
        mes "to judge whether or not you're";
        mes "qualified for this task. Now,";
        mes "are you ready for my test?";
        next;
        menu "I'M READY! YEEAH!",-,"I'll do my best!",s_Best,"To hell with this!",s_Rude,"Fine. Let's get it over with",s_GetOver;

        mes "[Daewoon]";
        mes "Ooh~";
        mes "Such unbridled";
        mes "enthusiasm usually";
        mes "goes more good than harm.";
        next;
        goto s_Question;

s_Best:
        emotion e_ok;
        mes "[Daewoon]";
        mes "Mwah ah hah";
        mes "That's exactly what";
        mes "I wanted to hear! That";
        mes "kind of quiet and careful";
        mes "confidence will help you";
        mes "in the future, you'll see~";
        next;
        goto s_Question;
s_Rude:

        mes "[Daewoon]";
        mes "E...";
        mes "Excuse me?";
        next;
        mes "[Daewoon]";
        mes "How can you be";
        mes "so ridiculous at";
        mes "a time like this?";
        mes "Either mind your manners";
        mes "or don't take this test at";
        mes "all! ^000200*SLAP--!!*";
        next;
        goto s_Question;

s_GetOver:
        emotion e_dots;
        mes "[Daewoon]";
        mes "Hmm. That kind of half-hearted";
        mes "attitude won't get you very far on";
        mes "your adventures. Still, so long as";
        mes "you don't get overly negative, you";
        mes "should have a decent chance of";
        mes "surviving your challenges.";
        next;
s_Question:
        emotion e_hmm;
        set @DaewoonTest,0;
        mes "[Daewoon]";
        mes "Now, Metz expects me to ask";
        mes "some rather serious questions,";
        mes "but that really isn't my style.";
        mes "For this test, why don't we just";
        mes "talk? Just answer me honestly and";
        mes "light heartedly, alright?";
        next;
        mes "[Daewoon]";
        mes "So...";
        mes "Do you have a lot";
        mes "of friends that you can";
        mes "constantly party with?";
        next;
        menu "Yes, I do",-,"I prefer soloing.",s_Solo,"I am lonely.",s_Lonely;

        set @DaewoonTest,1;
        emotion e_omg;
        mes "[Daewoon]";
        mes "Oh, that's great~!";
        mes "To have many friends";
        mes "is a priceless blessing.";
        mes "Friends bring us joy and";
        mes "aid when we find ourselves";
        mes "suffering from difficulties.";
        next;
        mes "[Daewoon]";
        mes "Wouldn't you";
        mes "agree that being";
        mes "really close friends";
        mes "with someone can be";
        mes "a life long benefit?";
        next;
        goto s_Mobtrain;

s_Solo:

        mes "[Daewoon]";
        mes "Well, everybody";
        mes "needs to be alone once";
        mes "in a while. And there are";
        mes "some battles you must";
        mes "fight all on your own.";
        next;
        mes "[Daewoon]";
        mes "Also, if you never";
        mes "deal with other people,";
        mes "you may grow selfish or";
        mes "needy. It's better to go";
        mes "out and meet people,";
        mes "don't you think?";
        next;
        goto s_Mobtrain;

s_Lonely:

        mes "[Daewoon]";
        mes "You don't have any";
        mes "friends at all? Well,";
        mes "you better learn how";
        mes "to get along with others";
        mes "as soon as you can...!";
        next;
s_Mobtrain:
        mes "[Daewoon]";
        mes "Now, what's your opinion";
        mes "on purposely getting lots";
        mes "of monsters to follow you";
        mes "around. I believe this is";
        mes "called 'Mob Training...'";
        next;
        menu "Awesome~!",-,"I hate people who do that.",s_Hate,"I do it sometime...",s_Sometimes;

        emotion e_pif;
        mes "[Daewoon]";
        mes "But...";
        mes "Wouldn't that be really";
        mes "rude to anyone else hunting";
        mes "on that same map? I think";
        mes "it would even interfer with";
        mes "someone else's gameplay...";
        next;
        mes "[Daewoon]";
        mes "Perhaps you should try";
        mes "to consider other people's";
        mes "feelings. Mob training seems";
        mes "to only be good at getting other";
        mes "people angry with you...";
        next;
        goto s_Woe;
s_Hate:
        set @DaewoonTest,@DaewoonTest + 1;
        mes "[Daewoon]";
        mes "Really?";
        mes "I do too!";
        next;
        mes "[Daewoon]";
        mes "Just the other day, I've";
        mes "heard some ruffians boasting";
        mes "of their mob training activities.";
        mes "But personally, I feel they were";
        mes "compensating for their own";
        mes "shortcomings.";
        next;
        mes "[Daewoon]";
        mes "Such behaviour truly";
        mes "bothers me. Although I have";
        mes "spent years in developing an";
        mes "unflappable personality, I find";
        mes "myself irked when encountering";
        mes "such troublemakers.";
        next;
        emotion e_no1;
        mes "[Daewoon]";
        mes "When you face obstacles";
        mes "in your own training, never give in";
        mes "to weakness. Assert yourself and";
        mes "find the determination to overcome";
        mes "your tribulations with honor!";
        next;
        goto s_Woe;
s_Sometimes:
        mes "[Daewoon]";
        mes "At least you're honest.";
        mes "But let me say that I cannot";
        mes "condone that sort of weak willed";
        mes "behavior. True strength can only";
        mes "be found through honor.";
        mes "Remember that.";
        next;
        mes "[Daewoon]";
        mes "In the face of overwhelming";
        mes "odds, do not despair. After all,";
        mes "what is achievment if it is not";
        mes "earned without difficulty? The";
        mes "greater the challenge, the";
        mes "greater the glory.";
        next;
        mes "[Daewoon]";
        mes "Even if you are having a hard ";
        mes "time, try to take a firm";
        mes "stand. One day, you will realize";
        mes "how strong you have become.";
        next;
        mes "[Daewoon]";
        mes "And...";
        mes "Don't ever partake in";
        mes "mob training again, okay?";
        next;
s_Woe:
        mes "[Daewoon]";
        mes "Anyway, I'm sure you're";
        mes "aware of the War of Emperium";
        mes "in which might guilds all across";
        mes "Rune-Midgard battle for guild";
        mes "castle dominion. It's actually";
        mes "quite popular, really.";
        next;
        mes "[Daewoon]";
        mes "Now imagine that both of us";
        mes "are in the midst of a heated guild";
        mes "war. The sounds of explosions and";
        mes "earth shaking magic spells are all";
        mes "we can hear. At any time, we can";
        mes "be lost in that mindless chaos.";
        next;
        mes "[Daewoon]";
        mes "Finally, through incredibly";
        mes "good fortune, we manage to";
        mes "infiltrate the enemy guild castle";
        mes "and reach their Emperium. If we";
        mes "destroy that Emperium, that castle";
        mes "will belong to our guild.";
        next;
        mes "[Daewoon]";
        mes "However...! This is";
        mes "no ordinary Emperium!";
        mes "It is a masterful sculpture";
        mes "of a gorgeous Priestess!";
        mes "Answer me, adventurer!";
        mes "Would you still destroy it?!";
        next;
        menu "Destroy it!",-,"I can't destroy such beauty...",s_Beauty,"I'd close my eyes, then destroy it.",s_Eyes;

        mes "[Daewoon]";
        mes "Hmm. You have a truly";
        mes "strong will. Then again,";
        mes "perhaps you lack a try";
        mes "appreciation for beauty.";
        mes "Even in Emperium form, how";
        mes "could you harm a Priestess?";
        next;
        goto s_Guild2;
s_Beauty:

        set @DaewoonTest,@DaewoonTest + 1;
        mes "[Daewoon]";
        mes "Ah yes! I felt you would answer";
        mes "that way! We must cherish and";
        mes "protect what is beautiful in this";
        mes "world. I would never be able to";
        mes "harm a Priestess, even in";
        mes "statue form...";
        next;
        goto s_Guild;
s_Eyes:

        mes "[Daewoon]";
        mes "Interesting...!";
        mes "Although you cherish";
        mes "the beauty of the Priestess,";
        mes "your loyalty to your guild";
        mes "proves stronger. A most";
        mes "admirable attitude!";
        next;
s_Guild2:
        mes "[Daewoon]";
        mes "But yes, if it was";
        mes "me, I would protect that";
        mes "Priestess-shaped Emperium";
        mes "until the end of the guild war.";
        mes "Mwah ah hah~!";
        next;
s_Guild:
        mes "[Daewoon]";
        mes "While we're on the topic";
        mes "of guilds, let me present";
        mes "another guild related scenario.";
        mes "Let's say that you joined a very";
        mes "popular guild with many allies,";
        mes "as well as formidable enemies.";
        next;
        mes "[Daewoon]";
        mes "Now, during one of your";
        mes "hunts, you happen to meet";
        mes "a member of one of your enemy";
        mes "guilds. The two of you are the";
        mes "only people on that map. Suddenly,";
        mes "he finds himself in mortal danger!";
        next;
        mes "[Daewoon]";
        mes "This enemy guild member";
        mes "begins to yell for help. Now,";
        mes "would you give your enemy";
        mes "the help that he needs?";
        next;
        menu "Yes of course!",-,"I'd pretend not to hear anything.",s_Hear,"I'd make fun of him, then run off.",s_Fun;

        set @DaewoonTest,@DaewoonTest + 1;
        mes "[Daewoon]";
        mes "Ah, you would help him!";
        mes "Good, good. I'm glad to see";
        mes "that you understand such";
        mes "pettiness should not get in the way";
        mes "of doing what is good and right.";
        next;
        goto s_Life;
s_Hear:
        set @DaewoonTest,@DaewoonTest + 1;
        mes "[Daewoon]";
        mes "True, you're not really";
        mes "obligated to help your";
        mes "enemy. Besides, you may";
        mes "hurt his feelings once he";
        mes "realizes that he's had to";
        mes "depend on his rival for help.";
        next;
        goto s_Life;
s_Fun:
        mes "[Daewoon]";
        mes "Even though he is";
        mes "your enemy, I still";
        mes "believe it's important";
        mes "that you treat him with";
        mes "respect. Where is your honor?";
        next;
s_Life:
        mes "[Daewoon]";
        mes "Well, there's one";
        mes "last thing I want to";
        mes "know about you. It's the";
        mes "most important question";
        mes "in the world once you";
        mes "think about it.";
        next;
        mes "[Daewoon]";
        mes "...";
        mes "......";
        mes "Do you enjoy life?";
        next;
        menu "Yes",-,"No",s_No;

        set @DaewoonTest,@DaewoonTest + 1;
        emotion e_heh;
        mes "[Daewoon]";
        mes "I'm glad.";
        mes "When you don't live";
        mes "with zeal, it's easy to";
        mes "forget your goals and your";
        mes "purpose for living. Don't have";
        mes "any? Then make some up.";
        next;
        mes "[Daewoon]";
        mes "I hope you always enjoy";
        mes "life as much as you can.";
        mes "As for me, I'm always happy";
        mes "with my wine, women and song~";
        mes "Mwah ah hah~!";
        next;
        goto s_Last;

s_No:
        mes "[Daewoon]";
        mes "I understand.";
        mes "People cannot be happy";
        mes "all the time. Sometimes";
        mes "it's easy to forget your";
        mes "goals and purpose in life.";
        next;
        mes "[Daewoon]";
        mes "But you know what? If you";
        mes "have just one dream, one goal";
        mes "to strive towards, things shall";
        mes "get better. If you think you don'";
        mes "have dreams, look back to your";
        mes "past. What you remember may";
        mes "surprise you.";
        next;
        mes "[Daewoon]";
        mes "It's important to look forward,";
        mes "but first you must find what is";
        mes "truly precious to you before you";
        mes "can define your happiness. That's";
        mes "why I think it's good to";
        mes "experience new things as wel";
        mes "as reflect.";
        next;
        emotion e_no1;
        mes "[Daewoon]";
        mes "Now, what's precious to me?";
        mes "Three things, actually...";
        mes "Wine. Women. And song!";
        mes "Though if I had to rank them,";
        mes "women would top that list.";
        mes "Mwah ah hah~!";
        next;
s_Last:
        if (@DaewoonTest == 5) {
            mes "[Daewoon]";
            mes "You know, after talking with";
            mes "you for a while, I now feel fairly";
            mes "comfortable with leaving you this";
            mes "piece of the Sobbing Starlight.";
            mes "Somehow, I think you're strong";
            mes "enough to get all the pieces.";
            next;
            mes "[Daewoon]";
            mes "I hope you will pass the rest of";
            mes "the tests and acquire the power.";
            next;
            mes "[Daewoon]";
            mes "Oh yes! Your next test";
            mes "examiner is ^FF0000Sir Jore^000000, also";
            mes "known as the Ghost of Al de Baran.";
            mes "Although he's always sick, he has";
            mes "great passion for his research.";
            getitem 7177,1;
            set signquest,6;
            next;
            mes "[Daewoon]";
            mes "Alright, then.";
            mes "Good luck in";
            mes "Al de Baran~!";
            close;
        } else {
            mes "[Daewoon]";
            mes "It pains me to say this,";
            mes "but I do not think you're";
            mes "worthy of holding my fragment";
            mes "of the Sobbing Starlight. But";
            mes "I am willing to give you";
            mes "another chance~";
            close;
        }

    }
    else if (signquest == 6) {
        mes "[Daewoon]";
        mes "Mwah ah hah!";
        mes "Feasting and merriment,";
        mes "wine, women and song!";
        mes "I could ask for nothing more!";
        next;
        mes "[Daewoon]";
        mes "The most scrumptious";
        mes "delicacies are all mine to";
        mes "taste! And I'm not just talking";
        mes "about the food. Mwah ah hah!";
        mes "I'm the king of the world!";
        next;
        mes "[Daewoon]";
        mes "Hm...?";
        mes "Weren't you on";
        mes "your way to find";
        mes "^FF0000Sir Jore^000000 in Al de Baran?";
        next;
        mes "[Daewoon]";
        mes "Oh, having trouble";
        mes "finding him, are you?";
        mes "Well, he's fairly shy, but";
        mes "I'm sure he's hiding some";
        mes "place in that town.";
        close;
    }
}

aldebaran,226,54,4	script	#aldesignwarp	45,2,2,{
OnTouch:
	set @aldesigncheck,0;
	warp "aldeba_in",149,120;
	end;

}

aldeba_in,149,123,4	script	#aldesignwarp2	45,2,2,{
OnTouch:
	set @aldesigncheck,0;
	warp "aldebaran",223,56;
	end;

}

aldeba_in,147,104,1	script	PotionActivator	139,3,0,{
OnTouch:
	if(@aldesigncheck == 0){
		donpcevent "Jore#SignAldeNpc::OnPotion";	
		set @aldesigncheck,1;
	}
	end;
}
	
aldeba_in,156,118,4	script	Piru Piru	700,{

    emotion e_sob;
    mes "[Piru Piru]";
    mes "Oh, I'm sooo tired~";
    mes "But we can't sleep yet.";
    mes "^000200*Sob*^000000 Master, can't we";
    mes "just call it a day already?";
    next;
    if (signquest != 7) {
        menu "What do you do in here?",-;
    } else {
        menu "What do you do in here?",-,"About vanished Alchemists",s_Vanish,"What is the Stone of Sage?",s_SageStone;
    }
    mes "[Piru Piru]";
    mes "My master, Sir Jore,";
    mes "is researching a way to";
    mes "create artificial life! Still,";
    mes "it's not easy and we haven't";
    mes "accomplished anything yet...";
    next;
    mes "[Piru Piru]";
    mes "It doesn't help that my";
    mes "master spends all of his";
    mes "time on research. He hasn't";
    mes "been taking care of himself";
    mes "and is losing a lot of weight.";
    mes "I'm really worried about him.";
    close;

s_Vanish:
    mes "[Piru Piru]";
    mes "Oh, the father and daughter";
    mes "who were both Alchemists, right?";
    mes "Did you know they vanished because";
    mes "they invented the monster potion";
    mes "summoning skill?";
    next;
    mes "[Piru Piru]";
    mes "Their discovery caused";
    mes "such great hysteria in the";
    mes "scientific community. In the";
    mes "end they had no choice but";
    mes "to live in seclusion deep";
    mes "in the ^FF0000forest to the south^000000.";
    next;
s_SageStone:
    mes "[Piru Piru]";
    mes "Hmm? Well, I wouldn't";
    mes "know anything about that.";
    mes "In fact, I'm always staying";
    mes "in this lab, so I never hear";
    mes "any rumors or news outside.";
    close;

}

aldeba_in,155,101,2	script	Jore#SignAldeNpc	805,{

    if (gettime(3) == 17 || gettime(3) == 18 || gettime(3) == 19 || gettime(3) == 20 || gettime(3) == 21) {
        if (signquest == 7) {
            mes "[Sir Jore]";
            mes "I want you to find two";
            mes "Alchemists, a father and";
            mes "daughter, who have gone into";
            mes "seclusion deep in some forest";
            mes "so that I can learn more about";
            mes "the Stone of Sage.";
            next;
            mes "[Sir Jore]";
            mes "Of course, this will";
            mes "possibly further my";
            mes "research, but it's also";
            mes "how I'll judge whether or";
            mes "not you're qualified for my";
            mes "piece of the Sobbing Starlight.";
            close;
        }
        if (signquest == 8) {
            mes "[Sir Jore]";
            mes "Oh.. You're already back !";
            mes "Then, let me hear everything you learn";
            mes "about the Stone of Sage !";
            next;
            mes "[Sir Jore]";
            mes "...";
            next;
            mes "[Sir Jore]";
            mes "...";
            mes "....";
            next;
            mes "[Sir Jore]";
            mes "...";
            mes "....";
            mes ".....";
            next;
            mes "[Sir Jore]";
            mes "I see..";
            mes "I didn't think that mythic stone";
            mes "could be that dangerous..";
            mes "That's enough for me to know,";
            mes "You did your work perfectly.";
            next;
            mes "[Sir Jore]";
            mes "Just a last question";
            mes "before I give you what you want.";
            next;
            mes "[Sir Jore]";
            mes "What do you think the Stone of Sage is?";
            next;
            input @sign_jore$;

            if (@sign_jore$ == "Red Gemstone") {

                mes "[Sir Jore]";
                mes "That's what I thought too,";
                mes "but after all maybe it doesn't have";
                mes "any power.";
                next;
                getitem 7177,1;
                set signquest,9;
                mes "[Sir Jore]";
                mes "Take that starry fragment.";
                mes "I'll inform my friend about you.";
                mes "Look for ^FF0000Jesqurienne^000000.";
                mes "She often spends her time";
                mes "in the bars of Geffen.";
                next;
                mes "[Sir Jore]";
                mes "I have to return to my researches..";
                next;
                mes "[Sir Jore]";
                mes "Acid.....";
                mes "............Basic..";
                mes "...";
                close;
            } else {
                mes "[Sir Jore]";
                mes "The shape you are describing me";
                mes "can't be the real shape of the";
                mes "Stone of Sage.";
                next;
                mes "[Sir Jore]";
                mes "It should look like";
                mes "an oftenly used stone..";
                mes "Come back when you will know";
                mes "more about his shape.";
                close;

            }

        }

        if (signquest == 9) {
            mes "[Sir Jore]";
            mes "Can't you let me alone?";
            mes "Stop disturbing me and";
            mes "find ^FF0000Jesqurienne^000000 in Geffen.";
            close;
        }

        if (SignJore == 1) {

            if (countitem(1092) < 10 || countitem(511) < 10 || countitem(610) < 2) {
                mes "[Sir Jore]";
                mes "Please bring m-me";
                mes "10 Empty Test Tube,";
                mes "10 Green Herb and";
                mes "2 Yggdrasil Leaf.";
                mes "so that I can make a";
                mes "new research sample.";
                close;
            } else {
                delitem 1092,10;
                delitem 511,10;
                delitem 610,2;
                set signquest,7;
                set SignJore,0;
                emotion e_thx;
                mes "[Sir Jore]";
                mes "Ah! Th-thank you for";
                mes "bringing what I need.";
                mes "Now I can continue my";
                mes "research. Oh, and see if";
                mes "you're worthy of obtaining";
                mes "the Sobbing Starlight";
                next;
                mes "[Sir Jore]";
                mes "Now, for your assignment.";
                mes "Have you ever heard about";
                mes "the ^FF0000Stone of Sage^000000? Rumors about";
                mes "it have been spreading around, but";
                mes "no one has confirmed the truth";
                mes "about it, " + strcharinfo(0) + ".";
                next;
                mes "[Sir Jore]";
                mes "Although I have no clue";
                mes "what the Stone of S-S-age";
                mes "may actually be, I have a gut";
                mes "feeling that I need it to bring";
                mes "my Biology research to the next";
                mes "step. This is how you'll help me.";
                next;
                mes "[Sir Jore]";
                mes "I need you to investigate";
                mes "this Stone of Sage by finding";
                mes "a father and daughter who were";
                mes "famous for being great Alchemists.";
                mes "They vanished deep into a forest,";
                mes "but I believe they know something.";
                close;
            }

        }
        mes "[" + strcharinfo(0) + "]";
        mes "Excuse me...";
        next;
        emotion e_omg;
        mes "^3355FF*Clink*";
        next;
        mes "[Sir Jore]";
        mes "...";
        mes "......";
        next;
        mes "[Sir Jore]";
        mes "...";
        mes "......";
        mes "...No!";
        mes "Look what you";
        mes "made me do!";
        next;
        emotion e_sob;
        mes "[Sir Jore]";
        mes "I've been fiddling";
        mes "with this sample for";
        mes "five hours. And now";
        mes "it's ruined ^000200*Sob*";
        if (signquest != 6)close;
        next;
        mes "[Sir Jore]";
        mes "^000200*Sob*^000000";
        mes "I came to this town";
        mes "so I could focus on";
        mes "my research without";
        mes "any interuptions. So";
        mes "why are you here?";
        next;
        menu "Daewoon sent me.",s_Daewoon,"Oops, sorry. Later~",-;

        mes "[Sir Jore]";
        mes "I spent five hours";
        mes "observing the changes";
        mes "in that research sample.";
        mes "All of that hard work lost!";
        mes "^000200*Wah~!*";
        close;

s_Daewoon:
        emotion e_swt;
        mes "[Sir Jore]";
        mes "O-oh!";
        mes "That's right.";
        mes "You're here to be";
        mes "tested for the piece";
        mes "of the Sobbing Starlight.";
        next;
        mes "[Sir Jore]";
        mes "So...";
        mes "Er. Then, what...";
        mes "W-what's your name?";
        next;
        menu strcharinfo(0) + ", thanks.",-;
        mes "[Sir Jore]";
        mes "N-nice to meet you.";
        mes "My name is Jore. Just";
        mes "a normal person who loves";
        mes "research. S-sorry if I seem";
        mes "a little nervous! I'm actually";
        mes "quite... shy around people.";
        next;
        mes "[Sir Jore]";
        mes "Oh no...!";
        mes "if you were able to";
        mes "find me, there will be";
        mes "others! When would I get";
        mes "the time to do my research?!";
        mes "N-no! I h-h-hate people!!";
        next;
        mes "[Sir Jore]";
        mes "Still, I did promise";
        mes "M-M-Metz and he is my";
        mes "friend. So I must accept";
        mes "some guests. Even if hundreds";
        mes "of them knock on my door...";
        next;
        mes "[Sir Jore]";
        mes "But first of all,";
        mes "I'm going to need";
        mes "a new research sample.";
        mes "I think it's only fair that";
        mes "you get it for me since you";
        mes "made me ruin the last one.";
        next;
        mes "[Sir Jore]";
        mes "N-now, d-don't worry.";
        mes "The items are actually";
        mes "quite easy to get. It's";
        mes "the five hours part that's";
        mes "hard. Now, let's see...";
        next;
        mes "[Sir Jore]";
        mes "Just bring";
        mes "10 Empty Test Tube,";
        mes "10 Green Herb and";
        mes "2 Yggdrasil Leaf.";
        next;
        mes "[Sir Jore]";
        mes "You see, l-lately I've";
        mes "been studying Biology.";
        mes "I think the secret to life";
        mes "can be found in the Leaf of";
        mes "Yggdrasil. They can be used";
        mes "to revive the dead, after all.";
        next;
        emotion e_swt;
        mes "[Sir Jore]";
        mes "Oh, and make sure to";
        mes "bring those things to me";
        mes "before I go to bed at";
        mes "precisely 10:00 PM " + $timezonestring$ + ".";
        mes "I do have a regular sleeping";
        mes "schedule, you know.";
        set SignJore,1;
        close;

    } else {
        mes "^3355FFYou find a tense man";
        mes "holding test tubes between";
        mes "his fingers, standing in a pile";
        mes "of books. He seems to be in";
        mes "agony for some reason.";
        next;
        menu "Speak to him.",s_Speak,"Ignore him.",-;

        mes "^3355FFYou decided to leave";
        mes "him alone and let him";
        mes "continue mumbling to";
        mes "himself and playing";
        mes "with his test tubes.";
        close;

s_Speak:
        mes "[" + strcharinfo(0) + "]";
        mes "Excuse me...";
        next;
        mes "[Sire Jore]";
        mes "...";
        mes "......";
        next;
        mes "^3355FFToo preoccupied with";
        mes "his thoughts, this strange";
        mes "man is unable to hear you.";
        next;
        menu "Try again.",s_Again,"Ignore him.",-;

        mes "^3355FFYou decided to leave";
        mes "him alone and let him";
        mes "continue mumbling to";
        mes "himself and playing";
        mes "with his test tubes.";
        close;

s_Again:
        mes "[" + strcharinfo(0) + "]";
        mes "EXCUSE ME!";
        next;
        mes "[Sire Jore]";
        mes "...!";
        mes "Oh, h-h-hello.";
        mes "Sorry, but I'm kind of";
        mes "busy right now. Yes, yes,";
        mes "would you come back at";
        mes "precisely 5:00 PM " + $timezonestring$ + "?";
        next;
        mes "[Sire Jore]";
        mes "Let's see...";
        mes "Now if I recalibrated";
        mes "the faust exhaust, then";
        mes "the bioneutron analyzer";
        mes "would need to be adjusted";
        mes "for cytoplasmic balance...";
        close;
    }

OnPotion:
    if (rand(2)) {
        emotion e_ic;
        misceffect 305;
    } else {
        emotion e_omg;
        misceffect 306;
    }
    end;
}

prt_maze02,57,152,1	script	Girl#11	91,{

	mes "^3355FFYou catch a glimpse";
	mes "of a girl heading directly";
	mes "into a deep forest. You decide";
	if(signquest != 7){
		mes "to not follow her since you're";
		mes "not interested where she's going.";
		close;
	}
	mes "to follow her and see if you can";
	mes "learn more.";
	close2;
	warp "prt_maze02",11,146;
	end;
}

function	script	Sign_Alch_Summon	{

Loopback:
	if($signmazemonster == 0){
		set $signmazemonster,5;
		monster "prt_maze02",14,177,"Flora",1118,1,"Gordon::OnMonsterDead";
		monster "prt_maze02",17,171,"Flora",1118,1,"Gordon::OnMonsterDead";
		monster "prt_maze02",24,173,"Flora",1118,1,"Gordon::OnMonsterDead";
		monster "prt_maze02",17,175,"Marine Sphere",1142,1,"Gordon::OnMonsterDead";
		monster "prt_maze02",17,168,"Marine Sphere",1142,1,"Gordon::OnMonsterDead";
		return;
	} else {
		killmonster "prt_maze02","Gordon::OnMonsterDead";
		set $signmazemonster,0;
		goto Loopback;
	}
}

prt_maze02,16,183,3	script	Pleur	91,{
	mes "[Pleur]";
	if(signquest == 7 || signquest == 8){
		mes "La la la~";
		mes "La la la~";
		close;
	} else {
		mes "Oh, you're lost?";
		mes "I'll help you find";
		mes "your way back...";
		close2;
		warp "prt_maze02",61,149;
		end;
	}
OnHo:
	emotion e_ho;
	end;
OnKis2:
	emotion e_kis2;
	end;
OnExclamation:
	emotion e_gasp;
	end;
OnOmg:
	emotion e_omg;
	end;
}

prt_maze02,14,183,3	script	Gordon	51,{

    if (signquest == 7 || signquest == 8) {
        if (ScareAlchSign == 1)goto s_Scared;
        mes "[Gordon]";
        mes "Hello darling.";
        mes "What did you do today?";
        next;
        donpcevent "Pleur::OnHo";
        mes "[Pleur]";
        mes "I played Hide-and-Seek";
        mes "with a white bear and a";
        mes "blue bear, father.";
        next;
        emotion e_ho;
        mes "[Gordon]";
        mes "Darling...";
        mes "Aren't you tired";
        mes "of playing with the";
        mes "animals? We've live";
        mes "in this forest for so long...";
        next;
        donpcevent "Pleur::OnKis2";
        mes "[Pleur]";
        mes "Don't worry father, I understand.";
        mes "For now, this is the only place";
        mes "where we can relax and live";
        mes "in peace. I think we deserve to rest";
        mes "after accomplishing our goals...";
        next;
        emotion e_sob;
        mes "[Gordon]";
        mes "Thank you, Pluer.";
        mes "I have no regrets about";
        mes "our work, but sometimes";
        mes "I do wish for a more";
        mes "carefree life for you...";
        next;
        menu "Roar~!",-,"Excuse me.",s_Excuse;

        callfunc "Sign_Alch_Summon";
        emotion e_omg;
        donpcevent "Pleur::OnOmg";
        set ScareAlchSign,1;
        mes "[Pleur]";
        mes "No no no!";
        mes "Summon Flora!";
        next;
        mes "[Gordon]";
        mes "Great Schott!";
        mes "Summon... Marine Sphere!";
        close;

s_Excuse:
        emotion e_gasp;
        donpcevent "Pleur::OnExclamation";
        mes "[Gordon]";
        mes "Eh?! Don't you know";
        mes "how dangerous this place";
        mes "is? What are you doing";
        mes "here in the middle of";
        mes "this forest?";
        next;
s_Back:
        mes "[" + strcharinfo(0) + "]";
        mes "Actually, I think";
        mes "I've been looking for";
        mes "you. I've been sent on";
        mes "an errand to find these";
        mes "two famous Alchemists.";
        next;
        mes "[Gordon]";
        mes "Mm...?";
        mes "Well, we're retired";
        mes "now, but I suppose it'd";
        mes "do no harm if you had";
        mes "something to ask us...";
        next;
        menu "Ask about Stone of Sage",s_Sage,"Ask about Alchemy",s_Alch,"Quit",-;

        mes "[Gordon]";
        mes "Hah hah hah~";
        mes "Did you forget";
        mes "what you were";
        mes "going to ask me?";
        close;

s_Sage:

        mes "[Gordon]";
        mes "Stone of Sage?";
        mes "Huh. To be honest,";
        mes "I don't know anything";
        mes "about it at all. I guess";
        mes "its existence is pretty";
        mes "much just a rumor, really.";
        next;
        mes "[Gordon]";
        mes "All I've heard is that";
        mes "the Stone of Sage might";
        mes "be a catalyst  to transmute";
        mes "materials into gold. If it";
        mes "really existed, it would be";
        mes "the ultimate alchemic item.";
        next;
        mes "[Pleur]";
        mes "However I've also heard";
        mes "it's red, can make humans";
        mes "immortal and can cure any";
        mes "sort of disease or ailment";
        mes "Just where do these rumors";
        mes "come from? It's crazy...";
        next;
        mes "[Gordon]";
        mes "Now, I even heard that some";
        mes "people are working on trying";
        mes "to create the stone themselves.";
        mes "If they succeed, it'll have a huge";
        mes "effect on the entire world!";
        next;
        mes "[Gordon]";
        mes "I'm sorry that you've gone";
        mes "through the trouble of finding";
        mes "us for this kind of information.";
        mes "We're retired after all, so we";
        mes "may be out of the loop.";
        next;
        mes "[Pleur]";
        mes "Although we're retired, we";
        mes "would be much interested in";
        mes "knowing if someone does manage";
        mes "to create such a stone. If that";
        mes "happens, would you tell us?";
        next;
        mes "[Gordon]";
        mes "Now let me guide you";
        mes "on a safe path back out";
        mes "of this maze. I've lived here";
        mes "quite a while, so I can find";
        mes "the exit with my eyes close.";
        mes "Farewell, adventurer~";
        close2;
        set signquest,8;
        warp "mjolnir_12",44,23;
        end;
s_Alch:

        mes "[Pleur]";
        mes "I hope you understand that";
        mes "my father and I devoted and";
        mes "sacrificed so much for our work.";
        mes "Finally, we discovered a way to";
        mes "summon monsters using potions.";
        next;
        mes "[Pleur]";
        mes "However, too many Alchemists";
        mes "hounded us for our information";
        mes "once we announced the results";
        mes "of our research. Ir was more";
        mes "than we could handle...";
        next;
        mes "[Gordon]";
        mes "I'm sorry, but if you have any";
        mes "questions about Alchemy, there";
        mes "are many qualified researchers and";
        mes "practitioners out there. We came to";
        mes "this forest to find peace...";
        close;

s_Scared:
        mes "[Gordon]";
        mes "Oh...!";
        mes "You scared us!";
        mes "Roaring like some";
        mes "animal! What do you";
        mes "think you were doing?";
        next;
        goto s_Back;

    } else {
        mes "[Gordon]";
        mes "Can't find your way back?";
        mes "Don't worry... I'll help";
        mes "you.";
        close2;
        warp "prt_maze02",61,149;
        end;
    }

OnMonsterDead:
	set $signmazemonster,$signmazemonster - 1;
	end;
}

geffen_in,59,74,3	script	Jesqurienne	803,{

	mes "[Jesqurienne]";
	if(signquest == 10) goto L_won;
	if(signquest == 9) goto L_Sign_Jesq;
	mes "Bartender~?";
	mes "Give me another drink.";
	close;

L_Sign_Jesq:
	mes "Bartender~?";
	mes "Give me another drink.";
	next;
	mes "[Jesqurienne]";
	mes "Ahhhhhh~";
	mes "Hm? Why hello there,";
	if(!Sex) goto L_female;
	mes "You fine specimen of a man~";

L_female:
	mes "I'm Jesqurienne. You've heard";
	mes "of me, haven't you? Aren't you";
	mes "surprised to see me?";
	next;
	menu "I've never heard of you",-,"Oh gosh, it's Jesqurienne!",L_ohgosh;
	mes "[Jesqurienne]";
	mes "Ho ho ho~!";
	mes "Surely you";
	mes "must be joking~";
	emotion 4;
	next;
	menu "You got me, you got me.",L_ohgosh,"Nope, doesn't ring a bell",-;

	emotion 9;
	mes "[Jesqurienne]";
	mes "...";
	mes "......";
	mes "Now I undersand.";
	mes "You've been living";
	mes "under a rock for all";
	mes "this time, haven't you?";
	next;
	mes "[Jesqurienne]";
	mes "But I guess someone";
	mes "as simple minded as you";
	mes "wouldn't recognize a famous,";
	mes "brilliant genius once you";
	mes "saw her, wouldn't you?";

L_ohgosh:
	next;
	mes "[Jesqurienne]";
	mes "Anyway, I'm so proud";
	mes "of my supreme intelligence!";
	mes "I may be somewhat obsessive";
	mes "about studying, but that's just";
	mes "another reason to admire me~";
	next;
	mes "[Jesqurienne]";
	mes "The Wizard and Sage";
	mes "exams? No problem~";
	mes "Even the Alchemist test";
	mes "was fairly simple. So far";
	mes "I haven't met anyone";
	mes "smarter than me~";
	next;
	menu "Stuck-up chick.",L_stuckup,"Take it easy on the drinks...",-;

	mes "[Jesqurienne]";
	mes "Ho ho ho~";
	mes "Plenty of people have";
	mes "told me not to drink so";
	mes "much. But once I start";
	mes "I can't stop. I love to";
	mes "drink that much!";
	next;
	mes "[Jesqurienne]";
	mes "And...";
	mes "Sometimes I'd rather";
	mes "look at the world through";
	mes "these haze eyes. See things";
	mes "the way I want to see them...";
	close;

L_stuckup:
	mes "[Jesqurienne]";
	mes "What...?";
	mes "What did you say?";
	mes "No one has ever";
	mes "said anything like";
	mes "that to me before!";
	mes "H-how dare you...";
	next;
	mes "[Jesqurienne]";
	mes "Prove that you can";
	mes "hold a candle to my";
	mes "superior intellect and";
	mes "I'll be willing to accept";
	mes "your insult! It's time";
	mes "for a Quiz Challenge!";
	emotion 7;
	next;
	mes "["+strcharinfo(0)+"]";
	mes "Quiz... Challenge?";
	mes "Like a trivia game?";
	mes "But who's going to";
	mes "ask us the questions?";
	next;
	mes "[Aaron]";
	mes "Did someone say";
	mes "\"Quiz Challenge?\"";
	mes "I believe I can be";
	mes "of assistance.";
	emotion 0;
	donpcevent "Aaron2::OnHeh";
	emotion 0,1;
	next;
	mes "[Jesqurienne]";
	mes "Professor Aaron?";
	mes "Ho ho~ If he's asking";
	mes "the questions, it looks";
	mes "like your chances of";
	mes "beating me are zero!";
	emotion 29;
	next;
	mes "[Jesqurienne]";
	mes "It amuses me that";
	mes "you think that you'd";
	mes "stand a chance against";
	mes "me in a Quiz Challenge.";
	mes "Ho ho ho ho ho~!";
	next;
	mes "[Jesqurienne]";
	mes "Professor Aaron";
	mes "is waiting for you";
	mes "to ask him to begin.";
	mes "And I'm waiting for the";
	mes "moment when you realize";
	mes "you have no hope of winning!";
	set @signquiz,1;
	close;

L_won:
	mes "Ooooh...";
	mes "My head...";
	mes "Oh...! It's you...!";
	mes "So did you find Dearles?";
	next;
	mes "[Jesqurienne]";
	mes "Hmm...";
	mes "He's addicted to";
	mes "gambling, so maybe you";
	mes "can find him some place";
	mes "where you can do that...";
	close;
}

// ---------------------------------------------------------

geffen_in,60,70,6	script	Aaron::Aaron2	754,{

    if (signquest == 10) goto L_done;
    if (@signquiz == 1) goto L_startquiz;
    if (@signquiz == 2) goto L_quiztime;
    emotion 23;
    mes "[Aaron]";
    mes "Goodness...!";
    mes "Either these beer";
    mes "goggles are on too tight,";
    mes "or you're the most gorgeous";
    mes "woman I've ever seen in my life!";
    next;
    if (!Sex) goto L_female;
    menu "Um, I'm a dude...",-;
    mes "[Aaron]";
    mes "N-no...!";
    mes "M-maybe I should";
    mes "take it easy on the";
    mes "alcohol. I do have classes";
    mes "to teach tomorrow anyway...";
    emotion 28;
    close;

L_female:
    menu "Why, thank you~",-;
    mes "[Aaron]";
    mes "Ah, yes. Your";
    mes "sense of style, your";
    mes "magnificent body. Everything";
    mes "about you is beautiful! Not just";
    mes "that, but you're also intelligent!";
    next;
    mes "[Aaron]";
    mes "I should know!";
    mes "Not only do I teach";
    mes "classes, but I'm also";
    mes "a Quiz Challenge moderator";
    mes "master in my spare time~";
    mes "You're truly a jewel...";
    emotion e_lv;
    close;

L_startquiz:
    mes "[Aaron]";
    mes "Alright, before";
    mes "we begin, let me";
    mes "tell you the rules...";
    next;
    mes "[Aaron]";
    mes "I'm going to give you";
    mes "ten multiple choice questions.";
    mes "Since this is an impromptu";
    mes "exhibition bout, I'm going to";
    mes "use questions that I use";
    mes "in teaching my class.";
    emotion 19;
    next;
    mes "[Aaron]";
    mes "Alright...";
    mes "I'm almost finished";
    mes "compiling the questions.";
    mes "We're ready to go when";
    mes "you're ready to begin!";
    set @signquiz,2;
    close;

L_quiztime:
	//NOTE:
	// Officially, there are 10 sets of 2-3 possible questions each.
	// One of the dialogues actually refers to the contents of one of them.
	// Therefore the 'random' approach below is just an approximation.

	set .@playerpoints,0;
	set .@jesqpoints,0;
	
	// array holding the numbers of questions that haven't been asked yet
	setarray .@signarray[1],1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26;
	set .@size, 26;
	
	// 10 questions
	for( set .@i,1; .@i <= 10; set .@i,.@i+1 )
	{
		// choose which question to ask next
		set .@qpos, rand(1,.@size);
		set .@qid, .@signarray[.@qpos];
		
		// remove the question from the array (reducing its size)
		set .@signarray[.@qpos], .@signarray[.@size];
		set .@signarray[.@size], 0;
		set .@size, .@size - 1;
		
		// initialize data for this round
		switch( .@qid )
		{
			case 1:
				set .@question$, "Choose the monster that is a different size than the others.";
				set .@answers$, "Giant Whisper:Marin:Cornutus:Kobold Archer";
				set .@answer, 2;
			break;
			case 2:
				set .@question$, "What is the Bunny Band's DEF and its added ability?";
				set .@answers$, "1 / LUK + 2:1 / LUK + 5:2 / LUK + 2:2 / LUK + 5";
				set .@answer, 3;
			break;
			case 3:
				set .@question$, "Choose the correct name of the ruler of the Rune-Midgard Kingdom.";
				set .@answers$, "Tristan III:Tristram III:Tristar III:Trust III";
				set .@answer, 1;
			break;
			case 4:
				set .@question$, "Choose the monster which does not drop the 'Yggdrasil Leaf' item.";
				set .@answers$, "Marduk:Baphomet Jr.:Angeling:Wanderer";
				set .@answer, 1;
			break;
			case 5:
				set .@question$, "What is the city closest to Turtle Island?";
				set .@answers$, "Al De Baran:Alberta:Comodo:Izlude";
				set .@answer, 2;
			break;
			case 6:
				set .@question$, "Fifty-one multiplied by fifteen, divided by three, plus five is equal to...?";
				set .@answers$, "250:255:260:265";
				set .@answer, 3;
			break;
			case 7:
				set .@question$, "Choose the Hunter's Trap skill which does not inflict Property Damage.";
				set .@answers$, "Claymore Trap:Freezing Trap:Shockwave Trap:Land Mine";
				set .@answer, 3;
			break;
			case 8:
				set .@question$, "Choose the monster on which the mage skill,\"Stone Curse\", is ineffective.";
				set .@answers$, "Elder Willow:Evil Druid:Magnolia:Marc";
				set .@answer, 2;
			break;
			case 9:
				set .@question$, "Choose the item that cannot be equipped by Novice class characters.";
				set .@answers$, "Funeral Hat:Shackles:Wooden Mail:Pantie";
				set .@answer, 3;
			break;
			case 10:
				set .@question$, "Which NPC is not relevant to the Blacksmith Job Quest?";
				set .@answers$, "Baisulitst:Wickebine:Barcardi:Krongast";
				set .@answer, 3;
			break;
			case 11:
				set .@question$, "Choose the Property that is unrelated to the Mage's Bolt type skills.";
				set .@answers$, "Water:Earth:Fire:Wind";
				set .@answer, 2;
			break;
			case 12:
				set .@question$, "Choose the correct DEF for the Indian Filet item.";
				set .@answers$, "0:1:2:3";
				set .@answer, 4;
			break;
			case 13:
				set .@question$, "Which item is not relevant to the creation of a counteragent?";
				set .@answers$, "Karvodailnirol:Detrimindexta:Alcohol";
				set .@answer, 1;
			break;
			case 14:
				set .@question$, "Choose the level requirement for entering the PvP room.";
				set .@answers$, "30:31:32:33";
				set .@answer, 2;
			break;
			case 15:
				set .@question$, "Three thousand one hundred two added to five hundred, plus four, divided by 6 equals...";
				set .@answers$, "600:601:602";
				set .@answer, 2;
			break;
			case 16:
				set .@question$, "Choose the building that is the closest to the Item Upgrade Place in Yuno.";
				set .@answers$, "Tavern:Monster Library:Tool Shop:Weapon Shop";
				set .@answer, 4;
			break;
			case 17:
				set .@question$, "What is the correct weight for 1 Empty Bottle?";
				set .@answers$, "1:2:3";
				set .@answer, 2;
			break;
			case 18:
				set .@question$, "Choose the NPC that looks different than all others.";
				set .@answers$, "Prontera Hollengrhen:Prontera Doll Merchant:Izlude Meat Merchant:Morroc Tool Dealer";
				set .@answer, 3;
			break;
			case 19:
				set .@question$, "Choose the material that is not related to the creation of a Condensed White Potion.";
				set .@answers$, "Medicine Bowl:Witch Starsand:Empty Bottle:Empty Potion Bottle";
				set .@answer, 3;
			break;
			case 20:
				set .@question$, "Choose the monster that is a different type than the others.";
				set .@answers$, "Penomena:Hatii:Pest:Explosion";
				set .@answer, 1;
			break;
			case 21:
				set .@question$, "Choose the Job class that cannot equip Silk Robe.";
				set .@answers$, "Swordman:Merchant:Hunter:Mage";
				set .@answer, 3;
			break;
			case 22:
				set .@question$, "Four thousand five hundred sixty divided by four, divided by two, plus three is equal to...";
				set .@answers$, "573:574:575:576";
				set .@answer, 1;
			break;
			case 23:
				set .@question$, "Which monster would receive the most damage from a Fire Property Dagger?";
				set .@answers$, "Dagger Goblin:Mace Goblin:Morningstar Goblin:Hammer Goblin";
				set .@answer, 4;
			break;
			case 24:
				set .@question$, "Choose the skill related to the Priest's B.S. Sacramenti from the ones displayed in the list.";
				set .@answers$, "Lex Divina:Gloria:Recovery:Sanctuary";
				set .@answer, 2;
			break;
			case 25:
				set .@question$, "Choose the item that is necessary for a Blacksmith to create a Gladius.";
				set .@answers$, "Sapphire:Zircon:Topaz:Cursed Ruby";
				set .@answer, 1;
			break;
			case 26:
				set .@question$, "Choose the prefix or suffix that is incorrectly matched with his Monster Card name.";
				set .@answers$, "Hornet Card - Martyr:Requiem - Chaos:Wormtail - Clever:Golem - Immortal";
				set .@answer, 4;
			break;
		}
		
		mes "[Aaron]";
		mes .@i + ". " + .@question$;
		next;
		if( select(.@answers$) == .@answer )
			set .@playerpoints, .@playerpoints + 1;
		
		// Jesqurienne answers correctly 80% of the time
		mes "[Jesqurienne]";
		if( rand(1,10) < 9 )
		{
			set .@jesqpoints, .@jesqpoints + 1;
			emotion e_oh;
			switch( .@i )
			{
				case 1:
					mes "Heh heh...";
					mes "The first question";
					mes "is always too easy.";
				break;
				case 2:
					mes "Ho ho ho ho~!";
					mes "I know the answer.";
					mes "Any fool should know";
					mes "this. But do you?";
				break;
				case 3:
					mes "Ah...";
					mes "That's another";
					mes "point for me!";
				break;
				case 4:
					mes "That counts as";
					mes "a question? You're";
					mes "being too easy!";
				break;
				case 5:
					mes "I didn't have";
					mes "to think very hard";
					mes "to know the answer.";
					mes "Are you still thinking?";
					mes "I wouldn't think you'd know!";
				break;
				case 6:
					mes "^333333*Sigh...*^000000";
					mes "Simple questions,";
					mes "simple answers.";
					mes "Did you get it?";
				break;
				case 7:
					//NOTE: this one is custom
					mes "Ah...";
					mes "That's another";
					mes "point for me!";
				break;
				case 8:
					mes "Hah hah~!";
					mes "That was a";
					mes "piece of cake!";
				break;
				case 9:
					mes "Ahhh...";
					mes "I'm just breezing";
					mes "through this Quiz Challenge!";
					mes "Aren't you having a hard time?";
				break;
				case 10:
					mes "As usual, I got";
					mes "the last question";
					mes "absolutely right~";
				break;
			}
		}
		else
		{
			emotion e_wah;
			switch( .@i )
			{
				case 1:
					mes "Huh...?";
					mes "How can I not know";
					mes "the answer to this?!";
				break;
				case 2:
					mes "Oh...";
					mes "I knew the answer";
					mes "to this just yesterday!";
					mes "Why can't I think of it now?!";
				break;
				case 3:
					mes "z...z...Z";
					mes "W-what? Oh!";
					mes "Well, I won't need";
					mes "that point anyway...";
				break;
				case 4:
					mes "I know the";
					mes "answer! W-why";
					mes "can't I think of";
					mes "it right now?!";
				break;
				case 5:
					mes "I...";
					mes "Hold on,";
					mes "I know this one...";
					mes "(Oh craaaaaap!)";
				break;
				case 6:
					mes "W-wait...!";
					mes "I know the";
					mes "answer to this";
					mes "one! Just let me";
					mes "th-think...!";
				break;
				case 7:
					//NOTE: this one is custom
					mes "z...z...Z";
					mes "W-what? Oh!";
					mes "Well, I won't need";
					mes "that point anyway...";
				break;
				case 8:
					mes "Grrr...";
					mes "Why don't";
					mes "I know this one?!";
				break;
				case 9:
					mes "Huh...?";
					mes "I don't understand";
					mes "why I don't know this...";
				break;
				case 10:
					mes "Huh...";
					mes "Wh-what was";
					mes "the question again?";
					mes "Nooo, I missed it!";
				break;
			}
		}
		next;
		
		// starting from after the 3rd round, Jesqurienne will keep informing you about the current status
		if( .@i == 3 )
		{
			mes "[Jesqurienne]";
			mes "Let's check our";
			mes "scores, shall we?";
			mes ".................";
			next;
			mes "[Jesqurienne]";
			if( .@playerpoints < .@jesqpoints ) {
				mes "Heh heh...";
				mes "It looks like";
				mes "I'm beating you!";
				mes "But you shouldn't";
				mes "be suprised...";
			} else
			if( .@playerpoints == .@jesqpoints ) {
				mes "Still, you're";
				mes "smarter than";
				mes "I thought you'd be...";
			} else
			{ //if( .@playerpoints > .@jesqpoints ) {
				mes "W-wait a minute!";
				mes "H-how could you";
				mes "have more points";
				mes "than me?! I better";
				mes "get serious!";
			}
			next;
			mes "[Aaron]";
			mes "*Ahem!*";
			mes "Question";
			mes "number four!";
			next;
		} else
		if( .@i == 4 || .@i == 5 || .@i == 6 || .@i == 7 || .@i == 8 )
		{
			//NOTE: rounds 5-8 should actually have their own dialogue!
			mes "[Jesqurienne]";
			if( .@playerpoints < .@jesqpoints ) {
				mes "Heh heh~ It looks";
				mes "like I have the lead.";
				mes "But that's only natural for";
				mes "someone as brilliant as me~";
			} else
			if( .@playerpoints == .@jesqpoints ) {
				mes "Up till now";
				mes "you've managed";
				mes "to keep up with";
				mes "me. Huh. So you're";
				mes "not a total idiot...";
			} else
			{ //if( .@playerpoints > .@jesqpoints ) {
				mes "Heh heh~ It looks";
				mes "like I have the lead.";
				mes "But that's only natural for";
				mes "someone as brilliant a--";
				mes "Wait. How do you have";
				mes "more points than me?!";
			}
			next;
		} else
		if( .@i == 9 )
		{
			mes "[Jesqurienne]";
			if( .@playerpoints < .@jesqpoints ) {
				mes "Bwahahaha!";
				mes "Only one question";
				mes "left! You have to get";
				mes "this one right or I'll";
				mes "call you stupid forever!";
			} else
			if( .@playerpoints == .@jesqpoints ) {
				mes "We're tied?!";
				mes "Oh no... I better";
				mes "get this last question";
				mes "right. (And I hope that";
				mes "you get it wrong!)";
			} else
			{ //if( .@playerpoints > .@jesqpoints ) {
				mes "I'm losing?!";
				mes "And we're at the";
				mes "last question already?!";
			}
			next;
		}
	}
	
	mes "[Aaron]";
	mes "Okay, the quiz";
	mes "is over! Now, I'll";
	mes "reveal the results";
	mes "of the competitors...";
	next;
	mes "[Aaron]";
	mes "Umm...";
	mes ""+strcharinfo(0)+":";
	mes .@playerpoints + " points!";
	next;
	mes "[Aaron]";
	mes "Jesqurienne...";
	mes .@jesqpoints + " points!";
	next;
	mes "[Jesqurienne]";
	if( .@playerpoints < .@jesqpoints ) {
		mes "Bwahahaha!";
		mes "I win! I knew it!";
		mes "Ho ho ho ho ho ho~";
		set @takenquiz,1;
	} else
	if( .@playerpoints == .@jesqpoints ) {
		mes "Tied?!";
		mes "Alright, I'm impressed.";
		mes "I'll admit, you're much";
		mes "smarter than I thought...";
		set @takenquiz,2;
	} else
	{ // if( .@playerpoints > .@jesqpoints ) {
		mes "No...!";
		mes "I can't...";
		mes "Believe this...";
		set @takenquiz,2;
	}
	next;
    
    mes "[Aaron]";
    mes "Thank you";
    mes "for playing!";
    mes ".......................";
    mes "............................";
    mes "Alright, back to drinking!";
    next;
    if (@takenquiz == 2) {
        mes "[Jesqurienne]";
        mes "I lost...";
        mes "M-maybe you were right.";
        mes "I am arrogant after all...";
        mes "I should stop drinking so";
        mes "much. Travel around and";
        mes "broaden my knowledge...";
        next;
        mes "[Jesqurienne]";
        mes "You're the only";
        mes "one who has been";
        mes "able to beat me in";
        mes "a battle of minds.";
        mes "W-who are you...?";
        next;
        input @quizname$;
        mes "[Jesqurienne]";
        mes ""+@quizname$+"...";
        mes "I'll remember that.";
        next;
        mes "[Jesqurienne]";
        mes "Here...";
        mes "My old friend, Metz, told";
        mes "me to give this to someone";
        mes "who is worthy. I was going";
        mes "to keep it, but I suppose";
        mes "you're its true owner...";
        getitem 7177,1;
        set signquest,10;
        next;
        mes "[Jesqurienne]";
        mes "If you want to know more about the";
        mes "Sobbing Starlight, find a man named";
        mes "^0000FFDearles^000000. It may be hard to find him";
        mes "since he wanders from place to";
        mes "place, but it might help to know";
        mes "that he loves gambling...";
        next;
        mes "[Jesqurienne]";
        mes "Good luck finding";
        mes "Dearles. I'm taking";
        mes "this loss pretty badly,";
        mes "so I think I'll stay here";
        mes "and have another drink.";
        mes "Farewell, " + @quizname$ + ".";
        close;
    }

    if (@takenquiz == 1) {
        mes "[Jesqurienne]";
        mes "Bwahahahaha!";
        mes "You should have known";
        mes "from the beginning that you";
        mes "never had a chance! Of course,";
        mes "I did, but you know, I guess you";
        mes "had to learn for yourself.";
        next;
        mes "[Jesqurienne]";
        mes "I'd insult you if it weren't for";
        mes "the fact that you embarassed";
        mes "yourself enough during the Quiz";
        mes "Challenge. As a matter of fact,";
        mes "I'll even forgive you for wounding";
        mes "my pride earlier.";
        next;
        mes "[Jesqurienne]";
        mes "Can you believe it?";
        mes "Even drunk I can beat";
        mes "you in a test of intelligence!";
        mes "Bwahaha! I can't believe how";
        mes "simple minded you are...!";
        emotion e_gg;
        next;
        menu "I can't let you win!",L_challenge,"Darn it...",-;
        mes "[Jesqurienne]";
        mes "Just now you realize";
        mes "how pitiful your intellect";
        mes "is compared to mine? Ho ho ho!";
        mes "There's hope for every fool!";
        close;
    }

L_challenge:
    mes "[Jesqurienne]";
    mes "You're a slow learner,";
    mes "aren't you? Well, I welcome";
    mes "your 'Challenge' anytime!";
    mes "Bwah hah hah hah hah~!";
    close;

L_done:
    mes "[Aaron]";
    mes "Thank you";
    mes "for playing!";
    mes ".......................";
    mes "............................";
    mes "Alright, back to drinking!";
    close;

OnHeh:
    emotion 18;

}

cmd_in02,88,51,3	script	Strange Man	806,{

    if (signquest == 12) goto L_Ever;
    if (signquest == 11) goto L_Test;
    mes "[Dearles]";
    mes "No...! Damn it,";
    mes "not again! When's";
    mes "my lucky streak";
    mes "gonna start?";

    if (signquest == 10) {
        next;
        if (@pay_dearles == 1) goto L_Pay;

        menu "Excuse me...",L_Excuse,"Just pass by.",-;
        mes "[Dearles]";
        mes "Crap...!";
        mes "I'm almost broke!";
        mes "But i gotta win";
        mes "all my cash back! How can";
        mes "I raise more money fast";
        mes "without actually working...";
        close;

L_Excuse:
        mes "[Dearles]";
        mes "What is it?!";
        mes "I'm not in the mood";
        mes "for chatting with complete";
        mes "and total strangers, so";
        mes "get to the point~!";
        next;
        menu "Oh nothing...",-,"I'm here for Metz...?",L_Metz;
        mes "[Dearles]";
        mes "Wha...? You bother";
        mes "me and make me lose this";
        mes "game for nothing? For that,";
        mes "I'll freakin' beat you to near";
        mes "freakin' death! Bam bam bam!";
        close2;
        set Hp,1;
        warp "comodo",122,100;
        end;

L_Metz:
        mes "[Dearles]";
        mes "Oh. You're here for";
        mes "the Sobbing Starlight, huh? If you";
        mes "wanna take my test, there's *ahem*";
        mes "a fee of 30.000 zeny. So take it or";
        mes "leave it, capish?";
        next;
        mes "[Dearles]";
        mes "I'll have nothing";
        mes "to do with you if you";
        mes "can't pay up. Just think";
        mes "of the fee as a preliminary";
        mes "for my test. You know, to";
        mes "weed out the riffraff.";
        set @pay_dearles,1;
        close;

L_Pay:
        mes "[Dearles]";
        mes "Eh heh heh~";
        mes "Soooooo, did you";
        mes "bring the money?";
        next;
        menu "Here you are...",L_Fee,"Not yet...",-;
        mes "[Dearles]";
        mes "Huh?";
        mes "Alright but you";
        mes "better hurry. I can";
        mes "change my mind at";
        mes "any time, you know!";
        close;

L_Fee:
        if (Zeny < 30000) goto L_NotEnough;
        set Zeny, Zeny - 30000;
        mes "[Dearles]";
        mes "Ummm.......";
        mes "Heh heh~";
        mes "That's thirty grand,";
        mes "alright! Okay, come back";
        mes "to me at night and";
        mes "we'll start your test...";
        set signquest,11;
        close;
    } else {
        close;

    }

L_NotEnough:
    mes "[Dearles]";
    mes "Don't fool me!";
    mes "You don't have";
    mes "enough money to";
    mes "pay the test fee.";
    mes "Come back with 30.000 zeny.";
    close;

L_Test:
    if (gettime(3) == 19 || gettime(3) == 20 || gettime(3) == 21 || gettime(3) == 22 || gettime(3) == 23) goto L_Time;
    mes "[Dearles]";
    mes "Don't you see";
    mes "I'm busy right now?";
    mes "Come back at night";
    mes "And we'll see for";
    mes "your test.";
    close;

L_Time:
    if (SignDance == 3) goto L_Win;
    if (SignDance == 2) goto L_Fail;
    if (dearles_test == 2) goto L_Check;
    if (dearles_test == 3) goto L_Dance;
    if (dearles_test == 1) goto L_Test2;
    mes "[Dearles]";
    mes "Nice, you're here";
    mes "just in time. Well,";
    mes "all that matters is that";
    mes "you come during the night.";
    next;
    mes "[Dearles]";
    mes "You're wondering how";
    mes "a guy like me is pals with";
    mes "Metz, but that's none of your";
    mes "business. I guess I gotta keep";
    mes "this promise to him, so when";
    mes "you're ready, say the word.";
    set dearles_test,1;
    close;

L_Test2:
    mes "[Dearles]";
    mes "Alright! I want you to";
    mes "bring me a bunch of items!";
    mes "Yeah, I know, you're a real";
    mes "pro at this, but let me set";
    mes "you straight before you blow";
    mes "this off as a piece of cake...";
    next;
    mes "[Dearles]";
    mes "I'm not gonna give you an";
    mes "exact list of items I want. Oh";
    mes "no, what you gotta do is bring";
    mes "me artsy crafts. This test is";
    mes "gonna judge your appreciation";
    mes "of... Craftsmanship~";
    next;
    mes "[Dearles]";
    mes "Since I'm seeing whether";
    mes "or not you got good taste,";
    mes "variety is the important thing";
    mes "here. So don't bring freakin'";
    mes "a hundred of the same object.";
    mes "Just one of each kind'll do.";
    next;
    mes "[Dearles]";
    mes "What are you";
    mes "standin' around";
    mes "waiting for? Bring";
    mes "those collection items!";
    set dearles_test,2;
    close;

L_Check:
    mes "[Dearles]";
    mes "Ah! So this is";
    mes "the stuff you brought?";
    mes "Let me take a look-see...";
    next;
    if (countitem(740))set @dearles_check,@dearles_check+1;
    if (countitem(741))set @dearles_check,@dearles_check+1;
    if (countitem(742))set @dearles_check,@dearles_check+1;
    if (countitem(743))set @dearles_check,@dearles_check+2;
    // Was checking the wrong items here [Llyr]
    // Script was checking for:
    // Bouquet (ID: 744) instead of Red Frame (ID: 734)
    // Wedding Bouquet (ID: 745) instead of Chung Jah (ID: 735)
    // Glass Bead (ID: 746) instead of China (ID: 736)
    if (countitem(734))set @dearles_check,@dearles_check+1;
    if (countitem(735))set @dearles_check,@dearles_check+1;
    if (countitem(736))set @dearles_check,@dearles_check+1;
    if (countitem(747))set @dearles_check,@dearles_check+2;
    if (countitem(750))set @dearles_check,@dearles_check+10;
    if (countitem(751))set @dearles_check,@dearles_check+12;
    if (countitem(752))set @dearles_check,@dearles_check+3;
    if (countitem(753))set @dearles_check,@dearles_check+5;
    if (countitem(754))set @dearles_check,@dearles_check+5;

    if (@dearles_check >= 20) {
        if (countitem(741))delitem 741,countitem(741);
        if (countitem(740))delitem 740,countitem(740);
        if (countitem(742))delitem 742,countitem(742);
        if (countitem(743))delitem 743,countitem(743);
        if (countitem(734))delitem 734,countitem(734);
        if (countitem(735))delitem 735,countitem(735);
        if (countitem(736))delitem 736,countitem(736);
        if (countitem(747))delitem 747,countitem(747);
        if (countitem(750))delitem 750,countitem(750);
        if (countitem(751))delitem 751,countitem(751);
        if (countitem(752))delitem 752,countitem(752);
        if (countitem(753))delitem 753,countitem(753);
        if (countitem(754))delitem 754,countitem(754);
        mes "[Dearles]";
        mes "Nice, nice~";
        mes "These'll sell for--";
        mes "Er, I'm glad to say";
        mes "that you pass for now.";
        next;
        mes "[Dearles]";
        mes "I think you're ready";
        mes "for the next step. Now,";
        mes "I'm gonna send you to";
        mes "Lamadin for Part Two";
        mes "of my test. Yeah, I know...";
        set dearles_test,3;
        close2;
        warp "cmd_in01",34,17;
        end;
    } else {
        set @dearles_check,0;
        mes "[Dearles]";
        mes "Hmm... Some of this";
        mes "stuff looks good, but";
        mes "there isn't enough variety";
        mes "here that proves your eye for";
        mes "craftsmanship. Come back";
        mes "with more stuff, alright?";
        close;
    }


L_Dance:
    mes "[Dearles]";
    mes "Hey, you gotta";
    mes "finish the Part Two of";
    mes "my test. I'm gonna send";
    mes "you to Lamadin now...";
    close2;
    warp "cmd_in01",34,17;
    end;

L_Fail:
    mes "[Dearles]";
    mes "You failed Part Two,";
    mes "the rhythm portion of";
    mes "my freakin' test? If you";
    mes "wanna try again, you're";
    mes "welcome to another chance...";
    next;
    menu "Yes.",L_Another,"Maybe later.",-;
    mes "[Dearles]";
    mes "What...?";
    mes "Alright, but you";
    mes "really shouldn't give";
    mes "up. I mean, Part Two is";
    mes "supposed to be ridiculously";
    mes "easy. I made it that way.";
    close;

L_Another:
    mes "[Dearles]";
    mes "Okay...";
    mes "Just keep in mind";
    mes "that Part Two was";
    mes "supposed to be";
    mes "the easy part...";
    close2;
    warp "cmd_in01",34,17;
    end;

L_Win:
    mes "[Dearles]";
    mes "Lamadin tells me";
    mes "you passed. Since you";
    mes "did so good, I'm gonna";
    mes "give you some of your money";
    mes "back. Not all, but most of it.";
    mes "Isn't that reward enough?";
    next;
    set Zeny, Zeny + 20000;
    getitem 7177,1;
    set signquest,12;
    set $dance_fail,0;
    mes "[Dearles]";
    mes "Alright, take this chunk";
    mes "of Sobbing Starlight and";
    mes "go find someone named";
    mes "um, 'Bakerlan' in Alberta.";
    next;

L_Ever:
    mes "[Dearles]";
    mes "Well, that's it.";
    mes "There's no reason";
    mes "for you to ever see";
    mes "me again. But yeah,";
    mes "good luck with that";
    mes "Sobbing Starlight business.";
    close;
}


cmd_in01,32,25,3	script	Lamadin	724,{

    if (SignDance == 1)goto L_Win;
    if (SignDance == 2)goto L_Another;
    mes "[Lamadin]";
    mes "Welcome to";
    mes "Part Two of Dearles'";
    mes "exam where your sense";
    mes "of rhythm will be tested~";
    next;
    mes "[Lamadin]";
    mes "Please click on the";
    mes "Chat Room to enter the";
    mes "Standby Room. When it's";
    mes "your turn, the test will begin!";
    next;
    mes "[Lamadin]";
    mes "The top left pole";
    mes "means 'Up' and there are";
    mes "a total of four marks";
    mes "designated as Upper, Lower,";
    mes "Left and Right. Hitting each";
    mes "mark will produce a sound.";
    next;
    mes "[Lamadin]";
    mes "During the test,";
    mes "you must hit the marks";
    mes "according to the given";
    mes "instructions in order to";
    mes "play music. Nifty, huh?";
    next;
    mes "[Lamadin]";
    mes "I'm in charge of grading";
    mes "your performance and determinating";
    mes "your qualification. Please do your";
    mes "best and come back to me when";
    mes "you finish the test. Good luck~";
    mes "Please do your best.";
    close;

L_Another:
    mes "[Lamadin]";
    mes "Let's see...";
    mes "You're "+strcharinfo(0)+"?";
    mes "Oh, what a shame!";
    mes "You failed this time.";
    mes "But don't worry...";
    next;
    mes "[Lamadin]";
    mes "You're welcome to";
    mes "try again whenever";
    mes "you want, alright?";
    mes "Thank you~";
    close;

L_Win:
    mes "[Lamadin]";
    mes "Let's see...";
    mes "You're "+strcharinfo(0)+"?";
    mes "Congratulations!";
    mes "You got a perfect";
    mes "score on this test!";
    next;
    mes "[Dearles]";
    mes "I'll send a message to";
    mes "Mister Dearles right away,";
    mes "so please go speak to him";
    mes "again. He may even give";
    mes "you a reward since you";
    mes "did such a great job~";
    set SignDance,3;
    close;

}

cmd_in01,33,33,3	script	Waiting Room#SignDance	66,{
	end;

OnWarp:
	warpwaitingpc "cmd_in01",16,16,1;
	disablewaitingroomevent;
	disablenpc "SignDance#WARPER";
	enablenpc "SignDance#CENTER";
	end;
OnInit:
	waitingroom "DANCE~ DANCE~",20,"Waiting Room#SignDance::OnWarp",1;
	end;
}

cmd_in01,1,1,1	script	DanceInit	139,{

OnInitiation:
    initnpctimer;
    end;
OnTimer1000:
    if (!isloggedin($SignDancingrid))goto s_Cleanup;
    areaannounce "cmd_in01",12,12,35,35,"The test will begin shortly. Please do your best~",8;
    end;
OnTimer4000:
    if (!isloggedin($SignDancingrid))goto s_Cleanup;
    set $signdance,1;
    areaannounce "cmd_in01",12,12,35,35,"UP LEFT",8;
    end;
OnTimer7000:
    if (!isloggedin($SignDancingrid))goto s_Cleanup;
    if ($signdance != 2) set $Signdanceresult,1;
    set $signdance,3;
    areaannounce "cmd_in01",12,12,35,35,"DOWN RIGHT",8;
    end;
OnTimer10000:
    if (!isloggedin($SignDancingrid))goto s_Cleanup;
    if ($signdance != 4) set $Signdanceresult,1;
    set $signdance,5;
    areaannounce "cmd_in01",12,12,35,35,"DOWN LEFT & UP RIGHT",8;
    end;
OnTimer13000:
    if (!isloggedin($SignDancingrid))goto s_Cleanup;
    if ($signdance != 7) set $Signdanceresult,1;
    set $signdance,8;
    areaannounce "cmd_in01",12,12,35,35,"DOWN RIGHT",8;
    end;
OnTimer15000:
    if (!isloggedin($SignDancingrid))goto s_Cleanup;
    if ($signdance != 9) set $Signdanceresult,1;
    set $signdance,10;
    areaannounce "cmd_in01",12,12,35,35,"DOWN LEFT & UP RIGHT & UP LEFT & STAY CENTER",8;
    end;
OnTimer20000:
    if (!isloggedin($SignDancingrid))goto s_Cleanup;
    if ($signdance != 14) set $Signdanceresult,1;
    set $signdance,15;
    areaannounce "cmd_in01",12,12,35,35,"DOWN LEFT & DOWN RIGHT & DOWN LEFT",8;
    end;
OnTimer24000:
    if (!isloggedin($SignDancingrid))goto s_Cleanup;
    if ($signdance != 18) set $Signdanceresult,1;
    set $signdance,19;
    areaannounce "cmd_in01",12,12,35,35,"DOWN RIGHT & CENTER & DOWN RIGHT",8;
    end;
OnTimer28000:
    if (!isloggedin($SignDancingrid))goto s_Cleanup;
    if ($signdance != 22) set $Signdanceresult,1;
    set $signdance,23;
    areaannounce "cmd_in01",12,12,35,35,"DOWN LEFT & UP LEFT & UP RIGHT & DOWN RIGHT & CENTER",8;
    end;
OnTimer33000:
    if (!isloggedin($SignDancingrid))goto s_Cleanup;
    if ($signdance != 28) set $Signdanceresult,1;
    set $signdance,29;
    areaannounce "cmd_in01",12,12,35,35,"DOWN LEFT & UP RIGHT & UP LEFT & DOWN RIGHT",8;
    end;
OnTimer40000:
    if (!isloggedin($SignDancingrid))goto s_Cleanup;
    if ($signdance != 33) set $Signdanceresult,1;
    set $signdance,34;
    areaannounce "cmd_in01",12,12,35,35,"UP RIGHT & DOWN RIGHT & UP RIGHT & DOWN RIGHT",8;
    end;
OnTimer44000:
    if (!isloggedin($SignDancingrid))goto s_Cleanup;
    if ($signdance != 38) set $Signdanceresult,1;
    set $signdance,39;
    set $SignDanceRandomizer,rand(0,1);
    if (!$SignDanceRandomizer)
        areaannounce "cmd_in01",12,12,35,35,"UP LEFT & UP RIGHT & CENTER & UP RIGHT & DOWN LEFT & DOWN RIGHT",8;
    else
        areaannounce "cmd_in01",12,12,35,35,"UP LEFT & UP RIGHT & DOWN LEFT & UP RIGHT & DOWN LEFT & DOWN RIGHT",8;
    end;
OnTimer51500:
    if (!isloggedin($SignDancingrid))goto s_Cleanup;
    if ($signdance != 45)set $Signdanceresult,1;
    areaannounce "cmd_in01",12,12,35,35,"Well done.",8;
    end;
OnTimer54500:
    if (!isloggedin($SignDancingrid))goto s_Cleanup;
    attachrid($SignDancingrid);
    if ($Signdanceresult)set SignDance,2;
    else set SignDance,1;
    warp "cmd_in01",34,17;
    detachrid;
    enablenpc "SignDance#WARPER";
    disablenpc "SignDance#CENTER";
    set $signdance,0;
    set $Signdanceresult,0;
    set $SignDancingrid,0;
    set $SignDanceRandomizer,0;
    enablewaitingroomevent "Waiting Room#SignDance";
    stopnpctimer;
    end;

s_Cleanup:
    donpcevent "SignDanceCleanUp::OnPlayerLogout";
    stopnpctimer;
    end;
}

cmd_in01,1,1,1	script	SignDanceCleanUp	-1,{

OnPlayerLogout:
	initnpctimer;
	areaannounce "cmd_in01",12,12,35,35,"The current dancer has logged out. New dancers will be accepted shortly.",8;
	enablenpc "SignDance#WARPER";
	disablenpc "SignDance#CENTER";
	set $signdance,0;
	set $Signdanceresult,0;
	set $SignDancingrid,0;
	set $SignDanceRandomizer,0;

OnTimer3000:
	enablewaitingroomevent "Waiting Room#SignDance";
	stopnpctimer;
	end;

OnInit:
	set $signdance,0;
	set $Signdanceresult,0;
	set $SignDancingrid,0;
	set $SignDanceRandomizer,0;
	end;

}

//Dancing tiles
cmd_in01,16,13,4	script	SignDance#DOWNRIGHT	139,1,1,{

	if($signdance == 3){ set $signdance,4; soundeffect "effect\\sign_down.wav",1; }
	if($signdance == 8){ set $signdance,9; soundeffect "effect\\sign_down.wav",1; }
	if($signdance == 16){ set $signdance,17; soundeffect "effect\\sign_down.wav",1; }
	if($signdance == 19){ set $signdance,20; soundeffect "effect\\sign_down.wav",1; }
	if($signdance == 21){ set $signdance,22; soundeffect "effect\\sign_down.wav",1; }
	if($signdance == 26){ set $signdance,27; soundeffect "effect\\sign_down.wav",1; }
	if($signdance == 32){ set $signdance,33; soundeffect "effect\\sign_down.wav",1; }
	if($signdance == 35){ set $signdance,36; soundeffect "effect\\sign_down.wav",1; }
	if($signdance == 37){ set $signdance,38; soundeffect "effect\\sign_down.wav",1; }
	if($signdance == 44){ set $signdance,45; soundeffect "effect\\sign_down.wav",1; }
	if(getcharid(3) != $SignDancingrid)warp "comodo",187,164;
	end;

}


cmd_in01,19,16,4	script	SignDance#UPRIGHT	139,1,1,{

	if($signdance == 6) { set $signdance,7; soundeffect "effect\\sign_right.wav",1; }
	if($signdance == 11) { set $signdance,12; soundeffect "effect\\sign_right.wav",1; }
	if($signdance == 25) { set $signdance,26; soundeffect "effect\\sign_right.wav",1; }
	if($signdance == 30) { set $signdance,31; soundeffect "effect\\sign_right.wav",1; }
	if($signdance == 34) { set $signdance,35; soundeffect "effect\\sign_right.wav",1; }
	if($signdance == 36) { set $signdance,37; soundeffect "effect\\sign_right.wav",1; }
	if($signdance == 40) { set $signdance,41; soundeffect "effect\\sign_right.wav",1; }
	if($signdance == 42) { set $signdance,43; soundeffect "effect\\sign_right.wav",1; }
	if(getcharid(3) != $SignDancingrid)warp "comodo",187,164;
	end;

}

cmd_in01,16,19,4	script	SignDance#UPLEFT	139,1,1,{

	if($signdance == 1) { set $signdance,2; soundeffect "effect\\sign_up.wav",1; }
	if($signdance == 12) { set $signdance,13; soundeffect "effect\\sign_up.wav",1; }
	if($signdance == 24) { set $signdance,25; soundeffect "effect\\sign_up.wav",1; }
	if($signdance == 31) { set $signdance,32; soundeffect "effect\\sign_up.wav",1; }
	if($signdance == 39) { set $signdance,40; soundeffect "effect\\sign_up.wav",1; }
	if(getcharid(3) != $SignDancingrid)warp "comodo",187,164;
	end;

}

cmd_in01,16,16,4	script	SignDance#WARPER	139,1,1,{
	if(getcharid(3) != $SignDancingrid)warp "comodo",187,164;
	end;

}

cmd_in01,16,16,4	script	SignDance#CENTER	139,1,1,{

	if($signdance == 0) { set $SignDancingrid, getcharid(3); donpcevent "DanceInit::OnInitiation"; }
	if($signdance == 13) { set $signdance,14; soundeffect "effect\\sign_center.wav",1; }
	if($signdance == 20) { set $signdance,21; soundeffect "effect\\sign_center.wav",1; }
	if($signdance == 27) { set $signdance,28; soundeffect "effect\\sign_center.wav",1; }
	if($signdance == 41 && !$SignDanceRandomizer) { set $signdance,42; soundeffect "effect\\sign_center.wav",1; }
	end;

OnInit:
	enablenpc "SignDance#WARPER";
	disablenpc "SignDance#CENTER";

}

cmd_in01,13,16,4	script	SignDance#DOWNLEFT	139,1,1,{

	if($signdance == 5) { set $signdance,6; soundeffect "effect\\sign_left.wav",1; }
	if($signdance == 10) { set $signdance,11; soundeffect "effect\\sign_left.wav",1; }
	if($signdance == 15) { set $signdance,16; soundeffect "effect\\sign_left.wav",1; }
	if($signdance == 17) { set $signdance,18; soundeffect "effect\\sign_left.wav",1; }
	if($signdance == 23) { set $signdance,24; soundeffect "effect\\sign_left.wav",1; }
	if($signdance == 29) { set $signdance,30; soundeffect "effect\\sign_left.wav",1; }
	if($signdance == 41 && $SignDanceRandomizer) { set $signdance,42; soundeffect "effect\\sign_left.wav",1; }
	if($signdance == 43) { set $signdance,44; soundeffect "effect\\sign_left.wav",1; }
	if(getcharid(3) != $SignDancingrid)warp "comodo",187,164;
	end;

}

alberta,99,151,1	script	Sign::AlbertaSign	111,{

	mes "^FF0000- The Sign Reads -^000000";
	mes "Tools by the Cart full!";
	mes "You need tools? We got'em!";
	mes "Come on in, we never close!";
	close;

}

alberta_in,114,178,5	script	Refined Steward	109,{

	if(bakerlan_test > 12) goto L_Hope;
	if(bakerlan_test == 12) goto L_Thanks;
	if(bakerlan_test > 6) goto L_Seylin;
	if(bakerlan_test == 5) goto L_Another;
	if(countitem(7181)) goto L_JobDone;
	if(bakerlan_test == 2) goto L_Delivery;
	if(bakerlan_test > 3) goto L_Sorry;
	mes "[Mahatra]";
	mes "Welcome to the";
	mes "Alchiesh Estate.";
	mes "The Alchiesh are the";
	mes "most esteemed family";
	mes "in all of Alberta.";
	next;
	mes "[Mahatra]";
	mes "I am Mahatra Mornen,";
	mes "steward of this family.";
	mes "Feel free to ask me if";
	mes "you need anything and";
	mes "I shall do my best";
	mes "to assist you.";
	close;

L_Delivery:
	mes "[Mahatra]";
	mes "Ah yes, the master informed";
	mes "me that you would be taking";
	mes "care of an urgent delivery";
	mes "for him. Please take this to a";
	mes "man named^0066CC Leibech.^000000";
	next;
	mes "[Mahatra]";
	mes "It may be difficult";
	mes "to find him since he";
	mes "travels around the world.";
	mes "Ah yes, I have heard that";
	mes "he was in some other country...";
	next;
	mes "[Mahatra]";
	mes "Now, the item I am";
	mes "about to give you is";
	mes "one of a kind. Don't lose";
	mes "it or you will fall out of favor";
	mes "with the master...";
	next;
	mes "^0066CCMahatra gives you";
	mes "a unique stone that has";
	mes "your name attached on it.^000000";
	set @signid,getcharid(0,strcharinfo(0));
	set @sign3, @signid & 65535;
	set @sign4, @signid >> 16;
	set @sign1,254;
	set @sign2,0;
	getitem2 7049,1,1,0,0,@sign1,@sign2,@sign3,@sign4;
	set bakerlan_test,3;
	close;

L_JobDone:
	mes "[Mahatra]";
	mes "Ah, you've returned.";
	mes "And I see you already";
	mes "delivered the Stone. Great,";
	mes "well done. Let me send a";
	mes "message to the master, so";
	mes "please visit him later.";
	set bakerlan_test,4;
	delitem 7181,1;
	close;

L_Sorry:
	mes "[Mahatra]";
	mes "Thank you very";
	mes "much for the trouble";
	mes "you've gone through";
	mes "on our behalf.";
	close;

L_Another:
	mes "[Mahatra]";
	mes "Greetings. Hm?";
	mes "Did the master ask";
	mes "you to perform another";
	mes "task for him already?";
	next;
	menu "No.",-,"You have another assignment for me.",L_Assign;
	mes "[Mahatra]";
	mes "Very well.";
	mes "Then, we shall";
	mes "converse later~";
	close;

L_Assign:
	mes "[Mahatra]";
	mes "I...I do...?";
	mes "The master didn't";
	mes "leave me any instructions.";
	mes "Hmmm. Oh, I know what you can";
	mes "do. Why don't you help^FF0000 Seylin^000000? She";
	mes "seems bothered with something...";
	set bakerlan_test,6;
	close;

L_Seylin:
	mes "[Mahatra]";
	mes "Although you may only";
	mes "be doing it for the Sobbing";
	mes "Starlight, I really appreciate";
	mes "all your help. Seylin's a very";
	mes "nice girl and doesn't deserve";
	mes "to feel down...";
	close;

L_Thanks:
	mes "[Mahatra]";
	mes "Yes.";
	mes "I heard from Seylin.";
	mes "I did not know she was worried";
	mes "about her brother.";
	mes "Ahem ahem...";
	mes "Thank you for helping her.";
	mes "I will send a message to my";
	mes "master.";
	next;
	mes "[Mahatra]";
	mes "If there is anything else, he will";
	mes "let you pass the test.";
	mes "Good luck.";
	set bakerlan_test,13;
	close;

L_Hope:
	mes "[Mahatra]";
	mes "I hope the master";
	mes "listens to me and dresses more like";
	mes "a man in his position. Even if";
	mes "he thinks he's just a merchant,";
	mes "he's the master of the estate!";
	mes "But please don't tell him that~";
	close;

}

alberta_in,154,171,5	script	Maid#3	758,{

	if(bakerlan_test > 11) goto L_Done;
	if(bakerlan_test == 11) goto L_Thanks;
	if(bakerlan_test == 10) goto L_Brother;	
	if(bakerlan_test > 8 && countitem(7044)) goto L_Vigorgra;
	if(bakerlan_test > 6) goto L_Bring;
	if(@seylin == 2) goto L_Thought;
	if(@seylin == 1) goto L_Help;
	if(bakerlan_test == 6) goto L_NoUse;
	if(bakerlan_test > 2 && bakerlan_test < 6) goto L_Bother;
	mes "[Seylin]";
	mes "I'm sorry, but I'm";
	mes "busy cleaning the manor";
	mes "right now so I don't have";
	mes "time to talk. Oh, and would";
	mes "please wipe your shoes";
	mes "on the mat before coming in?";
	close;

L_Bother:
	mes "[Seylin]";
	mes "Ooooh...";
	mes "What am I going";
	mes "to do?! Oh-- You";
	mes "startled me!";
	next;
	mes "[Seylin]";
	mes "I'm sorry, but";
	mes "I was just thinking";
	mes "about something. I hope";
	mes "I didn't bother you. *sigh*";
	close;

L_NoUse:
	mes "[Seylin]";
	mes "Oh, it's no use";
	mes "worrying about";
	mes "something I can't do";
	mes "nothing about. I better";
	mes "get back to work...";
	set @seylin,1;
	close;

L_Help:
	mes "[Seylin]";
	mes "*sigh...*";
	mes "Oh, dear...";
	mes "What can I do";
	mes "about this...?";
	next;
	menu "Ignore her.",-,"Excuse me, but Mahatra sent me...",L_Work;
	close;

L_Work:
	mes "[Seylin]";
	mes "Mister Mahatra";
	mes "sent you to me?";
	mes "Hm? Does he need";
	mes "me for anything?";
	next;
	menu "Actually, he wants me to help you.",-;
	mes "[Seylin]";
	mes "Oh, how very kind!";
	mes "Yes, yes, I could use";
	mes "some help right now!";
	mes "You see, it'll be my brother's";
	mes "birthday but I'm so busy with";
	mes "work that I can't see him.";
	emotion e_thx;
	next;
	mes "[Seylin]";
	mes "The last time I saw him,";
	mes "he looked so tired and weak";
	mes "so it's worrying me. Now, I've";
	mes "heard there's some new medicine";
	mes "called^FF0000 Vigorgra^000000. I don't know much";
	mes "about it, but it should help him!";
	next;
	mes "[Seylin]";
	mes "Do you think you could";
	mes "find that medicine and";
	mes "bring it to me? If you don't";
	mes "want to, I understand. Plus,";
	mes "I don't know if the master";
	mes "would approve of this...";
	next;
	menu "I can't do it.",-,"Let me think about it.",L_Think,"Sure, why not?",L_Ok;
	mes "[Seylin]";
	mes "Oh really?";
	mes "Alright, I can";
	mes "understand. I'm";
	mes "very sorry to bother";
	mes "you with my problems.";
	set @seylin,2;
	close;

L_Think:
	mes "[Seylin]";
	mes "Oh really?";
	mes "I'm sorry, I...";
	mes "I just thought";
	mes "that maybe...";
	set @seylin,2;
	close;

L_Thought:
	mes "[Seylin]";
	mes "Hello there--";
	mes "Oh, have you";
	mes "changed your mind";
	mes "about helping me?";
	mes "I'll repay you,";
	mes "of course.";
	next;
	menu "No.",L_Think,"Yes.",-;

L_Ok:
	mes "[Seylin]";
	mes "Oh, thank you so much!";
	mes "Now, I remember hearing";
	mes "that you can find Vigorgra";
	mes "somewhere in Aldebaran.";
	mes "Somebody in the Alchemist";
	mes "Guild make it, I think.";
	next;
	mes "[Seylin]";
	mes "I'm sorry but I don't";
	mes "know much about the medicine.";
	mes "Well, aside from the fact that";
	mes "it makes men feel young again.";
	mes "So that must be good, right?";
	mes "Thanks again for your help~";
	set bakerlan_test,7;
	close;

L_Bring:
	mes "[Seylin]";
	mes "I know that you might";
	mes "be able to find Vigorgra";
	mes "in the Alchemist's Guild";
	mes "in Aldebaran. Aside from";
	mes "that, I don't know much...";
	next;
	mes "[Seylin]";
	mes "Once you get it,";
	mes "would you bring";
	mes "the Vigorgra to me?";
	close;

L_Vigorgra:
	mes "[Seylin]";
	mes "Hurray~!";
	mes "You brought the";
	mes "Vigorgra! I hope";
	mes "my brother will";
	mes "be happy with this.";
	next;
	mes "[Seylin]";
	mes "Oh! Would you please";
	mes "bring this Vigorgra to my";
	mes "brother? His name is Maruin";
	mes "and he's working over at";
	mes "the Prontera Castle.";
	next;
	mes "[Seylin]";
	mes "Ah, I almost forgot!";
	mes "I just finished writting";
	mes "him this letter, so would";
	mes "you make sure he gets";
	mes "this? Thanks you so much!";
	getitem 7183,1;
	set bakerlan_test,10;
	close;

L_Brother:
	mes "[Seylin]";
	mes "Would you please";
	mes "deliver the Vigorgra";
	mes "and my letter to my brother";
	mes "Maruin in the Prontera Castle?";
	mes "And wish him Happy Birthday~";
	close;

L_Thanks:
	mes "[Seylin]";
	mes "Thanks so much";
	mes "for your help again!";
	mes "I want you to have this";
	mes "as a token of my gratitude.";
	mes "You really are a kind person~";
	getitem 525,3;
	emotion e_kis2;
	set bakerlan_test,12;
	close;

L_Done:
	mes "[Seylin]";
	mes "Although the master isn't";
	mes "a messy person, he's pretty";
	mes "unorganized. I wish he'd make";
	mes "it easier for me to tell which";
	mes "papers are documents, and";
	mes "which ones are trash...";
	next;
	mes "[Seylin]";
	mes "So, how have you been?";
	mes "Is everything okay with you?";
	mes "I hope you have a lot of good";
	mes "experiences in your adventures.";
	close;

}

alberta_in,125,101,5	script	Wealthy-looking Merchant	807,{

    if (!signquest) {
        mes "[Bakerlan]";
        mes "Umm...well then...";
        mes "I shall take the action for";
        mes "Prontera...";
        mes "And for Juno...";
        mes "Awww....";
        mes "Gosh, this is such a pain in the";
        mes "ass...";
        mes "Mumble mumble...";
        close;
    }
    if (signquest > 12) goto L_Over;
    if (bakerlan_test == 13) goto L_Help;
    if (bakerlan_test == 5) goto L_Busy;
    if (bakerlan_test == 4) goto L_JobDone;
    if (bakerlan_test > 1) goto L_Steward;
    if (bakerlan_test == 1) goto L_Later;
    if (signquest == 12) {
        mes "[Bakerlan]";
        mes "Gosh...";
        mes "I do not know what I should do";
        mes "about Juno...";
        mes "Who are you?";
        next;
        menu "Noone.",-,"Mr. Metz sent me.",L_Metz;
        mes "[Bakerlan]";
        mes "Hmm...";
        mes "I am pretty busy at the moment. So";
        mes "please do not interrupt me any";
        mes "further.";
        mes "If you are looking for a job,";
        mes "please inquire of my steward.";
        close;
    }

L_Metz:
    mes "[Bakerlan]";
    mes "Ah... He did?... Hmmmm...";
    mes "Unfortunately, I am kind of busy...";
    mes "Will you please come back later?";
    mes "Thanks you.";
    set bakerlan_test,1;
    close;

L_Later:
    mes "[Bakerlan]";
    mes "Hmm...? You've";
    mes "finished all the";
    mes "tests up until Dearles'";
    mes "challenge? Prove it to me";
    mes "with your pieces of the";
    mes "Sobbing Starlight...";
    next;
    menu "Give me a minute...",-,"Here...",L_Star;

L_NoStar:
    mes "[Bakerlan]";
    mes "Well, you better";
    mes "come back soon. I'm";
    mes "a busy businessman, so";
    mes "my time is quite precious.";
    close;

L_Star:
    if (countitem(7177) < 5) goto L_NoStar;
    mes "[Bakerlan]";
    mes "Ah, now I see that";
    mes "you speak the truth.";
    mes "Alright, we can begin my test.";
    next;
    mes "[Bakerlan]";
    mes "First, I wish for you to make";
    mes "a delivery. The object I want you";
    mes "to deliver is expensive and must be";
    mes "handled with care. Don't lose it or";
    mes "you will fail. Now, speak to my";
    mes "steward for more information.";
    set bakerlan_test,2;
    close;

L_Steward:
    mes "[Bakerlan]";
    mes "Please speak to my";
    mes "steward for all matters";
    mes "related to the delivery";
    mes "that you must complete";
    mes "for my test.";
    close;

L_JobDone:
    mes "[Bakerlan]";
    mes "Ah yes, Mahatra tells";
    mes "me that you've completed";
    mes "the delivery. Well, um, he now";
    mes "has another assignment for";
    mes "you to complete. So";
    mes "please talk to him again.";
    set bakerlan_test,5;
    close;

L_Busy:
    mes "[Bakerlan]";
    mes "You have not finished yet.";
    mes "Why don't you go finish them";
    mes "first?";
    mes "I'm a busy businessman.";
    close;

L_Help:
    mes "[Bakerlan]";
    mes "Ah, I was informed about you.";
    mes "Well, although you have your goal,";
    mes "that does not necessarily mean to";
    mes "help that kid.";
    mes "Metz must have an eye for a right";
    mes "person, I assume.";
    next;
    mes "[Bakerlan]";
    mes "Well, I wanted to assign you some";
    mes "various tasks,";
    mes "on my own plan, bur recently I am";
    mes "very busy";
    mes "to take care of tradings";
    mes "with Kunlun and Amatsu.";
    next;
    mes "[Bakerlan]";
    mes "I found Seylin while I was trading";
    mes "with Amatsu few years ago.";
    mes "I introduces her brother to the";
    mes "royal family of Prontera, too.";
    mes "But anyways,";
    next;
    mes "[Bakerlan]";
    mes "I want to test you longer, but";
    mes "I am too busy for that. Also I";
    mes "don't think it is good for you.";
    mes "Let's finish the test now.";
    mes "You are qualified enough already.";
    next;
    mes "[Bakerlan]";
    mes "There you go.";
    mes "I am the last one who tested your";
    mes "qualification.";
    mes "Now bring all of the Stone pieces";
    mes "to Metz.";
    mes "He will tell you what you need to";
    mes "do next.";
    getitem 7177,1;
    set signquest,13;
    close;

L_Over:
    mes "[Bakerlan]";
    mes "How is it going?";
    mes "In fact, we want to do it on our";
    mes "own...";
    mes "but we are too preoccupied with our";
    mes "works...";
    mes "I hope you will keep up the good";
    mes "work.";
    mes "I am also curious what that stone";
    mes "is.";
    close;
}

yuno,330,100,3	script	Knight#2	734,{

    if (bakerlan_test > 4) goto L_Thanks;
    if (bakerlan_test == 3) goto L_Delivery;

L_Wait:
    mes "[Leibech]";
    mes "Don't disturb me.";
    mes "I'm waiting for an";
    mes "important delivery.";
    close;

L_Delivery:
    set @signid,getcharid(0,strcharinfo(0));
    set @sign3, @signid & 65535;
    set @sign4, @signid >> 16;
    set @sign1,254;
    set @sign2,0;
    if (countitem2(7049,1,0,0,@sign1,@sign2,@sign3,@sign4)) {
        mes "[Leibech]";
        mes "Finally, it's here!";
        mes "Yes, this is what I ordered.";
        mes "Thanks for the delivery!";
        next;
        mes "[Leibech]";
        mes "Well, here's your";
        mes "receipt. Please take";
        mes "this to Mister Bakerlan";
        mes "so he knows you did";
        mes "a good job for me.";
        mes "Thanks again!";
        delitem2 7049,1,1,0,0,@sign1,@sign2,@sign3,@sign4;
        getitem 7181,1;
        close;
    } else {
        goto L_Wait;
    }

L_Thanks:
    mes "[Leibech]";
    mes "Thanks again for";
    mes "the delivery.";
    mes "I was waiting for it";
    mes "for such a long time...";
    close;
}


alde_alche,169,162,7	script	Alchemist#3	749,{

    if (!bakerlan_test) {
        mes "[Melkaba]";
        mes "Most Alchemists seek out the";
        mes "Stone of Sage, but in my opinion";
        mes "their goals are too short sighted.";
        mes "There are more important studies";
        mes "to be conducted in the name of";
        mes "science for the good of mankind...";
        next;
        menu "...",-,"So what are you studying?",L_What;

        mes "[Melkaba]";
        mes "In the end, the";
        mes "Stone of Sage may";
        mes "just be a simple rumor.";
        mes "After all, thousands of";
        mes "Alchemists have already";
        mes "failed to create it.";
        close;

L_What:
        mes "[Melkaba]";
        mes "What am I studying?";
        mes "Well, my expertise is...";
        mes "Different, if you must";
        mes "know, it's a secret~";
        mes "If any man found out";
        mes "about my research...";
        close;
    }
    if (bakerlan_test > 8) goto L_Done;
    if (bakerlan_test == 8) goto L_Items;
    mes "[Melkaba]";
    mes "Eh...?";
    mes "What do you need?";
    mes "If it's not important,";
    mes "please leave my";
    mes "laboratory.";
    if (bakerlan_test == 7) {
        next;
        menu "Vigorgra?",L_Vigor,"Oh, I'm sorry.",-;
        mes "[Melkaba]";
        mes "There's no need";
        mes "to apologize but";
        mes "I'd appreciate it if";
        mes "you'd let me work";
        mes "in peace.";
        close;

L_Vigor:
        mes "[Melkaba]";
        mes "What?! Who told you";
        mes "that I could make that?!";
        mes "Oh, no matter I suppose";
        mes "you want me to get some";
        mes "some ready for you. Now tell me...";
        mes "Why do you want it?";
        next;
        menu "No, I don't want it.",-,"I need Vigorgra for... a friend.",L_Friend;
        mes "[Melkaba]";
        mes "You immature--!";
        mes "You come all this";
        mes "way to bother me?";
        mes "Don't bring your";
        mes "shame into my lab!";
        close;

L_Friend:
        mes "[Melkaba]";
        mes "Oh, right.";
        mes "Your friend.";
        mes "I understand you.";
        mes "Crystal clear.";
        next;
        mes "[Melkaba]";
        mes "Well, since you know";
        mes "about my secret researches,";
        mes "I'll do you a favor so long as";
        mes "you don't tell anyone else!";
        mes "Of course, I can't just give";
        mes "you Vigorgra for free...";
        next;
        mes "[Melkaba]";
        mes "Now, write this";
        mes "down. These are the";
        mes "ingredients I need to";
        mes "make a bottle of Vigorgra.";
        next;
        mes "[Melkaba]";
        mes "^FF00001 Ment";
        mes "20 Honey";
        mes "10 Royal Jelly";
        mes "30 Bear's Footskin";
        mes "1 Hinalle Leaflet";
        mes "1 Empty Bottle^000000";
        next;
        mes "[Melkaba]";
        mes "Alright.";
        mes "Now go and";
        mes "bring all those";
        mes "items to me. I'll";
        mes "be seeing you later.";
        set bakerlan_test,8;
        close;

L_Items:
        mes "[Melkaba]";
        mes "Hmmmm...";
        mes "So did you";
        mes "bring everything";
        mes "you need for the";
        mes "Vigorgra...?";
        next;
        menu "Not yet...",-,"Yes.",L_Check;
        mes "[Melkaba]";
        mes "Well, let me";
        mes "remind you of";
        mes "what you need to";
        mes "bring to me in case";
        mes "you forgot already...";
        next;
        mes "[Melkaba]";
        mes "^FF00001 Ment";
        mes "20 Honey";
        mes "10 Royal Jelly";
        mes "30 Bear's Footskin";
        mes "1 Hinalle Leaflet";
        mes "1 Empty Bottle^000000";
        next;
        mes "[Melkaba]";
        mes "Take your time...";
        mes "In the end, you're";
        mes "the one who's got the";
        mes "need for it, anyway.";
        close;

L_Check:
        mes "[Melkaba]";
        mes "Great...!";
        mes "Now let me check";
        mes "to see if you have";
        mes "everything ready...";
        next;
        if (countitem(708) > 0 && countitem(518) > 19 && countitem(526) > 9 && countitem(948) > 29 && countitem(520) > 0 && countitem(713) > 0) goto L_Enough;
        mes "[Melkaba]";
        mes "Hmm, you're still";
        mes "missing some of the";
        mes "ingredients. Now, listen";
        mes "carefully. I need you to get...";
        next;
        mes "[Melkaba]";
        mes "^FF00001 Ment";
        mes "20 Honey";
        mes "10 Royal Jelly";
        mes "30 Bear's Footskin";
        mes "1 Hinalle Leaflet";
        mes "1 Empty Bottle^000000";
        close;

L_Enough:
        mes "[Melkaba]";
        mes "Good work.";
        mes "Everything's here.";
        mes "Alright, just this once";
        mes "I'll make you a bottle";
        mes "of Vigorgra.";
        next;
        mes "[Melkaba]";
        mes "If you ask me again,";
        mes "I won't speak to you!";
        mes "And I'll need to charge";
        mes "you 10.000 zenys.";
        next;
        mes "[Melkaba]";
        mes "Alright. I'll be";
        mes "taking my fee from";
        mes "you now. It's not that";
        mes "expensive when you";
        mes "consider Vigorgra's";
        mes "numerous benefits.";
        next;
        if (Zeny < 10000) goto L_Money;
        mes "^0066CCMelkaba placed";
        mes "all the ingredients";
        mes "into a test tube and";
        mes "began processing it";
        mes "through some strange";
        mes "electronic equipment.^000000";
        next;
        mes "...";
        mes "......";
        next;
        mes "...";
        mes "......";
        mes ".........";
        next;
        mes "[Melkaba]";
        mes "Ah! Success!";
        mes "A lifetime's supply";
        mes "of Vigorgra! I know it's";
        mes "just one bottle but this";
        mes "stuff is extremely potent!";
        misceffect 305;
        next;
        mes "[Melkaba]";
        mes "Um, just remember";
        mes "not to take too much";
        mes "at one time. Can't have";
        mes "you getting crazy high";
        mes "blood pressure~";
        set bakerlan_test,9;
        set Zeny,Zeny - 10000;
        delitem 708,1;
        delitem 518,20;
        delitem 526,10;
        delitem 948,30;
        delitem 520,1;
        delitem 713,1;
        getitem 7044,1;
        close;

L_Money:
        mes "[Melkaba]";
        mes "I'm sorry but it";
        mes "seems you don't";
        mes "have enough money";
        mes "to support the fee...";
        mes "Please come back";
        mes "with 10.000 zenys.";
        close;

L_Done:
        mes "[Melkaba]";
        mes "Vigorgra is";
        mes "a miracle of";
        mes "modern science";
        mes "but it can do more";
        mes "harm than good if";
        mes "you're not careful!";
        close;
    }
    else {
        close;
    }

}

prt_castle,107,58,5	script	Soldier#2sign	105,{

    if (bakerlan_test > 10) goto L_Heya;
    mes "[Maruin]";
    mes "Welcome to";
    mes "Prontera Castle.";
    mes "Please be careful";
    if (bakerlan_test == 10 && countitem(7044) && countitem(7183)) {
        mes "and avoid getting los--";
        next;
        mes "[Maruin]";
        mes "What's that?";
        mes "You're here for";
        mes "my sister? Um, did";
        mes "something happen...?";
        next;
        menu "Oh no, she sent you a birthday gift.",-;
        mes "[Maruin]";
        mes "Birthday...?";
        mes "What are you sm--";
        mes "OH. It is my birthday.";
        mes "Ha! I completely forgot!";
        next;
        mes "[Maruin]";
        mes "Thanks for coming";
        mes "all the way out here";
        mes "to deliver my present!";
        mes "Wow, I wonder what she";
        mes "gor for me this year!";
        delitem 7044,1;
        delitem 7183,1;
        next;
        mes "[Maruin]";
        mes "Th-This is--!";
        mes "Oh. Snap. That's right.";
        mes "She's been worried about";
        mes "me being tired lately. But";
        mes "does she even know what";
        mes "Vigorgra is supposed to...?";
        emotion e_gasp;
        next;
        mes "[Maruin]";
        mes "Never mind. It's the";
        mes "thought that counts.";
        mes "But for the record, it's";
        mes "not like I need this stuff.";
        mes "I mean, I have, you know,";
        mes "a girlfr--you know what I mean.";
        next;
        mes "[Maruin]";
        mes "I'd like to pay you";
        mes "back but since I'm";
        mes "on duty, all I can do";
        mes "is replenish your health.";
        mes "I'm not really supposed to,";
        mes "but no one will say anything.";
        next;
        mes "[Maruin]";
        mes "Well, thanks for";
        mes "the letter and the";
        mes "male supplement, I guess.";
        mes "I'll send a message to my";
        mes "sister. Good luck on your";
        mes "travels, alright?";
        set bakerlan_test,11;
        close;

L_Heya:
        mes "[Maruin]";
        mes "Oh hey, how's";
        mes "it going? Thanks";
        mes "again for helping";
        mes "out my sister, we";
        mes "really appreciate it.";
        close;
    } else {
        mes "and avoid getting lost.";
        next;
        mes "[Maruin]";
        mes "Oh man...";
        mes "I'm so tired~!";
        mes "Enervated, even~";
        mes "If I only had some";
        mes "kind of refreshment...";
        close;
    }

}


geffen_in,171,43,3	script	Cute Girl	703,{

    if (!signquest) {
        mes "[Liana]";
        mes "^222222*Pout*^000000";
        mes "When's my daddy";
        mes "coming home?!";
        mes "I... I miss him so much~";
        mes "^222222*Cries*";
        emotion e_sob;
        close;
    }
    if (signquest > 20) goto L_Never;
    if (signquest == 20) goto L_Thanks;
    if (signquest == 17) goto L_Letter;
    if (signquest == 16) goto L_Father;
    mes "[Liana]";
    mes "Oh, my mom said she's gonna cook me";
    mes "something good today.";
    mes "I wonder what she's gonna make?";
    mes "I hope it's pickled cabbage again!";
    close;

L_Father:
    mes "[Liana]";
    mes "Everyone says that daddy is the";
    mes "best blacksmith in the whole world!";
    mes "but now he lets his apprentices do";
    mes "the work so he can go around the";
    mes "world to ding a rare ore~ Isn't";
    mes "it amazing?";
    next;
    menu "What are you drawing by the way?",L_Draw,"Apprentices?",-;
    mes "[Liana]";
    mes "Yeah, Uncle Hollgrehenn and";
    mes "Aragham come to visit sometimes and";
    mes "we all play. But it's more fun to";
    mes "see my dad, even though he's not";
    mes "back yet. *Pout*";
    next;
    menu "Don't you miss your dad?",L_Miss,"He also misses you a lot.",-;
    mes "[Liana]";
    mes "I hope so...";
    mes "But I hate it when";
    mes "he doesn't have enough";
    mes "time to come home and";
    mes "see me. Sooooooooo~";
    mes "I wrote this letter!";
    emotion e_dots;
    next;
    menu "...",-,"I'll bring this to him",L_Really;
    mes "[Brenda Howard]";
    mes "Liana~";
    mes "This nice man is going to look for";
    mes "you dad. Why don't you ask him to";
    mes "take your letter to him for you?";
    next;

L_Really:
    mes "[Liana]";
    mes "You are...?";
    mes "Really, really?";
    mes "H-hooray!";
    next;
    mes "[Liana]";
    mes "Okay then, don't";
    mes "forgive to give this to";
    mes "my dad, okay? Promise?";
    getitem 7276,1;
    set signquest,17;
    close;

L_Draw:
    mes "[Liana]";
    mes "This is my father coming";
    mes "back from his expedition";
    mes "with the rarest ore ever";
    mes "found in the world! I hope";
    mes "he will be here soon.";
    close;

L_Miss:
    mes "[Liana]";
    mes "I miss him soooo much!";
    mes "*Cries* But Mom always";
    mes "says that he's too busy.";
    mes "*Pouts*";
    close;

L_Letter:
    mes "[Liana]";
    mes "Would you please bring my letter";
    mes "over to my dad? Heh heh, he'll be";
    mes "so happy to hear from me!";
    close;

L_Thanks:
    mes "[Liana]";
    mes "Yay~!";
    mes "Thank you for bringing my letter to";
    mes "my dad. Here, here!";
    mes "You have to share my treasure with";
    mes "me, 'kay?";
    getitem 529,10;
    set signquest,21;
    close;

L_Never:
    mes "[Liana]";
    mes "I never saw my dad fail to upgrade";
    mes "a weapon or armor. Mmm? But maybe";
    mes "if he had something really really";
    mes "old and rare and special...";
    close;

}


geffen_in,159,48,5	script	Woman	711,{
    if (signquest > 22) goto L_Cherish;
    if (signquest > 19) goto L_Done;
    if (signquest == 19 && countitem(7278)) goto L_Letter;
    if (signquest > 15) goto L_Cooking;
    if (@signbrenda == 1) goto L_Husband;
    if (signquest == 15) {
        mes "[Brenda Howard]";
        mes "Hey, who are you anyhow?";
        mes "Don't you know it's rude to";
        mes "enter someone's house without";
        mes "being invited? Besides, I don't";
        mes "have the time to help strangers";
        mes "while I'm busy making dinner...";
        next;
        mes "[" + strcharinfo(0) + "]";
        mes "W-Wait!";
        mes "I'm here to see...";
        next;
        mes "[Brenda Howard]";
        mes "Huh?";
        mes "What are you";
        mes "talking about?";
        next;
        mes "[Brenda Howard]";
        mes "Hmm...";
        mes "I wonder";
        mes "how my pickled";
        mes "cabbage will turn out?";
        set @signbrenda,1;
        close;
    }
    // Script could get to this point if the variable "signquest" was non-zero
    // It would then continue running at the label "L_Husband" [Llyr]

    mes "[Brenda Howard]";
    mes "Hmm...";
    mes "What should I make for";
    mes "dinner today? Pickled cabbage?";
    mes "I learned how to make it a while";
    mes "ago, but I've never gotten the";
    mes "chance to make it yet...";
    close;

L_Husband:
    mes "[Brenda Howard]";
    mes "Ah... I see.";
    mes "You're looking for my husband.";
    mes "My husband, my daughter and";
    mes "I just moved to Geffen from";
    mes "Prontera a while ago.";
    next;
    mes "[Brenda Howard]";
    mes "We moved to geffen for the sake of";
    mes "my husband's business. Apparently,";
    mes "this town is closest to something";
    mes "he really seems to need. Whatever";
    mes "it is, it must be really important";
    mes "to his smithing work.";
    next;
    mes "[Brenda Howard]";
    mes "Oh, and if you're going to look";
    mes "for my husband,  please talk to my";
    mes "daughter before you go. I think she";
    mes "has something she wants to";
    mes "give to her father...";
    set signquest,16;
    close;

L_Cooking:
    mes "[Brenda Howard]";
    mes "Ho-Ho~";
    mes "Crisp and delicious pickled";
    mes "cabbage~ My kid loves this stuff";
    mes "and finished it all by herself the";
    mes "last time I made it!";
    close;

L_Letter:
    mes "[Brenda Howard]";
    mes "Thank you so much for bringing";
    mes "this to me. I'm so happy to hear";
    mes "that he's fine and doing well.";
    mes "Although he's not here often";
    mes "enough, it's good to know";
    mes "that he loves his job.";
    next;
    mes "[Brenda Howard]";
    mes "Even so, I should start letting";
    mes "him know that I want him to spend";
    mes "a little more time at home. Oh, and";
    mes "why don't you talk to Liana? She's";
    mes "been waiting to tell you";
    mes "something.";
    delitem 7278,1;
    set signquest,20;
    close;

L_Done:
    mes "[Brenda Howard]";
    mes "So how have you been?";
    mes "As usual, Liana misses";
    mes "her daddy, but I suppose";
    mes "it can't be helped...";
    next;
    mes "[Brenda Howard]";
    mes "I may be no expert but I'm";
    mes "certain that my husband is";
    mes "the best blacksmith in the world!";
    mes "Did you know Hollgrehenn and";
    mes "Aragham used to be his apprentices?";
    mes "Ho ho ho~";
    close;

L_Cherish:
    mes "[Brenda Howard]";
    mes "Try to cherish your";
    mes "family, especially through the";
    mes "hard times. Even when you're angry";
    mes "with them, try to be more";
    mes "understanding. I know it's hard...";
    close;

}

mjo_dun02,88,295,3	script	Flaming Spirit Man	85,{
    //get rid of some pieces, to let player reborn in future
    if (signquest > 22) delitem 7177,countitem(7177);

    if (signquest > 62) goto L_Improve;
    if (signquest > 61) goto L_Hour;
    if (signquest > 60 && countitem(2644)) goto L_Sign;
    if (signquest > 22) goto L_Done;
    if (signquest == 21) goto L_Refine;
    if (signquest == 18 || signquest == 22) goto L_Check;
    if (signquest == 17)goto L_Family;
    emotion e_pif;
    mes "[Engel]";
    mes "I hope you understand that";
    mes "this forge isn't really open to the";
    mes "public. I'm doing some intensive";
    mes "training, so I'd appreciate it if";
    mes "you would just leave now.";
    close2;
    warp "mjo_dun02",372,346;
    end;

L_Family:
    mes "[Engel]";
    mes "*Sigh*";
    mes "It's been a long";
    mes "time since I've seen";
    mes "my family. I really should let them";
    mes "know how I'm doing sooner or later.";
    mes "Hmmm...";
    next;
    mes "[Engel]";
    mes "...?";
    mes "Were you looking for me?";
    mes "I'm sorry, but I'm busy at the";
    mes "moment. Please don't disturb me";
    mes "while I try to get my work done.";
    if (signquest == 17 && countitem(7276)) {
        next;
        menu "I need your help.",L_Help,"Here is a letter for you.",L_Letter,"I am leaving, leaving.",-;
        mes "[Engel]";
        mes "Alright, then.";
        mes "Take care.";
    }
    close;

L_Help:
    mes "[Engel]";
    mes "Well, I'd like to help you";
    mes "but now isn't a good for me.";
    mes "Plenty of other good smiths out";
    mes "there who can help you with the";
    mes "work that you want done. Farewell.";
    close;

L_Letter:
    mes "[Engel]";
    mes "Oh, are you serious?";
    mes "Let me read it first.";
    next;
    mes "[Engel]";
    mes "Yes, yes...";
    mes "...Hahaha!";
    mes "It's so good to hear from";
    mes "my darling daughter.";
    delitem 7276,1;
    next;
    mes "[Engel]";
    mes "Thanks, I really appreciate that";
    mes "you've delivered this letter for";
    mes "me. Now, is there anything you'd";
    mes "like to ask of me? If it's not a";
    mes "big favor, I can probably help";
    mes "you.";
    next;
    menu "Please look at this.",-;
    mes "[Engel]";
    mes "Oh?";
    mes "Isn't this...?";
    mes "I see, I see!";
    next;
    mes "[Engel]";
    mes "Long ago, my old master told me";
    mes "that there are these strange ores";
    mes "that have fallen from the sky. The";
    mes "most beautiful and mysterious is";
    mes "the one shines just like a star.";
    next;
    mes "[Engel]";
    mes "Most people may know it as Sobbing";
    mes "Starlight, but my master used to";
    mes "call it God's Tear Drop.";
    next;
    mes "[Engel]";
    mes "However, this ore has been";
    mes "shattered into pieces. Judging from";
    mes "the smoothness of the edges, its";
    mes "inner power must have caused it to";
    mes "break apart. So you want to put";
    mes "this back together, don't you?";
    next;
    mes "[Engel]";
    mes "This will be a good challenge";
    mes "for me! However, I'll need some";
    mes "special tools and materials to";
    mes "repair this kind of ore. Now, I";
    mes "want you to bring me the following";
    mes "things...";
    next;
    mes "[Engel]";
    mes "^FF00005 Mini Furnace^000000,";
    mes "^FF00002 Oridecon Hammer^000000,";
    mes "and ^FF00001 good quality Anvil^000000.";
    mes "Now, keep in mind that ordinary";
    mes "anvils won't be good enough for";
    mes "this kind of work.";
    next;
    mes "[Engel]";
    mes "Now, an Emperium Anvil would be";
    mes "ideal for this job. I used to have";
    mes "one, but a while back I ended up";
    mes "giving it to someone. Anyway, I'll";
    mes "wait here for you while you gather";
    mes "everything you need.";
    next;
    mes "[Engel]";
    mes "Right. Let me guide you to a";
    mes "shortcut to the exit of these";
    mes "mines, just in case you don't know";
    mes "your way out of here. Good luck~";
    set signquest,18;
    close2;
    warp "mjo_dun02",371,344;
    end;

L_Check:
    mes "[Engel]";
    mes "As I've told you before, I'm more";
    mes "likely to succeed in my work if I'm";
    mes "able to use a higher quality anvil.";
    mes "Let me see what you've";
    mes "brought.";
    next;
    if ((countitem(612) > 4) && countitem(615) > 1) {
        if (countitem(986)) {
            set signanvil,1;
            goto L_Forge1;
        }
        if (countitem(987)) {
            set signanvil,2;
            goto L_Forge2;
        }
        if (countitem(988)) {
            set signanvil,3;
            goto L_Forge3;
        }
        if (countitem(989)) {
            set signanvil,4;
            goto L_Forge4;
        }
    }

L_NotEnough:
    mes "[Engel]";
    mes "I'm sorry but you didn't";
    mes "bring me enough materials.";
    mes "I'll repeat you what you";
    mes "need to bring me.";
    next;
    mes "[Engel]";
    mes "^FF00005 Mini Furnace^000000,";
    mes "^FF00002 Oridecon Hammer^000000,";
    mes "and ^FF00001 good quality Anvil^000000.";
    mes "Now, keep in mind that ordinary";
    mes "anvils won't be good enough for";
    mes "this kind of work.";
    close;

L_Forge1:
    mes "[Engel]";
    mes "Ah...";
    mes "A normal Anvil.";
    mes "Err... I told you";
    mes "the better quality you";
    mes "bring, the better the";
    mes "result will be...";
    mes "Anyway, I will try.";
    delitem 986,1;
    goto L_Forge;

L_Forge2:
    mes "[Engel]";
    mes "Ah...";
    mes "An Oridecon Anvil.";
    mes "This isn't too bad,";
    mes "but there's a good risk";
    mes "that this might not work.";
    delitem 987,1;
    goto L_Forge;

L_Forge3:
    mes "[Engel]";
    mes "Ah...";
    mes "A Golden Anvil.";
    mes "Excellent.";
    mes "This anvil should be quite";
    mes "enough to perform the";
    mes "restoration.";
    delitem 988,1;
    goto L_Forge;

L_Forge4:
    mes "[Engel]";
    mes "Ah...";
    mes "An Emperium Anvil.";
    mes "Perfect!";
    mes "I didn't think you'd";
    mes "be able to find one as";
    mes "they are extremely rare.";
    mes "Sure, it will work!";
    delitem 989,1;
    goto L_Forge;

L_Forge:
    delitem 612,5;
    delitem 615,2;
    next;
    if (signquest == 22) goto L_Refine;
    mes "[Engel]";
    mes "While I'm working on this, would";
    mes "you deliver a letter to my family";
    mes "for me? I'm sorry, but please";
    mes "consider that I'm waiving the fee";
    mes "for restoring this Sobbing";
    mes "Starlight.";
    next;
    mes "[Engel]";
    mes "Well then...";
    mes "I wish you safety";
    mes "in your travels.";
    delitem 7177,5; //we'll delete all sobbing pieces later
    getitem 7278,1;
    set signquest,19;
    close;

L_Refine:
    if (signanvil == 1) set @signrefine,rand(100);
    if (signanvil == 2) set @signrefine,rand(60);
    if (signanvil == 3) set @signrefine,rand(40);
    if (signanvil == 4) set @signrefine,rand(30);
    mes "[Engel]";
    mes "Are you back already?";
    if (@signrefine <= 30) goto L_Success;
    mes "I am sorry but I failed";
    mes "restoring the Sobbing";
    mes "Starlight.. But it isn't";
    mes "a failure, bring me back";
    mes "the materials and I'll";
    mes "try again.";
    getitem 7177,5;
    set signquest,22;
    close;

L_Success:
    delitem 7177,countitem(7177); //we delete all the pieces, or else u can't reborn
    mes "While you were gone, I managed to";
    mes "restore the Sobbing Starlight. Why";
    mes "don't you go ahead and take a";
    mes "look?";
    next;
    getitem 7178,1;
    set signquest,23;
    specialeffect2 94;
    next;
    mes "[Engel]";
    mes "This was one of the most difficult";
    mes "jobs I've ever done. But look! It";
    mes "was beautiful when broken in";
    mes "fragments, but now it's absolutely";
    mes "dazzling! This was really worth the";
    mes "effort.";
    next;
    mes "[Engel]";
    mes "In any case, I worked really hard";
    mes "to do a good job on this, so I hope";
    mes "you treasure this Sobbing";
    mes "Starlight, young adventurer.";
    close;

L_Done:
    mes "[Engel]";
    mes "How have you been doing lately?";
    mes "Feel free to ask me if you ever";
    mes "think that you need my expertise,";
    mes "alright?";
    close;

L_Sign:
    mes "[Engel]";
    mes "How have you been";
    mes "doing lately? You seem";
    mes "very well. So is there anything";
    mes "I can help you with today?";
    next;
    menu "I need your help again.",-;
    mes "[Engel]";
    mes "Haha, so what have";
    mes "you brought me this time?";
    mes "It must be fairly important if";
    mes "you've brought it all the way";
    mes "down here.";
    next;
    menu "Please look at this.",-;
    mes "[Engel]";
    mes "Isn't this...?!";
    mes "Amazing, just by looking at it,";
    mes "I can feel its power! You really";
    mes "are something! How do you come";
    mes "across all of this amazing stuff?";
    next;
    mes "[Engel]";
    mes "You know, I consider myself";
    mes "lucky to even see this kind of";
    mes "stuff. Most smiths might be able to";
    mes "see this kind of thing only once in";
    mes "their entire lives. And to be able";
    mes "to work on it...";
    next;
    mes "[Engel]";
    mes "Hmmm...";
    mes "It's going to take quite";
    mes "a while to work on this.";
    mes "Unfortunately, I can't even";
    mes "give you a time estimate...";
    mes "But I'll do my best for you.";
    delitem 2644,1;
    set @engelhour,gettime(3);
    set @engelmin,gettime(2);
    if (@engelmin > 29) set @engelhour,@engelhour +1;
    set signengelhour,@engelhour + rand(2,4);
    if (signengelhour > 23) set signengelhour,signengelhour - 24;
    set signquest,62;
    close;

L_Hour:
    if (gettime(3) == signengelhour || gettime(3) == signengelhour +1 || gettime(3) == signengelhour +2 || (signengelhour +1 == 24 && gettime(3) == 0) || (signengelhour +2 == 24 && gettime(3) == 0) || (signengelhour +2 == 25 && gettime(3) == 1)) {
        mes "[Engel]";
        mes "This is now yours to keep.";
        mes "Thank you for giving me the";
        mes "honor of working on a worthy";
        mes "smithing challenge.";
        getitem 2644,1;
        set signquest,63;
        close;
    } else {
        mes "[Engel]";
        mes "I haven't completed it yet, but";
        mes "please understand that I've got to";
        mes "be really careful when working with";
        mes "something so valuable. But don't";
        mes "worry, its inner power will be";
        mes "revealed when I'm finished.";
        close;
    }

L_Improve:
    mes "[Engel]";
    mes "Sometimes, you can only";
    mes "improve yourself by training in";
    mes "solitude. But don't ever forget";
    mes "about the ones who really care";
    mes "about you. It's those people who";
    mes "make everything worth it.";
    close2;
    emotion e_dots;
    end;

}


gef_tower,118,36,5	script	Annoyed Man	64,{


	if(signquest > 24) goto L_Answer;
	if(@sign_dhota == 1) goto L_Star;
	mes "[Dhota]";
	mes "Wah~";
	mes "Why the hell did he even go";
	mes "there...!";
	mes "What are you doing here?!";
	next;
	mes "[Dhota]";
	mes "Say what...?";
	mes "I have no idea what";
	mes "you're talking about!";
	mes "If you've got nothing";
	mes "to say, leave me alone!";
	if(signquest == 24) set @sign_dhota,1;
	close;

L_Star:
	mes "[Dhota]";
	mes "Eh?";
	mes "For that Sobbing Starlight, is that";
	mes "right?";
	next;
	mes "[Dhota]";
	mes "...";
	emotion e_dots;
	next;
	mes "[Dhota]";
	mes "...";
	mes "......";
	emotion e_dots;
	next;
	mes "[Dhota]";
	mes "...";
	mes "......";
	mes "BWAAAAH~!";
	emotion e_ag;
	next;
	mes "[Dhota]";
	mes "Right, he wants that guy";
	mes "who's good at working with";
	mes "gems and stuff. Eh, he's not";
	mes "here right now. Went somewhere";
	mes "near Comodo to investigate some";
	mes "tribal people or whatever.";
	emotion e_pif;
	set signquest,25;
	close;

L_Answer:
	mes "[Dhota]";
	mes "Hmmm...";
	mes "That can't be right...";
	mes "What could possibly be";
	mes "the answer I'm looking";
	mes "for...? *Sigh...*";
	emotion e_pif;
	close;
	
}

umbala,163,256,3	script	Native	781,{

	if(event_umbala < 3) goto L_UmWord;
	if(signquest > 25) goto L_Thanks;
	if(signquest == 25) goto L_Sign;
	mes "[Laotan]";
	mes "All my friends have a new";
	mes "mask and I'm the only one";
	mes "who didn't get mine...";
	mes "Wh.. why? Waaaaaaah!";
	close;

L_Sign:
	mes "[Laotan]";
	mes "Mmmh...";
	mes "A new guy in our village?";
	mes "I think I know him! Yea, I do!";
	next;
	if(countitem(2278)) goto L_Mask;
	mes "[Laotan]";
	mes "Waaaait";
	mes "I knooow~!";
	mes "I know if you get me";
	mes "a Mr. Smile, okay?";
	close;

L_Mask:
	mes "[Laotan]";
	mes "Oh my gosh!";
	mes "You've got a Mr. Smile mask!";
	mes "Would you give that to me?";
	mes "Pretty please...?";
	next;
	menu "Sure~",L_Ok,"^FF0000No.^000000",-;
	mes "[Laotan]";
	mes "I...";
	mes "I was...";
	mes "I just...";
	mes "Waaaaaaahhhh!";
	close;

L_UmWord:
	mes "[??????]";
	mes "Umbaumbafumba.";
	mes "Uwambaunbaumbabaufumba";
	mes "Umbababaumbaumba.";
	close;

L_Ok:
	mes "[Laotan]";
	mes "Hooooray!";
	mes "Thank you thank you";
	mes "thank you thank you";
	mes "soooooooooo much!";
	delitem 2278,1;
	set signquest,26;
	next;
	mes "[Laotan]";
	mes "Oh right~!";
	mes "The weird man in the funny clothes";
	mes "was in our village for a while, but";
	mes "ever since he went into that big";
	mes "tree, nobody's seen him!";
	close;

L_Thanks:
	mes "[Laotan]";
	mes "I love my Mr. Smile mask";
	mes "soooo much! I'm gonna show";
	mes "it to all my friends! Thank you";
	mes "so much again! You're really";
	mes "really nice, you know that ?";
	close;	
}

um_in,27,23,3	script	Weird Man	121,{

	if(signquest > 27) goto L_Done;
	if(signquest == 27) goto L_Check;
	mes "[Cyon]";
	mes "*Giggle*";
	mes "So, if I do this,";
	mes "then that and then...";
	mes "Ooh, these calculations";
	mes "are absolutely perfect!";
	emotion e_gg;
	next;
	mes "[Cyon]";
	mes "Wh-what?!";
	mes "Who are you?";
	mes "H-how did you get";
	mes "in here? I demand";
	mes "that you leave, right now!";
	emotion e_an;
	if(signquest == 26) goto L_Sign;
	close2;
	warp "um_dun01",129,90;
	end;

L_Sign:
	next;
	menu "I'm here for Metz Brayde.",L_Metz,"My apologies.",L_Sorry,"Would you look at this?",-,"...",L_Leave;
	mes "[Cyon]";
	mes "What could be so";
	mes "special about what";
	mes "you've brought here?!";
	mes "Fine, you've picked my";
	mes "scientific curiosity...";
	next;
	mes "[Cyon]";
	mes "Sweet lord...";
	mes "This is 'God's Tear Drop'!";
	mes "The Sobbing Starlight!";
	mes "He finally made it...";
	next;
	mes "[Cyon]";
	mes "*Giggle*";
	mes "Well, since he's kept his promise";
	mes "I suppose that I should keep mine";
	mes "as well. Now within this Sobbing";
	mes "Starlight are these tiny letters...";
	next;
	mes "[Cyon]";
	mes "The text is so small that even";
	mes "Hunters skilled in Vulture's Eye";
	mes "are unable to read them. However,";
	mes "I've read that this Sobbing";
	mes "Starlight will respond";
	mes "to really old papers...";
	next;
	mes "[Cyon]";
	mes "Now, if we want to figure out";
	mes "what's written in the Sobbing";
	mes "Starlight, we'd need at least";
	mes "10 ancient pieces of paper...";
	set signquest,27;
	close;


L_Metz:
	mes "[Cyon]";
	mes "Huh? Brayde?";
	mes "Do you expect me";
	mes "to just trust you without";
	mes "a single shred of proof that";
	mes "he sent you? Get out now!";
	close;

L_Sorry:
	mes "[Cyon]";
	mes "If you're so sorry,";
	mes "then hurry up and get";	
	mes "out of here! Not just anyone";
	mes "is allowed in here! Leave!";
	emotion e_pif;
	close;

L_Leave:
	mes "[Cyon]";
	mes "Not listening, eh?";
	mes "Fine, if you don't";
	mes "understand words, then";
	mes "I'll have to use force!";
	mes "Get out here right now!";
	close2;
	percentheal -30,0;
	end;

L_Check:
	mes "[Cyon]";
	mes "You've come back.";
	mes "I hope you were able";
	mes "to find some ancient";
	mes "or really aged papers...";
	next;
	if (countitem(1097) > 6) goto L_Text;
	mes "[Cyon]";
	mes "You haven't found anything?";
	mes "What kind of scientist are you?";
	mes "Now go out and find some old and";
	mes "ancient papers so that we can learn";
	mes "what's written in the Sobbing";
	mes "Starlight! Go!";
	next;
	mes "[Cyon]";
	mes "...?";
	mes "Why are you still here?";
	mes "Leave and do what I told";
	mes "you to do, alright?! Don't";
	mes "make me get violent...";
	next;
	percentheal -30,0;
	close2;
	warp "um_dun01",129,90;
	end;

L_Text:
	mes "[Cyon]";
	mes "How did you find these";
	mes "Worn Out Pages? This is great";
	mes "I'm sure the Sobbing Starlight";
	mes "will respond to these!";
	next;
	mes "[Cyon]";
	mes "Yes. Yes...";
	mes "This should be enough.";
	mes "Now give them to me";
	mes "and wait here while";
	mes "I try a few things...";
	next;
	delitem 1097,7;
	misceffect 72;
	next;
	mes "[Cyon]";
	mes "Just as I thought!";
	mes "The Sobbing Starlight is responding";
	mes "to these Worn Out Pages! Excellent!";
	mes "I've finally fulfilled my promise";
	mes "to Metz! Now he can leave";
	mes "me alone!";
	getitem 7275,1;
	set signquest,28;
	close;

L_Done:
	mes "[Cyon]";
	mes "My business with you is finished,";
	mes "so you go along on your way now.";
	mes "And tell Metz not to bother me";
	mes "anymore! I'm done doing favors!";
	close;
}

alberta,165,83,3	script	Fastidious Old Man#sign	755,{

    if (signquest > 30) goto L_Done;
    if (signquest == 30) goto L_Interpret;
    if (signquest == 29) goto L_Vision;
    mes "[Frank]";
    mes "My back~";
    mes "It's so sore!";
    mes "And my eyes are";
    mes "hurting worse and worse.";
    mes "^343434*Sigh* ^000000I'm getting old...";
    close;

L_Vision:
    mes "[Frank]";
    mes "My vision's getting";
    mes "blurrier and I get headaches";
    mes "when I read. I guess this old";
    mes "man's got no choice but to get";
    mes "some sort of seeing aid...";
    if (!countitem(2203))close;
    next;
    menu "Wait, I've got a pair of glasses...",L_Glasses,"Pass on by.",-;
    mes "[Frank]";
    mes "Oooh~";
    mes "How will I ever";
    mes "be able to continue";
    mes "my life's work? I'm";
    mes "helpless if I can't read...";
    close;

L_Glasses:
    mes "[Frank]";
    mes "Oh, you've brought me";
    mes "these Glasses. Thanks";
    mes "so much, youngster. Now that";
    mes "I can see better, what can";
    mes "I do for you in return?";
    delitem 2203,1;
    next;

L_Frank:
    menu "About Geffen's Hidden Power.",L_Power,"About Sobbing Starlight.",L_Star,"Interpret Ancient Document.",-;
    mes "[Frank]";
    mes "I don't believe it!";
    mes "This is... I see. You want me to";
    mes "translate this ancient language.";
    mes "Ah, you're rather fortunate. I'm";
    mes "probably the only person in the";
    mes "world who can translate this.";
    next;
    mes "[Frank]";
    mes "Hmm, as far as I can tell, this is";
    mes "a sophisticated language spoken by";
    mes "the ancient gods. It's complex and";
    mes "confusing, but I'll do my best for";
    mes "you. Come back to me later, and";
    mes "I'll tell you what I've learned.";
    set signquest,30;
    close;

L_Power:
    mes "[Frank]";
    mes "Geffen's hidden power?";
    mes "I don't know much about it, but I'm";
    mes "sure that Geffen Tower is more than";
    mes "just a simple building. I'm sure it";
    mes "was created to restrain or contain";
    mes "some powerful force.";
    next;
    mes "[Frank]";
    mes "It's even possible that the";
    mes "fountain in front of Geffen Tower";
    mes "also plays the same role, but I've";
    mes "got no hard evidence. Since I'm not";
    mes "too interested in Geffen, I haven't";
    mes "really investigated...";
    next;
    mes "[Frank]";
    mes "Still...";
    mes "There's a strong possibility that";
    mes "some enormous power is being sealed";
    mes "beneath the Geffen Tower.";
    next;
    goto L_Frank;

L_Star:
    mes "[Frank]";
    mes "The Sobbing Starlight?";
    mes "To the experts, it's known as God's";
    mes "Tear Drop. Now, some believe it was";
    mes "created from the voice of God.";
    next;
    mes "[Frank]";
    mes "Of course, it probably isn't made";
    mes "from God's voice or tear drops but";
    mes "who knows? In any case, it's said";
    mes "that something's written in the";
    mes "Sobbing Starlight. What ever it is,";
    mes "it must be something important.";
    next;
    goto L_Frank;

L_Interpret:
    if (!rand(10)) {
        mes "[Frank]";
        mes "Well, I've written down the best";
        mes "translation that I could for you.";
        mes "It's been a long time since I've";
        mes "had this kind of challenge. Thanks,";
        mes "youngster.";
        mes "Ha ha ha~";
        delitem 7275,1;
        getitem 7274,1;
        set signquest,31;
        close;
    } else {
        mes "[Frank]";
        mes "I'm sorry, but I haven't finished";
        mes "translating this text. It's taking";
        mes "quite a long time since I don't";
        mes "have any reference material for";
        mes "this particular language. Why";
        mes "don't you come back later?";
        close;
    }

L_Done:
    mes "[Frank]";
    mes "There are many things out";
    mes "there that defy out understanding";
    mes "of the world and are beyond our";
    mes "imagination. Many fear the unknown";
    mes "but the truly brave will always";
    mes "seek out the truth.";
    close;
}


// Himinn Part & Valkyrie

gef_fild07,182,241,1	script	#himinnwarper	111,1,1,{

	if(signquest == 31 && countitem(7013) > 364 && countitem(953) > 11 && countitem(907) > 3) goto L_FirstClick;
	end;

L_FirstClick:
	mes "^657540It seems that";
	mes "something in the";
	mes "vicinity is reacting";
	mes "with the Sobbing Starlight";
	mes "in your possession. Perhaps";
	mes "you can find it nearby...^000000";
	close;

OnTouch:
	if(signquest > 31) goto L_Warp;
	if(signquest == 31 && countitem(7013) > 364 && countitem(953) > 11 && countitem(907) > 3) goto L_FirstTouch;
	end;

L_FirstTouch:
	mes "[" + strcharinfo(0) + "]";
	mes "What the...?";
	mes "What's happening?!";
	next;
	specialeffect2 9;
	mes "^3355FFFor some reason, in";
	mes "this particular spot, the";
	mes "Sobbing Starlight is reacting";
	mes "wit the Resin, Stone Hearts";
	mes "and Coral Reefs that you're";
	mes "holding. All the objects are";
	mes "violently resonating";
	next;
	specialeffect2 99;
	mes "All of a sudden these";
	mes "objects emit a bright flash";
	mes "of light that envelops your";
	mes "entire body, then you gently";
	mes "fall into unconsciousness...";
	close2;
	set signquest,32;
	delitem 7013,365;
	delitem 953,12;
	delitem 907,4;

L_Warp:
	warp "himinn",49,10;
	end;
}

himinn,48,86,5	script	Valkyrie#2	811,{

	if(signquest == 58) goto L_Done;
	if(signquest > 51) goto L_Gods;
	if(signquest > 50) goto L_Help;
	if(signquest > 32) goto L_Duty;
	mes "[Valkyrie Sandra]";
	mes "Welcome, " + strcharinfo(0) + " ,";
	mes "to this realm of holiness.";
	mes "You have endured great difficulty";
	mes "and tested your courage to obtain";
	mes "the Sobbing Starlight, which will";
	mes "be the certificate for your test.";
	next;
	menu "Test...?",-;
	mes "[Valkyrie Sandra]";
	mes "The gods have decided that";
	mes "you are worthy of undergoing";
	mes "a special test that will judge";
	mes "your merits. If you are a true";
	mes "hero who is pure of heart,";
	mes "you will certainly succeed...";
	next;
	mes "[Valkyrie Sandra]";
	mes "Now, there is a critical";
	mes "situation in the ^FF0000realm where";
	mes "the fallen warriors dwell^000000. The";
	mes "gods wish for you to restore the";
	mes "balance by quelling a specific";
	mes "evil influence in that place.";
	next;
	mes "[Valkyrie Sandra]";
	mes "There will be many obstacles.";
	mes "First, the fallen, who will target";
	mes "their anger and hatred towards";
	mes "you. Where they have failed to";
	mes "enter Valhalla, you have a rare";
	mes "and wondrous opportunity.";
	next;
	mes "[Valkyrie Sandra]";
	mes "Secondly, and more";
	mes "importantly, you must find";
	mes "this evil influence on your";
	mes "own. This will judge your";
	mes "ability to discern good from";
	mes "evil. Do not trust appearances...";
	next;
	mes "[Valkyrie Sandra]";
	mes "This is your task.";
	mes "I can't tell you more.";
	mes "It is now your duty to";
	mes "travel there and ferret";
	mes "out true darkness from";
	mes "one of the hearts there...";
	if(signquest==32)set signquest,33;
	close2;
	warp "geffen",120,100;
	end;

L_Duty:
	mes "[Valkyrie Sandra]";
	mes "I commend your ability";
	mes "to survive in the realm";
	mes "of the dead. I imagine it";
	mes "must be very difficult for";
	mes "a mortal to endure its cruelty.";
	close;

L_Help:
	mes "[Valkyrie Sandra]";
	mes "Regrettably, I can't really";
	mes "provide any answers for you.";
	mes "You must overcome the ordeals";
	mes "of the gods on your own. All I can";
	mes "do is offer my guidance and prayer.";
	next;
	mes "[Valkyrie Sandra]";
	mes "Remember that the";
	mes "demonstration of your belief,";
	mes "rather than the decision to";
	mes "blindly adhere to faith, is";
	mes "what the gods want to see.";
	next;
	mes "[Valkyrie Sandra]";
	mes "Always step forward";
	mes "with wisdom and courage.";
	mes "That is all I can tell you.";
	set signquest,52;
	close;

L_Gods:
	mes "[Valkyrie Sandra]";
	mes "The gods are watching";
	mes "you. Prove your courage";
	mes "and at that moment, you";
	mes "will earn the honor of being";
	mes "selected by the gods.";
	close;

L_Done:
	mes "[Valkyrie Sandra]";
	mes "Welcome back.";
	mes "Not only have you passed the trials";
	mes "that the gods have set for you, you";
	mes "have tested your courage in the";
	mes "realm of the dead and protected";
	mes "Rune-Midgard from attack.";
	next;
	mes "[Valkyrie Sandra]";
	mes "I'm pleased to announce that the";
	mes "gods have been watching you and";
	mes "decided to invite you to Valhalla.";
	mes "However, Rune-Midgard still has";
	mes "great need of you.";
	next;
	mes "[Valkyrie Sandra]";
	mes "As a symbol of this promise to";
	mes "invite you to Valhalla, you shall";
	mes "be rewarded with 'The Sign' which";
	mes "will show all others that you are";
	mes "a great warrior whose courage was";
	mes "tested by the gods themselves.";
	next;
	mes "[Valkyrie Sandra]";
	mes "Congratulations,";
	mes "" + strcharinfo(0) + ". Verily,";
	mes "you are an honorable";
	mes "hero worthy of praise!";
	getitem 2644,1;
	set signquest,59;
	close;
}

// Niflheim Part & Realm of the Dead

niflheim,102,54,4	script	Mad Man	739,{

	if(signquest > 53) goto L_Queen;
	if(signlaichin == 4) goto L_Where1;
	if(signlaichin == 3) goto L_Seal;
	if(signlaichin == 2) goto L_Direction;
	if(signlaichin == 1) goto L_Risk;
	if(signquest == 52) goto L_Help;
	if(signquest) goto L_Asgard;
	mes "[Laichin]";
	mes "What? I look familiar to you?";
	mes "Eh, you know what they say.";
	mes "Everyone has a lookalike in the";
	mes "world somewhere. Am I right";
	mes "or am I am right?";
	close;

L_Asgard:
	mes "[Laichin]";
	mes "Niflheim ain't such a bad";
	mes "place to live. Sure, Asgard's";
	mes "all pretty and stuff, but there's";
	mes "too many rules. In this place, you";
	mes "can enjoy a lot more freedom. After";
	mes "you get used to all the stink.";
	next;
	mes "[Laichin]";
	mes "Did I say 'stink'?";
	mes "I meant... 'fragrance'.";
	mes "Alright, so the gods expelled";
	mes "me, but I really oughtta thank";
	mes "'em for sending me here!";
	next;
	mes "[Laichin]";
	mes "What's that look for...?";
	mes "What, you can't believe";
	mes "that someone like me used";
	mes "to live in Valhalla? Me neither!";
	mes "They really made a mistake when";
	mes "they put me up to live in Asgard!";
	close;

L_Help:
	mes "[Laichin]";
	mes "Angrboda...?";
	mes "Yeah, yeah!";
	mes "I remember hearing something";
	mes "about her when I usedta hang";
	mes "with the gods up in Asgard.";
	next;
	mes "[Laichin]";
	mes "Yeah, those guys were pretty";
	mes "gangster about it. I mean, they";
	mes "took her soul, broke it in four";
	mes "pieces and stashed them in the";
	mes "deepest hole in Rune-Midgard.";
	next;
	mes "[Laichin]";
	mes "Sure, she was a giant, but";
	mes "they were pretty scared of her.";
	mes "All her children ended up to be";
	mes "legendary monsters! Well, I'm";
	mes "not sure if Lady Hell counts.";
	next;
	mes "[Laichin]";
	mes "That's pretty harsh.";
	mes "I mean, even if you die,";
	mes "your soul has no place";
	mes "to rest. Angrboda's soul is";
	mes "all cut up and stuff!";
	next;
	menu "So where are the soul pieces again?",-;
	mes "[Laichin]";
	mes "What...? I just said,";
	mes "the deepest place";
	mes "underground in Rune-Midgard.";
	mes "It's a dangerous joint";
	mes "protected by gangs";
	mes "of monsters.";
	next;
	mes "[Laichin]";
	mes "Wait, you're tellin' me";
	mes "that you're gonna find";
	mes "all of Angrboda's soul?!";
	mes "You're crazy! If they end up";
	mes "missing, the gods'll know I was";
	mes "the one who tipped you off!";
	set signlaichin,1;
	next;

L_Risk:
	mes "[Laichin]";
	mes "If I was gonna risk my soul,";
	mes "I'd wanna enjoy the rest of my";
	mes "afterlife as much as I could";
	mes "before the gods offed me. Man,";
	mes "I'd need at least 40.000 Zeny to";
	mes "even have a decent time...";
	next;
	menu "Pay Laichin 40.000 Zeny.",-,"Don't pay Laichin.",L_Pay;
	if(Zeny < 40000) goto L_NotEnough;
//Settings for the 4 seals you will have to break
Seal1:
	set Sign_Seal1,rand(1,8);
Seal2:
	set Sign_Seal2,rand(1,8);
	if(Sign_Seal2 == Sign_Seal1) goto Seal2;
Seal3:
	set Sign_Seal3,rand(1,8);
	if(Sign_Seal3 == Sign_Seal1 || Sign_Seal3 == Sign_Seal2) goto Seal3;
Seal4:
	set Sign_Seal4,rand(1,8);
	if(Sign_Seal4 == Sign_Seal1 || Sign_Seal4 == Sign_Seal2 || Sign_Seal4 == Sign_Seal3) goto Seal4;
//End of settings
	mes "[Laichin]";
	mes "Now we're talkin'!";
	mes "You're a true hero!";
	mes "Right, you gotta go to the";
	mes "lowest part of Glast Heim to";
	mes "find Angrboda's soul pieces.";
	next;
	mes "[Laichin]";
	mes "Check out the";
	set @signseal,1;
	callfunc "Sign_Seal";
	set @signseal,2;
	callfunc "Sign_Seal";
	set @signseal,3;
	callfunc "Sign_Seal";
	set @signseal,4;
	callfunc "Sign_Seal";
	mes "" + Sign_Seal1$ + ",";
	mes "" + Sign_Seal2$ + ",";
	mes "" + Sign_Seal3$ + " and the";
	mes "" + Sign_Seal4$ + ".";
	next;
	mes "[Laichin]";
	mes "Her soul pieces are really";
	mes "well hidden, so you gotta look";
	mes "around, even if know the";
	mes "general location, and don't";
	mes "tell anyone else about these";
	mes "locations or there'll be trouble.";
	next;
	menu "I promise.",-,"What do you mean by big and small?",L_Mean;
	set Zeny,Zeny - 40000;
	set signlaichin,2;
	close;

L_Mean:
	mes "[Laichin]";
	mes "What do I mean by";
	mes "big and small? Hey man,";
	mes "the answer to that is worth";
	mes "at least... 20.000 Zeny.";
	mes "If you wanna know,";
	mes "cough up the cash!";
	next;

L_Pay2:
	menu "Don't pay him.",L_NoPay,"Pay him.",-;
	if(signlaichin != 2) set Zeny,Zeny - 40000;
	if(Zeny < 20000) goto L_NotEnough2;
	mes "[Laichin]";
	mes "Alright, listen up.";
	mes "Big, small and very small";
	mes "mean the distances from the";
	mes "center of the map. So for big,";
	mes "I mean look near the border of";
	mes "the map. Easy, huh?";
	next;
	mes "[Laichin]";
	mes "When I say small, you";
	mes "gotta look in areas closer";
	mes "than the borders of the map.";
	mes "For very small, you gotta";
	mes "look near the center, got it?";
	set Zeny,Zeny - 20000;
	set signquest,53;
	set brokenseal,1;
	set signlaichin,3;
	close;

L_Pay:
	mes "[Laichin]";
	mes "Huh...?";
	mes "Okay pal.";
	close;

L_NotEnough:
	mes "[Laichin]";
	mes "Hey...";
	mes "This is sooo";
	mes "not enough money";
	mes "for me to enjoy myself";
	mes "if my soul ends up getting";
	mes "busted by the gods.";
	close;

L_NoPay:
	mes "[Laichin]";
	mes "Fine, fine.";
	mes "Just don't come";
	mes "crawling back when";
	mes "you can't figure out";
	mes "where the soul pieces are.";
	if(signlaichin != 2) set Zeny,Zeny - 40000;
	set signlaichin,2;
	close;

L_Direction:
	mes "[Laichin]";
	mes "Oh yeah, about those";
	mes "directions I gave you";
	mes "last time? They work,";
	mes "but you gotta know what I mean";
	mes "by 'big' or 'small' whatever";
	mes "o'clock means. That's right...";
	next;
	mes "[Laichin]";
	mes "Matter of fact, I'll";
	mes "tell you about it.";
	mes "Right after you pay me,";
	mes "oh, I don't know, ^FF000020.000 zeny^000000.";
	next;
	goto L_Pay2;

L_NotEnough2:
	mes "[Laichin]";
	mes "What is this?";
	mes "You tryin to wetch";
	mes "me or somethin'?";
	set signlaichin,2;
	close;

L_Seal:
	mes "[Laichin]";
	mes "Oh yeah, Uh, I forgot to tell";
	mes "you that Angrboda's soul pieces are";
	mes "sealed with the power of the gods.";
	mes "You can't just smash them open.";
	next;
	mes "[Laichin]";
	mes "...Or maybe you could.";
	mes "Anyway, it'll be better";
	mes "if you had a weapon that";
	mes "was solid, heavy and powerful.";
	next;
	mes "[Laichin]";
	mes "But yeah, think about";
	mes "what it means to break";
	mes "a godly seal. Remember there's";
	mes "^FF0000some kinda rule^000000 that the gods";
	mes "imposed which you gotta follow";
	mes "to release Angrboda's soul.";
	next;

L_Info:
	mes "[Laichin]";
	mes "Ah, right. If you wanna";
	mes "try different weapons for";
	mes "breaking those seals, make";
	mes "sure you got 'em in your";
	mes "inventory and that they're";
	mes "not equipped, alright?";
	next;
	menu "Thanks~",-,"Where am I supposed to go again?",L_Where;
	mes "[Laichin]";
	mes "Oh no...";
	mes "Thank you for all";
	mes "of this Zeny. Money";
	mes "might not be able to";
	mes "buy happiness but it";
	mes "sure comes real close!";
	set signlaichin,4;
	close;

L_Where:
	mes "[Laichin]";
	mes "Hey... You gotta go";
	mes "to the lowest part";
	mes "of Glast Heim to find all";
	mes "of Angrboda's soul pieces.";
	mes "Once you get there...";
	next;

L_Where1:
	mes "[Laichin]";
	mes "Check out the";
	mes "" + Sign_Seal1$ + ",";
	mes "" + Sign_Seal2$ + ",";
	mes "" + Sign_Seal3$ + " and the";
	mes "" + Sign_Seal4$ + ".";
	mes "And break those seals";
	mes "in that order, okay?";
	next;
	if(signlaichin == 4) goto L_Info;
	mes "[Laichin]";
	mes "Big, small and very small";
	mes "mean the distances from the";
	mes "center of the map. So for big,";
	mes "I mean look near the border of";
	mes "the map. Easy, huh?";
	next;
	mes "[Laichin]";
	mes "When I say small, you";
	mes "gotta look in areas closer";
	mes "than the borders of the map.";
	mes "For very small, you gotta";
	mes "look near the center, got it?";
	set signlaichin,4;
	close;

L_Queen:
	mes "[Laichin]";
	mes "Dude, Niflheim rocks.";
	mes "It's like, a million times";
	mes "better than the boring";
	mes "old Asgard. Hell yeah!";
	next;
	mes "[Laichin]";
	mes "Eh, I don't even wanna";
	mes "know if you manage to";
	mes "find all of Angrboda's soul";
	mes "pieces, but if you do, don't";
	mes "go bringin' close to me. If the";
	mes "gods find out you have 'em...";
	next;
	mes "[Laichin]";
	mes "But for the sake of";
	mes "argument, let's say you";
	mes "do happen to get them all.";
	mes "In that case, you oughta get";
	mes "Angrboda's soul to the Queen";
	mes "of Hell right away, alright?";
	next;
	mes "[Laichin]";
	mes "Ooh... But not just any";
	mes "yahoo can waltz up to her.";
	mes "The best thing would be to";
	mes "give it to one of her really";
	mes "trusted retainers, I guess.";
	mes "Now, who was he again?";
	next;
	mes "[Laichin]";
	mes "I know he's always in";
	mes "disguise as some sorta";
	mes "really ^C9CACBdespressing guy^000000";
	mes "and I can't remember his";
	mes "name for the life of me, but";
	mes "he's around here somewhere...";
	close;
}

function	script	Sign_Seal	{

    if (@signseal == 1) {
        if (Sign_Seal1 == 1) set Sign_Seal1$,"big 1 o'clock";
        if (Sign_Seal1 == 2) set Sign_Seal1$,"big 4 o'clock";
        if (Sign_Seal1 == 3) set Sign_Seal1$,"big 5 o'clock";
        if (Sign_Seal1 == 4) set Sign_Seal1$,"small 6 o'clock";
        if (Sign_Seal1 == 5) set Sign_Seal1$,"big 7 o'clock";
        if (Sign_Seal1 == 6) set Sign_Seal1$,"very small 11 o'clock";
        if (Sign_Seal1 == 7) set Sign_Seal1$,"big 11 o'clock";
        if (Sign_Seal1 == 8) set Sign_Seal1$,"small 11 o'clock";
    }
    if (@signseal == 2) {
        if (Sign_Seal2 == 1) set Sign_Seal2$,"big 1 o'clock";
        if (Sign_Seal2 == 2) set Sign_Seal2$,"big 4 o'clock";
        if (Sign_Seal2 == 3) set Sign_Seal2$,"big 5 o'clock";
        if (Sign_Seal2 == 4) set Sign_Seal2$,"small 6 o'clock";
        if (Sign_Seal2 == 5) set Sign_Seal2$,"big 7 o'clock";
        if (Sign_Seal2 == 6) set Sign_Seal2$,"very small 11 o'clock";
        if (Sign_Seal2 == 7) set Sign_Seal2$,"big 11 o'clock";
        if (Sign_Seal2 == 8) set Sign_Seal2$,"small 11 o'clock";
    }
    if (@signseal == 3) {
        if (Sign_Seal3 == 1) set Sign_Seal3$,"big 1 o'clock";
        if (Sign_Seal3 == 2) set Sign_Seal3$,"big 4 o'clock";
        if (Sign_Seal3 == 3) set Sign_Seal3$,"big 5 o'clock";
        if (Sign_Seal3 == 4) set Sign_Seal3$,"small 6 o'clock";
        if (Sign_Seal3 == 5) set Sign_Seal3$,"big 7 o'clock";
        if (Sign_Seal3 == 6) set Sign_Seal3$,"very small 11 o'clock";
        if (Sign_Seal3 == 7) set Sign_Seal3$,"big 11 o'clock";
        if (Sign_Seal3 == 8) set Sign_Seal3$,"small 11 o'clock";
    }
    if (@signseal == 4) {
        if (Sign_Seal4 == 1) set Sign_Seal4$,"big 1 o'clock";
        if (Sign_Seal4 == 2) set Sign_Seal4$,"big 4 o'clock";
        if (Sign_Seal4 == 3) set Sign_Seal4$,"big 5 o'clock";
        if (Sign_Seal4 == 4) set Sign_Seal4$,"small 6 o'clock";
        if (Sign_Seal4 == 5) set Sign_Seal4$,"big 7 o'clock";
        if (Sign_Seal4 == 6) set Sign_Seal4$,"very small 11 o'clock";
        if (Sign_Seal4 == 7) set Sign_Seal4$,"big 11 o'clock";
        if (Sign_Seal4 == 8) set Sign_Seal4$,"small 11 o'clock";
    }
    return;
}


niflheim,313,70,3	script	Pleasant-Featured Lady	90,{

    if (signquest > 56) goto L_Souvenir;
    if (signquest > 55) goto L_NoWord;
    if (Sign_Branch8A) goto L_Memory;
    if (Sign_Branch8B) goto L_BranchB;
    if (signquest > 54 && countitem(7305)) goto L_Give;
    if (signquest > 50) goto L_Symbol;
    if (signquest > 49) goto L_Valkyrie;
    if (signquest > 48) goto L_Info;
    if (signquest > 47) goto L_Look;
    if (signquest > 43) goto L_Survive;
    if (signquest > 42) goto L_Bard;
    if (signquest == 42) goto L_Thanks;
    if (signquest > 33) goto L_Help;
    if (Sign_Branch2B) goto L_Advice;
    if (signquest > 32) goto L_Sign;
    mes "[Serin]";
    mes "I'm sorry,";
    mes "but you're not";
    mes "the person I'm";
    mes "looking for. No...";
    close;

L_Sign:
    mes "[Serin]";
    mes "Kind adventurer...";
    mes "You're the one I'm looking";
    mes "for, the one who's been on a";
    mes "long journey to prove";
    mes "his courage.";
    next;
    mes "[Serin]";
    mes "Even in the darkness of";
    mes "Niflheim, I can recognize";
    mes "you. You shine out to me like";
    mes "a star! I beg of you, please";
    mes "listen to my story...";
    next;
    menu "I'm busy, sorry.",-,"Sure, go ahead.",L_Listen;

L_Sorry:
    mes "[Serin]";
    mes "I know I can't stop";
    mes "you from pursuing your";
    mes "path to glory. But if you";
    mes "should change your mind...!";
    close;

L_Listen:
    mes "[Serin]";
    mes "Thank you...";
    mes "Now, if you've heard";
    mes "from the others and as";
    mes "you can tell by my appearance";
    mes "I clearly don't belong here.";
    next;
    mes "[Serin]";
    mes "I might not have";
    mes "the luck to be selected";
    mes "by Valkyrie, but I need";
    mes "your help to get out of";
    mes "here as soon as I can~";
    next;
    menu "Er, I'm busy, now that I think about it.",L_Sorry,"Sure, let's do it.",-;
    mes "[Serin]";
    mes "I know I'm asking too much";
    mes "of you, but if you'd also help";
    mes "the other infortunate souls in";
    mes "this place, I'd be truly grateful.";
    mes "Somehow, I think solving their";
    mes "problems will help me get back.";
    next;
    menu "Sure, why not?",-,"Why should I help them?",L_Why;
    mes "[Serin]";
    mes "I knew you'd understand!";
    mes "You really are a kind person .";
    mes "Now, in order to help the other";
    mes "misfortunate in Niflheim, you've";
    mes "got to remember to gain their trust";
    mes "first and get close to them, okay?";
    set signquest,34;
    close;

L_Help:
    mes "[Serin]";
    mes "Hmm...?";
    mes "You don't know which";
    mes "people you need to help";
    mes "here in Niflheim? Mmm,";
    mes "let me think about it...";
    next;
    mes "[Serin]";
    mes "In this doomed place";
    mes "there isn't too much trust";
    mes "amongst some of the people";
    mes "here, but some will share their";
    mes "problems if you ^5131FFapproach them";
    mes "closely, face to face.^000000 Okay?";
    next;
    mes "[Serin]";
    mes "In this way, if they talk";
    mes "to you first, they might";
    mes "be more willing to accept";
    mes "help or tell you what you";
    mes "really need to know.";
    mes "I hope this helps...";
    close;

L_Thanks:
    mes "[Serin]";
    mes "Thank you so much for";
    mes "your help. This is all I have,";
    mes "and it means a lot to me, but";
    mes "I want you to have this ring. It's";
    mes "the only way I can properly express";
    mes "my gratitude for your aid so far.";
    getitem 2642,1;
    set signquest,43;
    close;

L_Bard:
    mes "[Serin]";
    mes "There's a Bard in";
    mes "Niflheim with a very";
    mes "sweet, yet melancholy voice.";
    mes "He sings for strangers just";
    mes "like you, adventurer.";
    next;
    mes "[Serin]";
    mes "I think he might know";
    mes "some useful information,";
    mes "so it might be a good";
    mes "idea to speak with him.";
    set signquest,44;
    close;

L_Survive:
    mes "[Serin]";
    mes "Hello, " + strcharinfo(0) + ",";
    mes "I'm surprised that";
    mes "you've managed to survive";
    mes "here all this time. It's no small";
    mes "feat for a mortal to be able to";
    mes "remain alive in Niflheim...";
    close;

L_Look:
    mes "[Serin]";
    mes "Ah, " + strcharinfo(0) + "~";
    mes "How is everything?";
    mes "Once again, I want to";
    mes "thank you for helping the";
    mes "poor souls in this place.";
    next;
    mes "[Serin]";
    mes "Hmm...?";
    mes "What's with that";
    mes "look on your face?";
    mes "Do you have something";
    mes "you want to ask me?";
    next;
    menu "Nothing.",-,"About the Queen of the Dead...",L_Queen;
    mes "[Serin]";
    mes "Well, if you ever";
    mes "need my help, please";
    mes "don't hesitate to ask.";
    close;

L_Queen:
    mes "[Serin]";
    mes "The Queen of the Dead?";
    mes "Well, she's the ruler of Niflheim.";
    mes "As Loki and Angrboda's last child";
    mes "she was given complete control of";
    mes "this realm by Odin.";
    next;
    mes "[Serin]";
    mes "She usually rules from her";
    mes "castle, Hell, but sometimes she";
    mes "goes out to tour Niflheim. That's";
    mes "all I really know about her.";
    next;
    menu "About the Symbol of Nine Realms",-;
    mes "[Serin]";
    mes "Oh that...?";
    mes "Sometimes it's called";
    mes "the Voucher of the Dead";
    mes "Odin gave it to the Queen";
    mes "of the Dead to signify her";
    mes "authority over Niflheim.";
    next;
    mes "[Serin]";
    mes "There are many rumors";
    mes "floating around about that";
    mes "and its abilities, but";
    mes "all we know for sure is that it can";
    mes "be used to command the dead...";
    next;
    menu "About Angrboda",-;
    mes "[Serin]";
    mes "Angrboda...?";
    mes "She's the mother of the";
    mes "Queen of Hell, as well as";
    mes "some of the most powerful";
    mes "monsters in this universe.";
    next;
    mes "[Serin]";
    mes "The gods feared her monstrous";
    mes "children so much that they bound";
    mes "them and sealed Angrboda away.";
    mes "Nothing has been heard";
    mes "of her since...";
    next;
    menu "I was told by the Witch that you're...",-;
    mes "[Serin]";
    mes "Oh, the Witch was";
    mes "talking about me? I'm";
    mes "aware that she doesn't";
    mes "think very highly of me.";
    mes "Then again, it's not like";
    mes "I can trust her either.";
    next;
    mes "[Serin]";
    mes "Well, it can't be helped.";
    mes "At least we both agree that";
    mes "somehow I don't really belong";
    mes "here in Niflheim.";
    emotion e_dots;
    set signquest,49;
    close;

L_Info:
    mes "[Serin]";
    mes "I'm sorry that I sort of";
    mes "rambling on and on that last";
    mes "time we spoke. Now that I think";
    mes "about it, I didn't really give you";
    mes "any information that might have";
    mes "been very useful to you.";
    next;
    mes "[Serin]";
    mes "But lately, I've heard that the";
    mes "Queen of the Dead is seeking her";
    mes "mother, Angrboda. It's strange that";
    mes "even the queen, with all her";
    mes "power, is unable to find her.";
    next;
    mes "[Serin]";
    mes "I have no idea how,";
    mes "but it seems that Angrboda";
    mes "have been sealed away in the";
    mes "world of Rune-Midgard...";
    emotion e_dots;
    set signquest,50;
    close;

L_Valkyrie:
    mes "[Serin]";
    mes "I've told you";
    mes "everything I know.";
    mes "But if you want to learn more";
    mes "about Angrboda, you probably need";
    mes "to talk to someone who actually";
    mes "communicates with the gods.";
    next;
    mes "[Serin]";
    mes "Perhaps Valkyrie";
    mes "or someone who actually";
    mes "lived in Asgard may know";
    mes "more about where Angrboda";
    mes "is sealed away.";
    next;
    mes "[Serin]";
    mes "Also, why would you want";
    mes "the Symbol of the Nine Realms?";
    mes "It's a very dangerous object that";
    mes "could cause a lot of trouble if it";
    mes "fell into the wrong hands...";
    next;
    menu "What do you mean?",-,"Don't worry, I won't.",L_Noworry;
    mes "[Serin]";
    mes "There are plenty of dead";
    mes "people in Niflheim that are";
    mes "driven by regret and despair.";
    mes "The rage of being dead may result";
    mes "in some of them performing horrific";
    mes "deeds if they are the symbol.";
    next;
    menu "Then what should I do?",-,"Thanks for the concern, but I'm not worried.",L_Noworry;
    mes "[Serin]";
    mes "I really think that you";
    mes "should bring that symbol";
    mes "to me before you show it to anybody";
    mes "else. Then, I want you to know why";
    mes "I really need its power.";
    next;
    mes "[Serin]";
    mes "I can't explain myself";
    mes "now, but I want to use the";
    mes "power of the symbol to do";
    mes "something really helpful";
    mes "for you. You'll just need";
    mes "to trust me on this.";
    set signquest,51;
    next;

L_Symbol:
    mes "[Serin]";
    mes "If you obtain";
    mes "the Symbol of Nine Realms,";
    mes "please bring it to me";
    mes "right away, " +strcharinfo(0) + ".";
    close;

L_Noworry:
    mes "[Serin]";
    mes "Alright...";
    mes "It's your decision.";
    close;

L_Memory:
    mes "^3355FFThis is only";
    mes "a lingering trace";
    mes "of Serin, a manifestation";
    mes "of her definitive memory.";
    close;

L_NoWord:
    mes "[Serin]";
    mes "...";
    mes "......";
    close;
    
L_Souvenir:
	mes "[Serin]";
	mes "...";
	mes "......";
	next;
	mes "[Serin]";
	mes "...";
	mes "......";
	mes "..........";
	if (countitem(2643))
	{
		next;
		switch( select( "Give Serin her ring.","Keep the ring." ) )
		{
			case 1:
				mes "[Serin]";
				mes "...";
				mes "......";
				mes ".............";
				next;
				mes "[Serin]";
				mes "...."+strcharinfo(0)+".....";
				mes "I don't want to forget you.";
				mes "I can forget my obsession with";
				mes "life and all my other memories,";
				mes "But if I can keep just one memory, I want it to be of your kindness.";
				next;
				mes "[Serin]";
				mes "Even now, you're still";
				mes "so very kind to me. Thank";
				mes "you for giving back my ring,";
				mes "my most precious possession.";
				mes "Thank you, thank you...";
				emotion e_sob;
				next;
				mes "^3355FFThe sound of Serin's voice";
				mes "softened and when it grew silent, her eyes blankly stared ahead as";
				mes "if she were in a trance. It looks like she has already forgotten";
				mes "everything...^000000";
				next;
				mes "^3355FFBut Serin has also been able";
				mes "to forget her sadness. The tears streaked across her cheeks and";
				mes "the faint smile on her lips tell you that her memories of you";
				mes "will always remain in her heart.^000000";
				delitem 2643,1;
				getexp 500000,0;
				close;

			case 2:
				emotion e_sob,0;
				close;
		}
	}
	else
	{
		emotion e_sob,0;
		close;
	}

L_Give:
	mes "[Serin]";
	mes "Yes...";
	mes "This is the Symbol of the";
	mes "Nine Realms. It only has enough";
	mes "power for one use, but it's still not easy to get this. Now, what were you planning to use this for?";
	next;
	select( "Tell her your story." );
	mes "[Serin]";
	mes "Ah, so you're here";
	mes "in Niflheim to overcome";
	mes "the ordeals of the gods and";
	mes "prove your courage to Valkyrie.";
	next;
	mes "[Serin]";
	mes "So wait...";
	mes "You've obtained that symbol";
	mes "just for that witch? This may";
	mes "seem rude, but I want to tell";
	mes "you exactly how I feel about her.";
	next;
	mes "[Serin]";
	mes "Isn't it suspicious that she";
	mes "hasn't explained her intentions to you? The Symbol of Nine Realms";
	mes "is one of the most powerful objects in Niflheim. Whatever she's planning has to be large scale.";
	next;
	mes "[Serin]";
	mes "Then, there's that Metz Brayde.";
	mes "Do you really believe that after he completes his research, he'll just give it back to you? You can't just trust someone to hold an object of enormous power and give it back!";
	next;
	switch( select( "W-what should I do?","I can't believe this!" ) )
	{
		case 1:
			mes "[Serin]";
			mes "Well, I can't really tell";
			mes "you what to do, but I don't think it's a good idea to let that witch have the Symbol of Nine Realms. There's no telling what she'll";
			mes "use its power for.";
			next;
			mes "[Serin]";
			mes "Actually...";
			mes "There is this rumor";
			mes "going around, but I don't";
			mes "know if you want to hear it...";
			next;
			switch( select( "Tell me the rumors about the witch","I don't want to hear." ) )
			{
				case 1:
					mes "[Serin]";
					mes "Well, I've heard that the witch has been hiding deep in Nifflheim and will only speak to those who pass her test. Apparently, she's been preparing some sort of ritual";
					mes "to gain more power...";
					next;
					mes "[Serin]";
					mes "It's almost too horrible";
					mes "to believe, but I think that";
					mes "she's preparing the ritual to";
					mes "summon Dark Lord, ruler of";
					mes "the Realm of Fiends.";
					next;
					select( "Dark Lord...?" );
					mes "[Serin]";
					mes "Well, most people don't";
					mes "know this, but Dark Lord";
					mes "comes from the Realm of Fiends.";
					mes "In his own domain, he's so powerful";
					mes "that even the gods fear his might.";
					next;
					mes "[Serin]";
					mes "Now, sometimes Dark Lord can";
					mes "enter the world of Rune-Midgard, but only in a manifestation that represents just a small portion";
					mes "of his full power.";
					next;
					mes "[Serin]";
					mes "You see, it takes too much energy to travel from the Realm of Fiends to Rune-Midgard. And since the life force in Rune-Midgard conflicts with his powers, Dark Lord has problems reaching your world directly.";
					next;
					select( "Wouldn't Lady Hell stop him?" );
					mes "[Serin]";
					mes "Well, Dark Lord only wants";
					mes "Rune-Midgard, so the Queen of the Dead doesn't feel threatened about her control of Niflheim.";
					next;
					mes "[Serin]";
					mes "In fact, I'm sure she's aware";
					mes "that Dark Lord will cause thousands of deaths in Rune-Midgard, meaning that there would be thousands more souls for her to rule over. So it's not to her advantage to stop him.";
					next;
					select( "Then what should we do...?" );
					mes "[Serin]";
					mes "No matter what the cost,";
					mes "we've got to stop her from";
					mes "summoning Dark Lord in order";
					mes "to protect Rune-Midgard from";
					mes "total annihiliation.";
					next;
					mes "[Serin]";
					mes "I used to be a pretty";
					mes "skilled Wizard, so I know";
					mes "that she needs to draw a really huge magic circle in Niflheim if she wants to summon Dark Lord.";
					next;
					select( "Can you tell me where?" );
					mes "[Serin]";
					mes "Well, there are certain rules";
					mes "and conditions to perform the summoning. There aren't any spaces wide enough in the Valley of Gyoll, and Nifflheim's entrance is watched by too many people...";
					next;
					mes "[Serin]";
					mes "Now, I were to summon";
					mes "Dark Lord, I would probably";
					mes "do it somewhere inside town";
					mes "to avoid attention. Hmmm...";
					mes "I'll send you there once I figure out where the circle might be.";
					set Sign_Branch8B,1;
					close;
					
				case 2:
					break;
			}
			
		case 2:
			mes "[Serin]";
			mes "I'm sorry if you were offended.";
			mes "I know I can't really convince you to believe anything, but please understand that I just don't want anyone to take advantage of you. Forgive my rudeness.";
			close;
	}
	
L_Keep:
    mes "[Serin]";
    mes "Ok, come back";
    mes "when you have realized";
    mes "this is the wisest choice";
    mes "to make.";
    close;

L_BranchB:
    mes "[Serin]";
    mes "I'll show you the way";
    mes "to their hope... Are you";
    mes "ready to come with me?";
    next;
    menu "Yes.",-,"No.",L_No;
    if (($signroom2full > 1) || getareausers("que_sign01",229,77,166,12) > 0) goto L_Full;
    if(Sign_Branch8B == 3) set Sign_Branch8B,4;
    mes "[Serin]";
    mes "Please follow me";
    mes "......";
    close2;
    if (($signroom2full > 1) || getareausers("que_sign01",229,77,166,12) > 0) end;
    donpcevent "#signserin2::OnSerin";
    donpcevent "#signserin2::OnCooldown";
    set $signroom2full,2;
    warp "que_sign01",191,39;
    end;


L_No:
    mes "[Serin]";
    mes "Please hurry, we don't";
    mes "have any time to lose.";
    close;

L_Why:
    mes "[Serin]";
    mes "Do you really need a";
    mes "reason ? Well... Maybe";
    mes "you're right, they don't";
    mes "deserve to be helped~";
    next;

L_Advice:
    mes "[Serin]";
    mes "I advise you to meet that";
    mes "depressing person in Niflheim.";
    mes "He'll probably tell you his story";
    mes "and you might understand...";
    mes "Yes... You should meet him.";
    if (!Sign_Branch2B) set Sign_Branch2B,1;
    close;

L_Full:
    mes "[Serin]";
    mes "Please wait";
    mes "a bit. I'm still";
    mes "trying to finish";
    mes "these preparations.";
    close;

}

nif_in,156,93,1	script	#signann	139,2,2,{

	if(signquest > 33) goto L_SignAnn;
	end;

L_SignAnn:
	if(signquest == 39) goto L_Sad;
	if(signquest == 38 && countitem(7309)) goto L_Crow;
	if(signquest == 36) goto L_Help;
	if(signquest > 34) goto L_Home;
	mes "[Alakina Ann]";
	mes "Where...Where am I...?";
	mes "I remember I was sleeping";
	mes "and when I woke up, I was here...";
	mes "Mommy, have you seen my mommy?";
	mes "I wanna go home...*Sob*";
	next;
	menu "About the witch.",L_Witch,"About the curse.",L_Curse,"Cancel",-;
	mes "[Alakina Ann]";
	mes "It's so cold in here...";
	mes "I'm freezing...";
	mes "And I wanna go home and";
	mes "get away from this scary place...";
	next;
	mes "[Alakina Ann]";
	mes "Please... help me.";
	mes "Could you take me with you...?";
	close;

L_Witch:
	mes "[Alakina Ann]";
	mes "Witch...? I've never seen a witch,";
	mes "but I've read about them in books.";
	mes "I'm not sure if they exist or not,";
	mes "but it would be so horrifying if";
	mes "they did...";
	next;
	mes "[Alakina Ann]";
	mes "Why is it so cold in here...?";
	mes "A-aren't you cold, or even scared?";
	mes "I wanna go home... It's warm over";
	mes "there. Could you help me get";
	mes "back... Please...? H-help me...";
	close;

L_Curse:
	mes "[Alakina Ann]";
	mes "A c-curse...?";
	mes "My grandma says there are lots";
	mes "of curses in the world. Some of";
	mes "them, you can tell it's a curse.";
	mes "But there are other curses that";
	mes "follow you throughout life...";
	next;
	mes "[Alakina Ann]";
	mes "Grandma says curses can take other";
	mes "forms... Like if someones's always";
	mes "mad at you, and won't forgive you,";
	mes "you can see that as a curse too.";
	next;
	mes "[Alakina Ann]";
	mes "My grandma told me there's only one";
	mes "spell that can break a strong curse";
	mes "that you can't lift with";
	mes "Blessings...";
	next;
	mes "[Alakina Ann]";
	mes "Klaatu...";
	mes "Verata...";
	mes "Ne...ni...umm...?";
	mes "What was the last part?";
	mes "I-I can't remember";
	mes "the last part of the spell!";
	next;
	mes "[Alakina Ann]";
	mes "If you repeat the spell in that";
	mes "order, it will release you from";
	mes "someone's anger and hate. And if";
	mes "you do it near a bad spirit, they";
	mes "might get the curse instead.";
	next;
	mes "[Alakina Ann]";
	mes "Why are you asking me about these";
	mes "scary kind of things...? I just";
	mes "wanna go home...";
	set signquest,35;
	close;

L_Home:
	mes "[Alakina Ann]";
	mes "*Cries*";
	mes "Where am I?";
	mes "I... I wanna go home~";
	emotion e_sob;
	close;

L_Help:
	mes "[Alakina Ann]";
	mes "W-Will you help me get";
	mes "back home? Please? I miss";
	mes "my mommy and my daddy and";
	mes "I don't know how I got here.";
	mes "*Snif*";
	next;
	menu "What can I do?",L_Ok,"You can't go back...",-;
	mes "[Alakina Ann]";
	mes "*Snif*";
	mes "N-no...";
	mes "I wanna go home...";
	close;

L_Ok:
	mes "[Alakina Ann]";
	mes "I dunno. I-I think a";
	mes "singing man told me to";
	mes "go meet a witch but it's";
	mes "too scary to go outside...";
	set signquest,37;
	close;

L_Crow:
	mes "[Alakina Ann]";
	mes "I... I can use";
	mes "this to go back home?";
	mes "Thank you! Thank you so much!";
	delitem 7309,1;
	set signquest,39;
	close;

L_Sad:
	mes "[Alakina Ann]";
	mes "Y-You lied to me!";
	mes "This wing doesn't do";
	mes "anything! I-I'm still here";
	mes "in this scary place! *Cries*";
	set signquest,40;
	close;

}

niflheim,350,258,1	script	#signbruce	139,2,2,{

	if(signquest == 35 || Sign_Branch2B == 3) goto L_SignBruce;
	end;

L_SignBruce:
	mes "[Ashe Bruce]";
	mes "I sense you're cursed";
	mes "by a powerful spell...";
	mes "Hmm... It's clear what";
	mes "you must be up to...";
	next;
	mes "[Ashe Bruce]";
	mes "You wish to get";
	mes "rid of the curse...";
	mes "By giving it to me!!";
	next;
	mes "[Ashe Bruce]";
	mes "Just because I'm a cursed spirit,";
	mes "you adventurers think you can just";
	mes "dump your curses on me?!";
	emotion e_dots;
	next;
	mes "[Ashe Bruce]";
	mes "I refuse to let";
	mes "you remain there...";
	mes "Leave now, or I will";
	mes "remove you by force...";
	next;
	mes "[Ashe Bruce]";
	mes "...And...";
	mes "...Whatever you do...";
	mes "...Do NOT touch my books...";
	next;
	menu "Touch the 1st book.",L_Book1,"Touch the 2nd Book.",L_Book2,"Touch the 3rd book",L_Book3,"Okay, I am leaving.",-;
	mes "[Ashe Bruce]";
	mes "...";
	mes ".....";
	next;
	mes "[Ashe Bruce]";
	mes "Well then.";
	mes "Try not to trip on";
	mes "your feet in your";
	mes "rush to leave.";
	close;

L_Book1:
	mes "[Ashe Bruce]";
	mes "...!...";
	mes "How dare you touch my books";
	mes "when I specifically said";
	mes "'Don't touch my books!'";
	killmonster "niflheim","#signbruce::Onmymob";
	monster "niflheim",350,258,"Rideword",1478,1,"#signbruce::Onmymob";
	close;

L_Book2:
	mes "[Ashe Bruce]";
	mes "I said don't touch my booksssahhh...";
	mes "Get lost....";
	mes "Don't disrupt my restingggaaahh!!";
	close2;
	warp "niflheim",34,162;
	end;

L_Book3:
	set @signbruce,0;
	mes "[Ashe Bruce]";
	mes "Muhahahaha...";
	mes "Stubborn mortal~!";
	mes "Fine! I will give you";
	mes "a fighting chance and let";
	mes "you cast a spell!";
	next;
L_Spell1:
	menu "Clover",L_Spell2,"Klaatu",-,"Kleitos",L_Spell2;
	set @signbruce,@signbruce + 1;

L_Spell2:
	menu "Verit",L_Spell3,"Veritas",L_Spell3,"Verata",-;
	set @signbruce,@signbruce + 1;

L_Spell3:
	menu "Necktie",L_Check,"Necklace",L_Check,"Nero",L_Check,"^FFFFFFNictu^000000",-;
	set @signbruce,@signbruce + 1;

L_Check:
	if (@signbruce == 3) goto L_Success;
	mes "[Ashe Bruce]";
	mes "Muhahahahahaha!";
	mes "That's not the right spell!";
	mes "Now death awaits you!";
	killmonster "niflheim","#signbruce::Onmymob";
	monster "niflheim",349,256,"Orc Skeleton",1462,1,"#signbruce::Onmymob";
	monster "niflheim",347,258,"Orc Skeleton",1462,1,"#signbruce::Onmymob";
	monster "niflheim",347,254,"Orc Skeleton",1462,1,"#signbruce::Onmymob";
	monster "niflheim",350,252,"Orc Skeleton",1462,1,"#signbruce::Onmymob";
	monster "niflheim",344,255,"Orc Skeleton",1462,1,"#signbruce::Onmymob";
	monster "niflheim",348,252,"Orc Skeleton",1462,1,"#signbruce::Onmymob";
	monster "niflheim",347,259,"Orc Skeleton",1462,1,"#signbruce::Onmymob";
	close;

L_Success:
	mes "[Ashe Bruce]";
	mes "That spell...";
	mes "You removed my curse?";
	mes "I don't believe it. I'm free!";
	next;
	mes "[Ashe Bruce]";
	mes "But do not underestimate";
	mes "my awesome powers! In fact,";
	mes "I command you to take this";
	mes "book and give it to that";
	mes "weak, pathetic witch!";
	if(signquest == 35) set signquest,36;
	if(Sign_Branch2B == 3) set Sign_Branch2B,4;
	getitem 7304,1;
	close;

Onmymob:
	end;

}
	
nif_in,188,168,1	script	#signwitch	139,2,2,{

	if(signquest > 36) goto L_SignWitch;
	if(Sign_Branch2B > 1) goto L_Book;
	end;

L_SignWitch:
	if(signquest > 55 || sign_fail) end;
	if(Sign_Branch8A || Sign_Branch8B || countitem(7305)) goto L_Privacy;
	if(signquest > 46) goto L_Help;
	if(signquest > 45) goto L_Courage;
	if(signquest > 41) goto L_Think;
	if(signquest > 40) goto L_Tragic;
	if(signquest > 39) goto L_Crow;
	if(signquest > 37 || !countitem(7304)) end;
	mes "[Kirkena]";
	mes "W-what's this?";
	mes "Why is it that";
	mes "you have one of";
	mes "my lost spell books?";
	next;
	menu "From a cursed soul...",-;
	mes "[Kirkena]";
	mes "Oh. That bastard must have";
	mes "stolen my spell books and got";
	mes "cursed when he cast the spells";
	mes "without my permission. Still, it's";
	mes "a relief to have my spells back.";
	delitem 7304,1;
	next;
	mes "[Kirkena]";
	mes "So mortal...";
	mes "You must be here for";
	mes "some reason. Speak";
	mes "your mind.";
	next;
	menu "Send me back to my world.",-,"There's a lost child here that I want to help...",L_Child;
	mes "[Kirkena]";
	mes "Alright, you made the";
	mes "good choice... I mean...";
	mes "for your life...";
	close2;
	warp "umbala",138,208;
	end;

L_Child:
	mes "[Kirkena]";
	mes "There's a living child?";
	mes "Here in Niflheim? That's";
	mes "most peculiar. Well, let me";
	mes "give you this. It will send";
	mes "a living human back to one";
	mes "of the towns in your realm.";
	set signquest,38;
	getitem 7309,1;
	close;

L_Crow:
	mes "[Kirkena]";
	mes "So did you already";
	mes "use the wing to save";
	mes "that poor, lost child?";
	next;
	mes "[Kirkena]";
	mes "What...?!";
	mes "It didn't work?";
	mes "That's impossible!";
	mes "Wait, give me a moment to";
	mes "think. What could be wrong?";
	set signquest,41;
	close;

L_Tragic:
	mes "[Kirkena]";
	mes "Alright.";
	mes "Now I understand";
	mes "why the wing didn't work";
	mes "for that poor girl...";
	next;
	mes "[Kirkena]";
	mes "She's so young that";
	mes "she doesn't even know";
	mes "that she's dead. It's tragic,";
	mes "but there's no way for her";
	mes "to get out of here...";
	set signquest,42;
	close;

L_Think:
	mes "[Kirkena]";
	mes "When people don't fully";
	mes "know the situation that";
	mes "they're in, they become more";
	mes "willing to take their chances.";
	close;

L_Courage:
	mes "[Kirkena]";
	mes "As I expected,";
	mes "there is something behind";
	mes "all of this. Now, you may";
	mes "know where you are, but";
	mes "do you understand why the";
	mes "dead are here?";
	next;
	mes "[Kirkena]";
	mes "This realm is a place";
	mes "for warriors that have failed";
	mes "to prove their courage. Keep in";
	mes "mind that it's not too late for";
	mes "you to join their ranks.";
	next;
	mes "[Kirkena]";
	mes "The realm of Niflheim";
	mes "is ruled by the Queen of the";
	mes "Dead. Sometimes she appears";
	mes "in her shining armor and makes the";
	mes "rounds. Everyone who sees her is";
	mes "stunned by the image of authority.";
	next;
	mes "[Kirkena]";
	mes "Now...";
	mes "What I need you to do is";
	mes "ask the Queen of the Dead";
	mes "for the Symbol of Nine Realms.";
	next;
	menu "What is that?",-;
	mes "[Kirkena]";
	mes "The symbol acts";
	mes "as a voucher of the queen's";
	mes "authority and represents her";
	mes "undeniable right to rule over";
	mes "the dead. But right now, I can't";
	mes "explain why I need it.";
	next;
	mes "[Kirkena]";
	mes "I'll tell you why I need";
	mes "it once you bring me the";
	mes "queen's symbol. Now, please";
	mes "keep this secret and tell no one";
	mes "that I asked you to bring the";
	mes "symbol to me.";
	set signquest,47;
	next;
	menu "Alright, I understand.",-,"How am I supposed to get the symbol?",L_Symbol;
	close;

L_Help:
	mes "[Kirkena]";
	mes "...Hm?";
	mes "Is there";
	mes "something that";
	mes "you need to ask to me?";
	next;
	menu "How can I get the symbol?",-;

L_Symbol:
	mes "[Kirkena]";
	mes "Taking the symbol";
	mes "by force is out of the";
	mes "question. Not even the gods";
	mes "would consider battling the";
	mes "Queen of the Dead.";
	next;
	mes "[Kirkena]";
	mes "You will need to";
	mes "earn the queen's favor";
	mes "in order to even have";
	mes "a chance of obtaining";
	mes "the Symbol of Nine Realms.";
	next;
	mes "[Kirkena]";
	mes "Now, there is a rumor";
	mes "that the Queen of the Dead";
	mes "is searching for her lost mother,";
	mes "Angrboda. Now, if you could find";
	mes "where Angrboda has been";
	mes "sealed away...";
	next;
	mes "[Kirkena]";
	mes "When you need to";
	mes "meet me from now on,";
	mes "go ahead and take passage";
	mes "through the right side of the";
	mes "portrait on the second";
	mes "floor of this castle.";
	set signquest,48;
	close;

L_Book:
	if(countitem(7304)) goto L_Found;
	if(Sign_Branch2B > 2) end;
	mes "[Kirkena]";
	mes "What are you doing here ?";
	mes "This is not a place for a";
	mes "mortal like you. I shall";
	mes "send you back to your realm.";
	next;
	mes "[Kirkena]";
	mes "Unfortunately, I lost my spell";
	mes "book and you should think of";
	mes "you as a very lucky person.";
	mes "I'm sure that bastard has stolen";
	mes "books and tried to use their power.";
	next;
	mes "[Kirkena]";
	mes "He has always dreamt to obtain";
	mes "my powers but if he thinks he'll";
	mes "get them this way... he's surely";
	mes "wrong.";
	next;
	mes "[Kirkena]";
	mes "Hey you, thank me for not";
	mes "sending you far away from here";
	mes "by finding my spell book !";
	set Sign_Branch2B,3;
	close;

L_Found:
	mes "[Kirkena]";
	mes "Ohh... This is my spell book.";
	mes "I wouldn't have thought of you";
	mes "to be brave enough to find it.";
	mes "There may be a place for you";
	mes "here after all...";
	delitem 7304,1;
	next;
	mes "[Kirkena]";
	mes "Listen to me.";
	mes "What I'm going to tell";
	mes "you is no small thing, it";
	mes "is about an entire realm.";
	mes "Believe me or not, I don't care.";
	next;
	goto L_Courage;

L_Privacy:
	mes "[Kirkena]";
	mes "This place isn't really";
	mes "good to talk about these";
	mes "kind of serious things. We";
	mes "should meet in privacy to make";
	mes "sure noone can hear us.";
	next;
	mes "[Kirkena]";
	mes "Please, hurry up and take";
	mes "the secret passage behind";
	mes "the right side of the portrait";
	mes "at second floor of my manor.";
	close;

}

nif_in,105,81,1	script	#signcrayu	139,2,2,{

	if(signquest == 44) goto L_SignCrayu;
	end;

L_SignCrayu:
	mes "[Crayu]";
	mes "Mountain sunset to the west";
	mes "Where the purple dusk falls";
	mes "Surrounded by beautiful melody";
	mes "You become the key that ignores its";
	mes "master.";
	next;
	mes "[Crayu]";
	mes "Hello adventurer.";
	mes "I know this is rather";
	mes "abrupt, but what do";
	mes "you think of Serin?";
	next;
	menu "She's good.",-,"She's evil!",-,"She could go either way.",-;
	mes "[Crayu]";
	mes "Hm...?";
	mes "And why do";
	mes "you think so?";
	next;
	menu "Just my opinion.",-,"It's the truth!",-;
	mes "[Crayu]";
	mes "Ah, I understand.";
	mes "Now, how may I help you?";
	next;
	menu "What exactly is Niflheim?",-,"How do I become one of the chosen?",L_Chosen;
	mes "[Crayu]";
	mes "Niflheim is commonly";
	mes "known as the city of the";
	mes "dead, but it's also the";
	mes "resting place of warriors";
	mes "who failed to enter Valhalla.";
	next;
	mes "[Crayu]";
	mes "Some heroes may think";
	mes "of Niflheim as the tragic end,";
	mes "but it really all depends on";
	mes "your point of view.";
	close;

L_Chosen:
	mes "[" + strcharinfo(0) + "]";
	mes "What do I need";
	mes "to do to become one";
	mes "of the chosen warriors?";
	next;
	mes "[Crayu]";
	mes "First and foremost,";
	mes "you must prove your courage.";
	mes "It will be up to you to decide";
	mes "how you will demonstrate your";
	mes "bravery. The Gods will only";
	mes "be watching and judging.";
	next;
	mes "[Crayu]";
	mes "Hmm...";
	mes "I think it would";
	mes "be a good idea if";
	mes "you talk to someone";
	mes "in Niflheim named ^FF0000Gen^000000.";
	set signquest,45;
	close;

}

niflheim,146,241,7	script	Depressing Man	735,{

	if(signquest > 56) goto L_Done;
	if(Sign_Branch8A > 3 || (Sign_Branch8B && Sign_Branch8B < 4)) goto L_Hurry;
	if(signquest > 54) goto L_Serin;
	if(signquest > 53) goto L_Queen;
	if(signquest) goto L_Seek;
	mes "[????]";
	mes "Leave me be,";
	mes "ruffian! I'm disinclined";
	mes "towards conversation";
	mes "at the moment.";
	close;

L_Seek:
	mes "[Gen]";
	mes "Huh... I hear you're";
	mes "looking for something";
	mes "pretty important. It's going";
	mes "to be a dangerous search.";
	next;
	mes "[Gen]";
	mes "There are plenty of";
	mes "other parties that are";
	mes "interested in the thing";
	mes "which you're seeking...";
	close;

L_Queen:
	mes "[Gen]";
	mes "You must be a very";
	mes "resourceful mortal.";
	mes "Not even Lady Hell, with";
	mes "all her power, could find";
	mes "the soul of her mother";
	mes "for a long time.";
	next;
	mes "[Gen]";
	mes "There's no need";
	mes "for me to hide";
	mes "my true identity any longer.";
	mes "My real name is Ganglati,";
	mes "servant of Lady Hell, the";
	mes "ruler of Niflheim.";
	next;
	mes "[Gen]";
	mes "Her highness would";
	mes "have words with you.";
	mes "Shall I send you to her";
	mes "mansion, Eljudnir,";
	mes "right now?";
	next;
	menu "Yes",-,"No",L_No;
	mes "[Gen]";
	mes "Remember to be";
	mes "careful and especially";
	mes "polite when you speak to";
	mes "Lady Hell. Otherwise, the";
	mes "consequences will be severe...";
	close2;
	warp "que_sign01",45,20;
	end;

L_No:
	mes "[Gen]";
	mes "I understand.";
	mes "Meeting with a deity is";
	mes "no small matter. However,";
	mes "I advise to make haste";
	mes "as her highness is eager";
	mes "to see you soon.";
	close;

L_Serin:
	mes "[Gen]";
	mes "You must be most favored";
	mes "to receive the SYmbol of the";
	mes "Nine Realms. Of course, it";
	mes "can be used only once, but";
	mes "it is still a great honor.";
	next;
	mes "[Gen]";
	mes "Once again, I ask that";
	mes "you be on guard against";
	mes "Serin. She may already be";
	mes "aware of what you plan to";
	mes "do with the symbol...";
	close;

L_Hurry:
	mes "[Gen]";
	mes "You must hurry and";
	mes "stop the summoning";
	mes "before your world in";
	mes "cast into immense peril!";
	next;
	mes "[Gen]";
	mes "Although Lady Hell";
	mes "is being rather blase";
	mes "about this matter, I beseech";
	mes "you to do what you can for";
	mes "the realm of the living!";
	close;

L_Done:
	mes "[Gen]";
	mes "You've done a great";
	mes "job of stopping Serin.";
	mes "Excellent! Such great";
	mes "service on behalf of";
	mes "the realm of the living!";
	next;
	mes "[Gen]";
	mes "I'm pleased to inform";
	mes "you that you've been";
	mes "invited to Lady Hell's";
	mes "mansion once again.";
	mes "Are you ready to go?";
	next;
	menu "No, thanks.",L_No2,"Yes.",-;
	mes "[Gen]";
	mes "Good, good.";
	mes "Don't forget to";
	mes "speak to her highness";
	mes "with the utmost respect!";
	close2;
	warp "que_sign01",45,20;
	end;

L_No2:
	mes "[Gen]";
	mes "I see.";
	mes "Well then, come";
	mes "back to me when you";
	mes "feel fully prepared.";
	close;

}

niflheim,146,241,1	script	#signgen	139,2,2,{

	if(signquest == 45 || Sign_Branch2B == 1) goto L_SignGen;
	end;

L_SignGen:
	mes "[Gen]";
	mes "Are you here";
	mes "to prove your";
	mes "courage to the Gods?";
	next;
	mes "[Gen]";
	mes "You know, I was an";
	mes "adventurer myself. In fact,";
	mes "I even came here to Niflheim";
	mes "for the ordeals set by the gods.";
	mes "However, I failed and ended up";
	mes "being bound to this realm...";
	next;
	mes "[Gen]";
	mes "I just wanted to warn you.";
	mes "Be careful and don't justify";
	mes "your greed for any sort of reward";
	mes "using the excuse that you're just";
	mes "gonna prove your courage.";
	mes "That's what I did...";
	next;
	mes "[Gen]";
	mes "Anyway, I've already talked";
	mes "too much. First, go and see";
	mes "the witch and ask her to";
	mes "help you out, okay?";
	if(Sign_Branch2B) set Sign_Branch2B,2;
	if(signquest == 45) set signquest,46;
	close;

}

nif_in,140,177,1	script	#signgrave	111,{

	if(signquest > 47 || countitem(7313) > 0)  warp "que_sign01",115,135;
	end;

}

que_sign01,122,141,5	script	Witch#2	792,{

    if (signquest > 56) goto L_NoMedal;
    if (signquest > 55) goto L_Success;
    if (Sign_Branch8B && Sign_Branch8B < 4)goto L_MustHurry;
    if ((countitem(7313) > 0) && Sign_Branch8A < 4 ) goto L_Medal;
    if (Sign_Branch8A) goto L_BranchA;
    if (signquest > 54 && countitem(7305)) goto L_Symbol;
    if (signquest < 48) goto L_NoMedal;
    mes "[Kirkena]";
    mes "If you need to learn more";
    mes "about Angrboda, why don't you";
    mes "just ask around? I'm sure that";
    mes "everyone is aware that the queen";
    mes "is searching for her mother.";
    next;
    mes "[Kirkena]";
    mes "Once again, don't let";
    mes "anyone know that I've asked";
    mes "you to bring me the Symbol of";
    mes "Nine Realms. I especially";
    mes "don't want Serin to find out.";
    next;
    mes "[Kirkena]";
    mes "If I can help it,";
    mes "I won't tolerate";
    mes "Serin's presence here";
    mes "in Niflheim. If I could";
    mes "banish her, I'd do it!";
    close;

L_Symbol:
    mes "[Kirkena]";
    mes "The Symbol of Nine Realms?";
    mes "How were you able to get that?!";
    mes "Ah, you must have found the Queen";
    mes "of the Dead's mother, Angrboda,";
    mes "right? Great work~";
    next;
    mes "[Kirkena]";
    mes "Now, if you'll just";
    mes "hand me the symbol, I'll tell";
    mes "you what you need to do next.";
    next;
    menu "Give the symbol.",L_Give,"Don't give the symbol.",-;
    mes "[Kirkena]";
    mes "Don't worry about that.";
    mes "I'm sure you will come back";
    mes "later with the wise decision";
    mes "to give the symbol to me~";
    close;

L_Give:
    mes "[Kirkena]";
    mes "Listen carefully.";
    mes "Since you were actually";
    mes "able to get the symbol, I believe";
    mes "that you're the only person capable";
    mes "of performing this next task.";
    next;
    mes "[Kirkena]";
    mes "We're going to use this";
    mes "symbol to create something,";
    mes "but we need one last item.";
    mes "I need you to find something";
    mes "imbued with Serin's vibes.";
    next;
    mes "[Kirkena]";
    mes "Serin's already hid herself";
    mes "deep within Niflheim, but I'm";
    mes "sure you can find something";
    mes "if you can find any remaining";
    mes "trace of her.";
    delitem 7305,1;
    set Sign_Branch8A,1;
    close;

L_BranchA:
    if (sign_fail) goto L_NoMedal;
    if (Sign_Branch8A > 3) goto L_Serin;
    if (Sign_Branch8A > 2) goto L_Complete;
    if (Sign_Branch8A > 1) goto L_Potion;
    if (countitem(2642) < 1) goto L_Lack;
    mes "[Kirkena]";
    mes "This is Serin's gold ring?";
    mes "Excellent, this has been";
    mes "strongly infused with her";
    mes "vibes. It's really tough to find";
    mes "something like this that resonates";
    mes "so strongly with his owner.";
    next;
    delitem 2642,1;
    set serinring,1;
    set Sign_Branch8A,2;
    close;

L_Potion:
    mes "[Kirkena]";
    mes "Now that the potion I'm";
    mes "making is being processed,";
    mes "I can finally tell you what";
    mes "I've been trying to do";
    mes "with the objects I've asked you";
    mes "to get for me.";
    next;
    mes "[Kirkena]";
    mes "I didn't explain";
    mes "the reason I wanted the Symbol";
    mes "of Nine Realms to prevent Serin";
    mes "from getting suspicious and forcing";
    mes "you to reveal my plans. You see,";
    mes "Serin isn't fit for Niflheim.";
    next;
    mes "[Kirkena]";
    mes "Although she's in the";
    mes "world of the dead, Serin";
    mes "has never accepted death and";
    mes "has desired to return to life. Of";
    mes "course, That's the natural response";
    mes "for everyone that comes here...";
    next;
    mes "[Kirkena]";
    mes "However, unlike the others";
    mes "who have despaired, lost";
    mes "hope and accepted their fate,";
    mes "Serin has never given up her hope";
    mes "to return to life. With her hope";
    mes "she retains her beauty and light.";
    next;
    mes "[Kirkena]";
    mes "But she's only denying";
    mes "the fate she deserves.";
    mes "What she's trying to do";
    mes "is wrong and we need to";
    mes "stop before it's too late.";

L_Menu:
    next;
    menu "What does she want?",-,"What is she going to do?",L_Plans,"What should I do?",L_Should;
    mes "[Kirkena]";
    mes "Make no mistake:";
    mes "Serin wants the Symbol";
    mes "of the Nine Realms.";
    next;
    mes "[Kirkena]";
    mes "Now, if she could use it";
    mes "multiple times, she could just";
    mes "command the guards of Niflheim";
    mes "to just let her pass and re-enter";
    mes "the world of the living. But your";
    mes "symbol can be used just once...";
    goto L_Menu;

L_Plans:
    mes "[Kirkena]";
    mes "I believe Serin is going to";
    mes "summon the Dark Lord. Since";
    mes "she used to be a great wizard,";
    mes "it's entirely possible. However,";
    mes "she might need the Symbol of the";
    mes "Nine Realms in order to do it.";
    next;
    mes "[Kirkena]";
    mes "Now, you may believe that";
    mes "Dark Lord can be defeated by";
    mes "humans, but what you might not";
    mes "know is that the manifestation of";
    mes "Dark Lord in your world is limited";
    mes "to a fraction of his true power.";
    next;
    mes "[Kirkena]";
    mes "Sometimes, Dark Lord can";
    mes "cross over into Rune-Midgard,";
    mes "but travelling from his world into";
    mes "ours takes vast amounts of energy.";
    mes "Also the life force in your world";
    mes "conflicts with his dark powers.";
    next;
    mes "[Kirkena]";
    mes "Now, if the Dark Lord";
    mes "were summoned into Niflheim,";
    mes "he would have easy access";
    mes "to Rune-Midgard and the use";
    mes "of all of his destructive power.";
    next;
    mes "[Kirkena]";
    mes "Serin plans to strike";
    mes "a deal with Dark Lord.";
    mes "In exchange for summoning";
    mes "him to Niflheim, Serin will";
    mes "be brought back to life.";
    next;
    mes "[Kirkena]";
    mes "Although you've found";
    mes "favor with Lady Hell, she";
    mes "will probably not stop Dark";
    mes "Lord's approach. Dark Lord";
    mes "only wants Rune-Midgard.";
    next;
    mes "[Kirkena]";
    mes "Now that I think about";
    mes "it, massive death would";
    mes "actually increase Lady Hell's";
    mes "sphere of influence. I don't think";
    mes "she'll help Dark Lord, but she";
    mes "also won't get in his way.";
    goto L_Menu;

L_Should:
    mes "[Kirkena]";
    mes "I need you to take";
    mes "this tonic and have";
    mes "Serin drink it. This";
    mes "special potion will erase";
    mes "most of her memories.";
    next;
    mes "[Kirkena]";
    mes "Without her memories,";
    mes "Serin should also lose";
    mes "her twisted ambitions.";
    mes "Now, with the Symbol of Nine";
    mes "Realms, Serin cannot refuse";
    mes "drinking this potion.";
    next;
    mes "[Kirkena]";
    mes "That's why having the";
    mes "symbol is so crucial.";
    mes "Serin is clever enough";
    mes "to avoid drinking this";
    mes "for quite a while now...";
    set Sign_Branch8A,3;
    close;

L_Complete:
    mes "[Kirkena]";
    mes "The potion is finally";
    mes "completed. Now, take this";
    mes "and command Serin to drink it.";
    next;
    if (serinring > 0) {
        mes "[Kirkena]";
        mes "Luckily, I was able to";
        mes "use Serin's gold ring to";
        mes "trace her location. I'm going";
        mes "to send you there, so please";
        mes "do whatever it takes to stop her.";
        next;
    }
    mes "[Kirkena]";
    mes "Please take these with you";
    mes "as they'll probably be useful";
    mes "when you deal with her. As for";
    mes "these vouchers, give them to your";
    mes "allies. They'll send them straight";
    mes "to where Serin is located.";
    next;
    mes "[Kirkena]";
    mes "When you're finished";
    mes "dealing with Serin, don't";
    mes "forget to bring back all";
    mes "of the vouchers I've";
    mes "given you, alright?";
    getitem 7308,1;
    if (serinring > 0) getitem 2643,1;
    getitem 7313,5;
    set Sign_Branch8A,4;
    close;

L_Serin:
    if (($signroomfull > 1) || getmapusers("que_sign02") > 0 || getareausers("que_sign01",229,227,166,162) > 0) goto L_Full;
    if (Sign_Branch8A == 7) set Sign_Branch8A,8;
    if (countitem(2643) < 1) goto L_NoRing;
    mes "[Kirkena]";
    mes "You're finally";
    mes "back, we might not";
    mes "have enough time to";
    mes "stop her, but we have";
    mes "to try. Are you ready?";
    next;
    menu "Yes",-,"No",L_No;
    if (($signroomfull > 1) || getmapusers("que_sign02") > 0 || getareausers("que_sign01",229,227,166,162) > 0) goto L_Full;
    close2;
    donpcevent "#signserin::OnSerin";
    donpcevent "#signserin::OnCooldown";
    set $signroomfull,2;
    set $signparty,getcharid(1);
    set $signplayer,getcharid(0);
    warp "que_sign01",195,189;
    end;

L_No:
    mes "[Kirkena]";
    mes "Hurry up, then!";
    mes "There's no time";
    mes "to waste!";
    close;

L_Full:
    mes "[Kirkena]";
    mes "Please wait";
    mes "a bit. I'm still";
    mes "trying to finish";
    mes "these preparations.";
    close;

L_Lack:
    mes "[Kirkena]";
    mes "Without a violent wave";
    mes "of Serin's feelings, I";
    mes "will not be able to";
    mes "lead you that close from";
    mes "her. Well... Nevermind. It will";
    mes "be enough.";
    set Sign_Branch8A,2;
    close;

L_NoRing:
    mes "[Kirkena]";
    mes "We've got to";
    mes "stop Serin before";
    mes "she does something";
    mes "truly horrible. Are";
    mes "you ready to go?";
    next;
    menu "Yes",-,"No",L_No;
    if (($signroomfull > 1) || getmapusers("que_sign02") > 0 || getareausers("que_sign01",229,227,166,162) > 0) goto L_Full;
    mes "[Kirkena]";
    mes "Okay then.";
    mes "Good luck,";
    mes "" + strcharinfo(0) + "...";
    close2;
    if (($signroomfull > 1) || getmapusers("que_sign02") > 0 || getareausers("que_sign01",229,227,166,162) > 0) end;
    donpcevent "#signserin::OnSerin";
    donpcevent "#signserin::OnCooldown";
    set $signroomfull,2;
    set $signparty,getcharid(1);
    warp "que_sign02",35,313;
    end;

L_Medal:
    callfunc "Sign_Party";

L_NoMedal:
    if (signquest > 56) goto L_Done;
    if (sign_fail) goto L_Fail;
    mes "[Kirkena]";
    mes "...";
    close;

L_Success:
    if (countitem(7313) < 5 && Sign_Branch8A) goto L_Voucher;
    delitem 7313,5;
    mes "[Kirkena]";
    mes "You've done well.";
    mes "Without her memories of her";
    mes "previous life, Serin can remain";
    mes "here in Niflheim peacefully.";
    next;
    mes "[Kirkena]";
    mes "Although she failed to return to";
    mes "life, I'm sure she is glad to have";
    mes "met you, I think she's also started";
    mes "to learn that life's meaning is not";
    mes "in living alone...";
    next;
    mes "[Kirkena]";
    mes "Once again, thank";
    mes "you so much for your";
    mes "help. Once you finish here,";
    mes "please visit our queen, Lady Hell.";
    mes "I believe she wants to see you for";
    mes "some reason...";
    set signquest,57;
    getexp 500000,0;
    close;

L_Voucher:
    mes "[Kirkena]";
    mes "Hmmm...?";
    mes "Where are all the";
    mes "vouchers I've lent to you?";
    mes "Please retrieve them all";
    mes "before coming back to me.";
    close;

L_Done:
    mes "[Kirkena]";
    mes "Hm? Still exploring";
    mes "Niflheim? Although you're";
    mes "strong enough to survive,";
    mes "I still think you're risking";
    mes "your life by remaining here";
    mes "when you don't have to.";
    close;

L_MustHurry:
    mes "[Kirkena]";
    mes "You must hurry to stop";
    mes "Serin from accomplishing her";
    mes "plan, otherwise your world";
    mes "will be cast in shadows for all";
    mes "eternity!";
    close;

L_Fail:
    if (sign_fail == 1) {
        mes "[Kirkena]";
        mes "Damn! Did you really let";
        mes "her finish her summoning?";
        mes "That's terrible! Does she";
        mes "even know that she will not";
        mes "have any memory of her past life?";
        set sign_fail,2;
        next;
    }
    mes "[Kirkena]";
    mes "So much energy and time wasted";
    mes "for no rewards. I guess it";
    mes "can't be helped. Now, return";
    mes "to your world, and watch its";
    mes "silent death.";
    close;

}

//Seals in Glast Heim Lowest Cave
gl_dun02,262,265,1	script	Mysterious Energy	111,{

    if ((brokenseal == 1 && Sign_Seal1 == 1) || (brokenseal == 2 && Sign_Seal2 == 1) || (brokenseal == 3 && Sign_Seal3 == 1) || (brokenseal == 4 && Sign_Seal4 == 1)) {
        callfunc "Break_Seal";
        mes "^3355FFThe weapon you're holding";
        mes "right now doesn't look like it has";
        mes "any chance of breaking this seal.";
        mes "You'll definitely need something";
        mes "more powerful...";
        close;
    } else {
        mes "^3355FFYou sense a strange";
        mes "mysterious energy emanating from";
        mes "this area. For some reason, this";
        mes "power strikes you with a faint";
        mes "feeling of sadness.";
        close;
    }

}

gl_dun02,270,98,1	script	Mysterious Energy#2	111,{

    if ((brokenseal == 1 && Sign_Seal1 == 2) || (brokenseal == 2 && Sign_Seal2 == 2) || (brokenseal == 3 && Sign_Seal3 == 2) || (brokenseal == 4 && Sign_Seal4 == 2)) {
        callfunc "Break_Seal";
        mes "^3355FFThe weapon you're holding";
        mes "right now doesn't look like it has";
        mes "any chance of breaking this seal.";
        mes "You'll definitely need something";
        mes "more powerful...";
        close;
    } else {
        mes "^3355FFYou sense a strange";
        mes "mysterious energy emanating from";
        mes "this area. For some reason, this";
        mes "power strikes you with a faint";
        mes "feeling of sadness.";
        close;
    }

}

gl_dun02,268,31,1	script	Mysterious Energy#3	111,{

    if ((brokenseal == 1 && Sign_Seal1 == 3) || (brokenseal == 2 && Sign_Seal2 == 3) || (brokenseal == 3 && Sign_Seal3 == 3) || (brokenseal == 4 && Sign_Seal4 == 3)) {
        callfunc "Break_Seal";
        mes "^3355FFThe weapon you're holding";
        mes "right now doesn't look like it has";
        mes "any chance of breaking this seal.";
        mes "You'll definitely need something";
        mes "more powerful...";
        close;
    } else {
        mes "^3355FFYou sense a strange";
        mes "mysterious energy emanating from";
        mes "this area. For some reason, this";
        mes "power strikes you with a faint";
        mes "feeling of sadness.";
        close;
    }

}

gl_dun02,139,72,1	script	Mysterious Energy#4	111,{

    if ((brokenseal == 1 && Sign_Seal1 == 4) || (brokenseal == 2 && Sign_Seal2 == 4) || (brokenseal == 3 && Sign_Seal3 == 4) || (brokenseal == 4 && Sign_Seal4 == 4)) {
        callfunc "Break_Seal";
        mes "^3355FFThe weapon you're holding";
        mes "right now doesn't look like it has";
        mes "any chance of breaking this seal.";
        mes "You'll definitely need something";
        mes "more powerful...";
        close;
    } else {
        mes "^3355FFYou sense a strange";
        mes "mysterious energy emanating from";
        mes "this area. For some reason, this";
        mes "power strikes you with a faint";
        mes "feeling of sadness.";
        close;
    }

}

gl_dun02,16,26,1	script	Mysterious Energy#5	111,{

    if ((brokenseal == 1 && Sign_Seal1 == 5) || (brokenseal == 2 && Sign_Seal2 == 5) || (brokenseal == 3 && Sign_Seal3 == 5) || (brokenseal == 4 && Sign_Seal4 == 5)) {
        callfunc "Break_Seal";
        mes "^3355FFThe weapon you're holding";
        mes "right now doesn't look like it has";
        mes "any chance of breaking this seal.";
        mes "You'll definitely need something";
        mes "more powerful...";
        close;
    } else {
        mes "^3355FFYou sense a strange";
        mes "mysterious energy emanating from";
        mes "this area. For some reason, this";
        mes "power strikes you with a faint";
        mes "feeling of sadness.";
        close;
    }

}

gl_dun02,120,180,1	script	Mysterious Energy#6	111,{

    if ((brokenseal == 1 && Sign_Seal1 == 6) || (brokenseal == 2 && Sign_Seal2 == 6) || (brokenseal == 3 && Sign_Seal3 == 6) || (brokenseal == 4 && Sign_Seal4 == 6)) {
        callfunc "Break_Seal";
        mes "^3355FFThe weapon you're holding";
        mes "right now doesn't look like it has";
        mes "any chance of breaking this seal.";
        mes "You'll definitely need something";
        mes "more powerful...";
        close;
    } else {
        mes "^3355FFYou sense a strange";
        mes "mysterious energy emanating from";
        mes "this area. For some reason, this";
        mes "power strikes you with a faint";
        mes "feeling of sadness.";
        close;
    }

}

gl_dun02,42,251,1	script	Mysterious Energy#7	111,{

    if ((brokenseal == 1 && Sign_Seal1 == 7) || (brokenseal == 2 && Sign_Seal2 == 7) || (brokenseal == 3 && Sign_Seal3 == 7) || (brokenseal == 4 && Sign_Seal4 == 7)) {
        callfunc "Break_Seal";
        mes "^3355FFThe weapon you're holding";
        mes "right now doesn't look like it has";
        mes "any chance of breaking this seal.";
        mes "You'll definitely need something";
        mes "more powerful...";
        close;
    } else {
        mes "^3355FFYou sense a strange";
        mes "mysterious energy emanating from";
        mes "this area. For some reason, this";
        mes "power strikes you with a faint";
        mes "feeling of sadness.";
        close;
    }

}

gl_dun02,124,231,1	script	Mysterious Energy#8	111,{

    if ((brokenseal == 1 && Sign_Seal1 == 8) || (brokenseal == 2 && Sign_Seal2 == 8) || (brokenseal == 3 && Sign_Seal3 == 8) || (brokenseal == 4 && Sign_Seal4 == 8)) {
        callfunc "Break_Seal";
        mes "^3355FFThe weapon you're holding";
        mes "right now doesn't look like it has";
        mes "any chance of breaking this seal.";
        mes "You'll definitely need something";
        mes "more powerful...";
        close;
    } else {
        mes "^3355FFYou sense a strange";
        mes "mysterious energy emanating from";
        mes "this area. For some reason, this";
        mes "power strikes you with a faint";
        mes "feeling of sadness.";
        close;
    }

}


function	script	Break_Seal	{

	getinventorylist;
	set @i,-1;
L_Check:
	set @i,@i+1;
	if(getiteminfo(@inventorylist_id[@i],13) == 4) goto L_Break;
	if(@i < @inventorylist_count -1) goto L_Check;
	return;

L_Break:
	set @sealbreak,rand(100);
	if(@sealbreak < 11) goto L_Broken;
	mes "^3355FFYou hit the seal as hard";
	mes "as you can with the weapon in your";
	mes "hand. However, the seal is merely";
	mes "shaken by the force of your blow.";
	mes "Perhaps you need something";
	mes "more powerful to break the seal...";
	close;

L_Broken:
	mes "^3355FFOnce you strike the seal,";
	mes "it cracks open and a flash of";
	mes "mysterious light floods out of it.";
	mes "Inside of the seal, you find a very";
	mes "peculiar object...";
	next;
	set brokenseal,brokenseal +1;
	set @sealbreak,0;
	if(brokenseal > 4) goto L_Soul;
	mes "You have";
	mes "obtained a";
	mes "^C9CACBPiece of Spirit.^000000";
	getitem 7306,1;
	close;

L_Soul:
	mes "^3355FFUpon obtaining the last piece";
	mes "of Angrboda's soul, all four soul";
	mes "pieces emitted a strange light,";
	mes "rose to the air and combined into";
	mes "a single transparent jewel.";
	next;
	mes "^3355FFThe jewel floated";
	mes "down to your waiting";
	mes "hands, and you hear its";
	mes "voice speak directly into";
	mes "the depths of your heart...^000000";
	next;
	mes "[Angrboda's Soul]";
	mes "I'm...";
	mes "I'm leaving my soul";
	mes "with you. Please guide";
	mes "me to the queen of the dead...";
	delitem 7306,4;
	getitem 7307,1;
	set signquest,54;
	close;
}

//End of Seals

que_sign01,46,55,1	script	Fountain	111,{
	if(signquest > 54) goto L_Bottle;
	mes "^3355FFThe water in this";
	mes "fountain looks clean";
	mes "enough to drink...";
	next;
	menu "Drink.",-,"Don't Drink.",L_No;
	mes "...";
	close2;
	percentheal -100,0;
	end;
	
L_No:
	mes "...";
	close;

L_Bottle:
	mes "^3355FFThe water in this";
	mes "fountain looks clean";
	mes "enough to be bottled...";
	next;
	menu "Bottle.",-,"Don't bottle.",L_No;
	if(!countitem(713))goto L_Nobottle;
	delitem 713,1;
	getitem 12020,1;
	close;

L_Nobottle:
	mes "^3355FFUnfortunately, it";
	mes "looks like you don't";
	mes "have any Empty Bottles";
	mes "to carry any of this water...";
	close;

}

que_sign01,45,227,5	script	Queen of the Dead	856,{

	if(signquest > 65) goto L_Greet;
	if(signquest > 64) goto L_Work;
	if(signquest > 63) goto L_Sense;
	if(signquest > 54) goto L_Power;
	mes "[Lady Hell]";
	mes "^881010I have been told";
	mes "by Ganglati that you";
	mes "are the mortal that has";
	mes "guided Mother's soul to me.";
	next;
	mes "[Lady Hell]";
	mes "^881010Do not fear me,";
	mes "hero of Rune-Midgard.";
	mes "You have won the favor";
	mes "of the Queen of the Dead";
	mes "and may ask me of any";
	mes "reward if I deem it fair.";
	next;
	mes "[Lady Hell]";
	mes "^881010The true Symbol of the";
	mes "of Nine Realms cannot be freely";
	mes "given or lent. However, I sense";
	mes "your purpose and will give you";
	mes "a symbol imbued with enough";
	mes "power to be used only once.";
	next;
	mes "[Lady Hell]";
	mes "^881010With the symbol I give you,";
	mes "you can command the dead to";
	mes "carry out your will without";
	mes "question. However, keep in";
	mes "mind that after one use,";
	mes "its power will be consumed.";
	next;
	mes "[Lady Hell]";
	mes "^881010I have also decided";
	mes "to reward you with one";
	mes "more special permission.";
	mes "You may now freely draw";
	mes "water from the fountain";
	mes "in my mansion, brave hero.";
	next;
	mes "^3355FFYou received";
	mes "the Symbol of the Nine Realms.";
	delitem 7307,1;
	getitem 7305,1;
	set signquest,55;
	close;

L_Power:
	mes "[Lady Hell]";
	mes "^881010Greetings, mortal.";
	mes "Make sure that you";
	mes "use the power of the";
	mes "symbol wisely. You will";
	mes "be responsible for the";
	mes "consequences...";
	if(signquest == 57) set signquest,58;
	close;

L_Sense:
	mes "[Lady Hell]";
	mes "^881010Ah.";
	mes "You are the";
	mes "mortal called";
	mes "" + strcharinfo(0) + ", are you not?";
	mes "Yes, you are known to me.";
	next;
	mes "[Lady Hell]";
	mes "^881010I've wanted to see you";
	mes "as I've sensed that you";
	mes "carry something which feels";
	mes "very familiar to me. Do you";
	mes "have something extraordinarily";
	mes "special in your possesion?";
	if(!countitem(2644) && !countitem(7178)) close;
	next;
	if(countitem(2644) && countitem(7178)) menu "The Sign",L_Sign,"Sobbing Starlight",-;
	if(!countitem(2644) && countitem(7178)) menu "Sobbing Starlight",-;
	if(countitem(2644) && !countitem(7178)) menu "The Sign",L_Sign;
	mes "[Lady Hell]";
	mes "^881010Yes, that's it!";
	mes "I never expected a mortal";
	mes "to have such an interesting";
	mes "artifact in his possession.";
	next;
	mes "[Lady Hell]";
	mes "^881010As queen of Niflheim,";
	mes "I command you to lend the";
	mes "Sobbing Starlight to me! Fear";
	mes "not, I shall quickly return it. For";
	mes "a mortal, it must have";
	mes "taken great pains to obtain";
	mes "this...";
	next;
	menu "Please take it...",-,"N-no! Don't take it!",L_No;
	mes "[Lady Hell]";
	mes "^881010Thank you mortal.";
	mes "Now, I shall show";
	mes "you something truly";
	mes "interesting...";
	delitem 7178,1;
	set signquest,65;
	close;

L_Sign:
	mes "[Lady Hell]";
	mes "^881010The Sign...?";
	mes "Hmm, no, that's not";
	mes "what I sensed. It's actually";
	mes "something quite different...";
	close;

L_No:
	mes "[Lady Hell]";
	mes "^881010Ha ha ha!";
	mes "You amuse me,";
	mes "mortal! To think,";
	mes "you even have courage";
	mes "to refuse the queen of";
	mes "Niflheim! Ha ha ha!";
	next;
	mes "[Lady Hell]";
	mes "^881010Mercy is not a quality";
	mes "that I am known for, but";
	mes "since you are my favored";
	mes "mortal, I shall not kill you.";
	mes "Still, it would be unwise";
	mes "to displease me~";
	close2;
	warp "niflheim",29,154;
	end;

L_Work:
	mes "[Lady Hell]";
	mes "^881010As queen of this realm";
	mes "I am unaccustomed to labor.";
	mes "But give me a moment to finish";
	mes "my work on this priceless";
	mes "artifact, mortal.";
	next;
	misceffect 13;
	next;
	misceffect 32;
	next;
	misceffect 183;
	next;
	misceffect 90;
	next;
	mes "[Lady Hell]";
	mes "^881010It is done.";
	mes "This is the true";
	mes "form of the object";
	mes "you humans call the";
	mes "Sobbing Starlight.";
	next;
	mes "[Lady Hell]";
	mes "^881010Although you may also know";
	mes "this object as God's Tear Drop,";
	mes "keep in mind that history, as you";
	mes "humans know it, may actually be";
	mes "different than the truth.";
	getitem 7025,1;
	set signquest,66;
	next;
	mes "[Lady Hell]";
	mes "^881010In other words, there";
	mes "are some older tales about";
	mes "the gods and their enemies that";
	mes "may have been confused and twisted";
	mes "as they were handed down from";
	mes "generation to generation.";
	next;
	mes "[Lady Hell]";
	mes "^881010That is all I can tell";
	mes "you for now, mortal. It will";
	mes "be your job to discover the";
	mes "truth of the legends...";
	close;

L_Greet:
	mes "[Lady Hell]";
	mes "^881010Greetings, mortal.";
	mes "Is the realm of the living";
	mes "that boring and tedious?";
	mes "Ha ha ha! Well, there shall";
	mes "always be a place for you";
	mes "here in Niflheim.";
	close;

}

que_sign01,1,1,1	script	#signserin	-1,{

OnInit:
	disablenpc "Serin#serin";
	set $signroomfull,0;
	set $signparty,0;
	end;

OnSerin:
	enablenpc "Serin#serin";
	end;

OnSummon:
	disablenpc "Serin#serin";
	set $@Sign_Summon,10;
	monster "que_sign01",180,200,"Rotten Corpse",1423,1,"#signserin::OnSignDead";
	monster "que_sign01",205,205,"Rotten Corpse",1423,1,"#signserin::OnSignDead";
	monster "que_sign01",190,190,"Rotten Corpse",1423,1,"#signserin::OnSignDead";
	monster "que_sign01",205,190,"Rotten Corpse",1423,1,"#signserin::OnSignDead";
	monster "que_sign01",190,205,"Rotten Corpse",1423,1,"#signserin::OnSignDead";
	monster "que_sign01",200,200,"Ancient Wraith",1475,1,"#signserin::OnSignDead";
	monster "que_sign01",200,180,"Ancient Wraith",1475,1,"#signserin::OnSignDead";
	monster "que_sign01",210,210,"Ancient Mummy",1522,1,"#signserin::OnSignDead";
	monster "que_sign01",180,180,"Ancient Mummy",1522,1,"#signserin::OnSignDead";
	monster "que_sign01",196,195,"Dark Lord Incarnation",1605,1,"#signserin::OnSignDead";
	end;

OnSignDead:
	set $@Sign_Summon,$@Sign_Summon -1;
	if($@Sign_Summon > 0) end;
	set $signroomfull,3;
	stopnpctimer;
	goto OnSerin;

OnCooldown:
	initnpctimer;
	end;

OnTimer600000:
	disablenpc "Serin#serin";
	killmonster "que_sign01","#signserin::OnSignDead";
	set $signroomfull,1;
	set $signparty,0;
	areawarp "que_sign01",229,227,166,162,"niflheim",30,156;
	areawarp "que_sign02",1,1,400,400,"niflheim",30,156;
	stopnpctimer;
	end;
}

que_sign01,1,1,1	script	#signserin2	-1,{

OnInit:
	disablenpc "Serin#serin2";
	set $signroom2full,0;
	end;

OnSerin:
	enablenpc "Serin#serin2";
	end;

OnSummon:
	disablenpc "Serin#serin2";
	set $@Sign_Summon2,1;
	areamonster "que_sign01",188,34,205,55,"Dark Lord Incarnation",1605,1,"#signserin2::OnSignDead";
	end;

OnSignDead:
	set $@Sign_Summon2,$@Sign_Summon2 -1;
	if($@Sign_Summon2 > 0) end;
	set $signroom2full,3;
	stopnpctimer;
	goto OnSerin;

OnCooldown:
	initnpctimer;
	end;

OnTimer600000:
	disablenpc "Serin#serin2";
	killmonster "que_sign01","#signserin2::OnSignDead";
	set $signroom2full,1;
	areawarp "que_sign01",229,77,166,12,"niflheim",30,156;
	stopnpctimer;
	end;
}

que_sign01,197,195,5	script	Serin#serin	90,{

	if(signquest > 55) goto L_Done;
	if(Sign_Branch8A > 7) goto L_TryAgain;
	if(Sign_Branch8A > 6) goto L_Success;
	if(Sign_Branch8A > 4) goto L_Summon;
	if(Sign_Branch8A < 4) goto L_NoWord;
	mes "[Serin]";
	mes "You're finally here.";
	mes "That witch has been watching";
	mes "my every move, so she probably";
	mes "knows what I'm up to by now...";
	next;
	menu "Why are you doing this...",-;
	mes "[Serin]";
	mes "You don't understand";
	mes "the horrific experience";
	mes "of being bound to Niflheim.";
	mes "I'm sick of breathing death";
	mes "and feeding on despair.";
	mes "I want to live again!";
	next;
	menu "Is that why you want Dark Lord...?",-;
	mes "[Serin]";
	mes "Unfortunately, the symbol";
	mes "which Lady Hell gave you is";
	mes "limited to a one time use. Its";
	mes "power wasn't enough to bring me";
	mes "back, so summoning Dark Lord is";
	mes "my last chance.";
	next;
	menu "But if Dark Lord comes to Rune-Midgard...",-;
	mes "[Serin]";
	mes "Oh, I'm pretty sure of";
	mes "what will happen if Dark Lord";
	mes "enters the realm of the living.";
	mes "He'll destroy Rune-Midgard and";
	mes "bring death to thousands and";
	mes "thousands of people.";
	next;
	mes "[Serin]";
	mes "So if I came back to life";
	mes "and everyone else were dead,";
	mes "however, by summoning Dark";
	mes "Lord, you might be thinking it'd be";
	mes "pretty pointless for me to come";
	mes "back. But I don't care.";
	next;
	mes "[Serin]";
	mes "The living don't appreciate";
	mes "what they have, so they ought";
	mes "to be punished. They can all go to";
	mes "Niflheim while I enjoy the warmth";
	mes "of the sun and the fresh outside";
	mes "air. Everyone should die...";
	next;
	mes "[Serin]";
	mes "Maybe you might not";
	mes "pity my situation since you've";
	mes "never been bound to Niflheim,";
	mes "but I'm begging you. Don't get";
	mes "in my way, " +strcharinfo(0) + ".";
	next;
	menu "Let Her",L_Go,"Stop Her",-;
	set Sign_Branch8A,5;
	close;

L_Go:
	mes "[Serin]";
	mes "Are you really willing";
	mes "to throw so much away for";
	mes "my sake? You do understand";
	mes "that you'll be failing the ordeals set before you by the gods...";
	next;
	switch( select( "I changed my mind for Rune-Midgard.","I do, and it's alright..." ) )
	{
		case 1:
			set Sign_Branch8A,5;
			close;
		
		case 2:
			mes "[Serin]";
			mes "The least I can";
			mes "do is send you back";
			mes "to Rune-Midgard and";
			mes "ask the Dark Lord to spare";
			mes "you. Thank you so much...";
			set sign_fail,1;
			getexp 200000,0;
			close2;
			set $signroomfull,0;
			warp "umbala",132,203;
			end;
	}

L_Summon:
	mes "[Serin]";
	mes "If you think that";
	mes "I can't summon Dark Lord";
	mes "without the symbol, then you're";
	mes "mistaken. I've been collecting";
	mes "the power of despair!";
	next;
	mes "[Serin]";
	mes "Do you remember what";
	mes "happened to the dead that you";
	mes "helped on my behalf? Even if they";
	mes "seemed to have found shelter at";
	mes "first, they cannot escape my";
	mes "deep hollow of despair...";
	next;
	mes "[Serin]";
	mes "And that poor little girl,";
	mes "Alakina Ann? She still";
	mes "hasn't realized that she's dead!";
	next;
	mes "[Serin]";
	mes "You gave her hope,";
	mes "but ultimately, you can't";
	mes "keep your promise to bring her";
	mes "home. Oh, her disappointment";
	mes "must be so crushing...";
	next;
	mes "[Serin]";
	mes "Yes...";
	mes "By trying to help";
	mes "you gave them nothing";
	mes "but pain, just as I planned.";
	mes "Now I have enough despair";
	mes "to summon Dark Lord!";
	next;
	mes "[Serin]";
	mes "I don't want us to fight,";
	mes "but I can't let you stop me.";
	mes "I've already sold my soul to";
	mes "Dark Lord to become a living";
	mes "human again so I can't give up";
	mes "now! We'll have to battle!";
	close2;
	donpcevent "#signserin::OnSummon";
	set Sign_Branch8A,7;
	end;

L_TryAgain:
	mes "[Serin]";
	mes "Haven't you";
	mes "given up yet?";
	mes "Please don't";
	mes "try to stop me!";
	close2;
	set Sign_Branch8A,7;
	donpcevent "#signserin::OnSummon";
	end;

L_Success:
	mes "[Serin]";
	mes "I see now.";
	mes "Soon, I'll lose my memories";
	mes "and remain dead in Niflheim.";
	mes "Just like all the others. Still,";
	mes "may I ask you one question?";
	next;
	mes "[Serin]";
	mes "With that symbol, you";
	mes "could order the dead to do";
	mes "whatever you want. Why didn't";
	mes "you use it to command me to quit?";
	next;
	mes "[Serin]";
	mes "...";
	mes "......";
	mes "..........";
	next;
	mes "[Serin]";
	mes "I see it now.";
	mes "The kindness in your eyes";
	mes "tells me everything. You wanted to";
	mes "give me another chance. But in the";
	mes "end, I managed to destroy the";
	mes "chance you had given me.";
	next;
	mes "[Serin]";
	mes "Even though I'm nothing but";
	mes "a spirit now, it was an honor";
	mes "for me to meet somebody like you.";
	mes "Although I'll lose my memories,";
	mes "I'll try not to forget you.";
	next;
	mes "[Serin]";
	mes "My memories of your";
	mes "courage and kindness";
	mes "are more precious to";
	mes "me than life itself.";
	next;
	mes "[Serin]";
	mes "Farewell, now.";
	mes "And good luck on";
	mes "your travels, my friend...";
	delitem 7308,1;
	set signquest,56;
	close;

L_NoWord:
	mes "[Serin]";
	mes "...";
	close;

L_Done:
	mes "^3355FFYou helped the";
	mes "unconscious Serin";
	mes "and returned to Niflheim.";
	close2;
	set $signroomfull,0;
	warp "niflheim",30,156;
	end;
}

que_sign01,197,45,5	script	Serin#serin2	90,{

	if (signquest > 55) goto L_Done;
	if (Sign_Branch8B > 3) goto L_TryAgain;
	if (Sign_Branch8B > 2) goto L_Success;
	if (Sign_Branch8B > 1) goto L_Summon;
	mes "[Serin]";
	mes "As its magic power grows,";
	mes "the Magic Circle is nearing completion. The symbol which I've asked you for is the last material needed for summoning Dark Lord.";
	next;
	mes "[Serin]";
	mes "However, the power of that";
	mes "symbol can be used to complete";
	mes "the Magic Circle or destroy it. Would you hand it over to me? I choose to destroy this...";
	next;
	mes "[Serin]";
	mes "Please...";
	mes "Let me have the symbol.";
	next;
	select( "Give Serin the symbol." );
	mes "[Serin]";
	mes "This could be";
	mes "pretty dangerous";
	mes "so please step back...";
	delitem 7305,1;
	set Sign_Branch8B,2;
	close;
	
L_Summon:
	mes "[Serin]";
	mes "I'm sorry.";
	mes "But I have to do this";
	mes "to summon Dark Lord.";
	next;
	select( "But why...?" );
	mes "[Serin]";
	mes "It was never the witch";
	mes "that wanted Dark Lord summoned,";
	mes "but me. I've always wanted to return to my human form. I'm sick and tired of being bound here in Niflheim!";
	next;
	mes "[Serin]";
	mes "Unfortunately, the symbol";
	mes "which Lady Hell gave you is";
	mes "limited to a one time use. Its";
	mes "power wasn't enough to bring me";
	mes "back, so summoning Dark Lord is";
	mes "my last chance.";
	next;
	select( "But if Dark Lord comes to Rune-Midgard..." );
	mes "[Serin]";
	mes "Oh, I'm pretty sure of";
	mes "what will happen if Dark Lord";
	mes "enters the realm of the living. He'll destroy Rune-Midgard and bring death to thousands and thousands of people.";
	next;
	mes "[Serin]";
	mes "So if I came back to life";
	mes "and everyone else were dead,";
	mes "However, by summoning Dark Lord,";
	mes "you might be thinking it'd be pretty pointless for me to come back. But you know what? I don't care.";
	next;
	mes "[Serin]";
	mes "The living don't appreciate";
	mes "what they have, so they ought";
	mes "to be punished. They can all go to Niflheim while I enjoy the warmth of the sun and the fresh outside air.";
	next;
	mes "[Serin]";
	mes "Maybe you might not";
	mes "pity my situation since you've";
	mes "never been bound to Niflheim,";
	mes "but I'm begging you. Don't get";
	mes "in my way.";
	next;
	switch( select( "Alright. I'll let you go.","No, you have to be stopped." ) )
	{
		case 1:
			mes "[Serin]";
			mes "Are you really willing";
			mes "to throw so much away for";
			mes "my sake? You do understand";
			mes "that you'll be failing the ordeals set before you by the gods...";
			next;
			switch( select( "I changed my mind for Rune-Midgard.","I do, and it's alright..." ) )
			{
				case 1:
					break;
					
				case 2:
					mes "[Serin]";
					mes "The least I can";
					mes "do is send you back";
					mes "to Rune-Midgard and";
					mes "ask the Dark Lord to spare";
					mes "you. Thank you so much...";
					set signfail,1;
					getexp 200000,0;
					set $signroom2full,0;
					close2;
					warp "umbala",132,203;
					end;
			}
					
		case 2:
			mes "[Serin]";
			mes "...";
			mes "I really don't want to fight you,";
			mes "but I've come too far to give up now. If you insist on interfering, then you leave me no choice...";
			next;
			mes "[Dark Lord]";
			mes "^330033Insolent mortal!";
			mes "Do you really think";
			mes "you have a chance of";
			mes "stopping me? Hmpf.";
			mes "Every fool must learn.";
			mes "Prepare to die!^000000";
			donpcevent "#signserin2::OnSummon";
			set Sign_Branch8B,3;
			close;
	}

L_TryAgain:
    mes "[Serin]";
    mes "Haven't you";
    mes "given up yet?";
    mes "Please don't";
    mes "try to stop me!";
    close2;
    set Sign_Branch8B,3;
    donpcevent "#signserin2::OnSummon";
    end;

L_Success:
    mes "[Serin]";
    mes "I see now.";
    mes "Soon, I'll lose my memories";
    mes "and remain dead in Niflheim.";
    mes "Just like all the others. Still,";
    mes "may I ask you one question?";
    next;
    mes "[Serin]";
    mes "With that symbol, you";
    mes "could order the dead to do";
    mes "whatever you want. Why didn't";
    mes "you use it to command me to quit?";
    next;
    mes "[Serin]";
    mes "...";
    mes "......";
    mes "..........";
    next;
    mes "[Serin]";
    mes "I see it now.";
    mes "The kindness in your eyes";
    mes "tells me everything. You wanted to";
    mes "give me another chance. But in the";
    mes "end, I managed to destroy the";
    mes "chance you had given me.";
    next;
    mes "[Serin]";
    mes "Even though I'm nothing but";
    mes "a spirit now, it was an honor";
    mes "for me to meet somebody like you.";
    mes "Although I'll lose my memories,";
    mes "I'll try not to forget you.";
    next;
    mes "[Serin]";
    mes "My memories of your";
    mes "courage and kindness";
    mes "are more precious to";
    mes "me than life itself.";
    next;
    set signquest,56;
    mes "[Serin]";
    mes "Farewell, now.";
    mes "And good luck on";
    mes "your travels, my friend...";
    close;

L_NoWord:
    mes "[Serin]";
    mes "...";
    close;

L_Done:
    mes "^3355FFYou helped the";
    mes "unconscious Serin";
    mes "and returned to Niflheim.";
    close2;
    set $signroom2full,0;
    warp "niflheim",30,156;
    end;
}


function	script	Sign_Party	{

	getpartymember $signparty,1;
	set @i,-1;

L_Check:
	set @i,@i+1;
	if(getcharid(0) == $@partymembercid[@i]) goto L_Party;
	if(@i < $@partymembercount -1) goto L_Check;
	return;

L_Party:
	mes "[Kirkena]";
	mes "That Witch's Medal...";
	mes "You must be here to";
	mes "help your friend take";
	mes "care of Serin. Are you";
	mes "ready to go, " + strcharinfo(0) + "?";
	next;
	menu "Yes.",-,"Not yet...",L_Notyet;
	menu "Go directly to Serin.",-,"Path towards Serin.",L_Path;
	mes "[Kirkena]";
	mes "Thank you";
	mes "for your help.";
	mes "Serin's threat may";
	mes "be too much for just";
	mes "one adventurer alone...";
	close2;
	warp "que_sign01",195,189;
	end;
	

L_Notyet:
	mes "[Kirkena]";
	mes "Please hurry...";
	mes "Time is of the essence...";
	close;

L_Path:
	mes "[Kirkena]";
	mes "Thank you";
	mes "for your help.";
	mes "Serin's threat may";
	mes "be too much for just";
	mes "one adventurer alone...";
	close2;
	warp "que_sign02",135,313;
	end;

}

// Warp to leave Serin's room

que_sign01,178,169,0	script	#serinwarp	45,1,1,{

    if ($signroomfull > 2) {
        if (getmapusers("que_sign02") > 0 || getareausers("que_sign01",229,227,166,162) > 0) end;
        donpcevent "#signserin::OnInit";
    }
    warp "niflheim",30,156;
    end;
}

que_sign01,178,19,0	script	#serinwarp2	45,1,1,{

	set $signroom2full,0;
	warp "niflheim",30,156;
	end;
}

// Fountain script

geffen,119,55,1	script	GeffeniaWarper	45,2,2,{

    switch ($GeffeniaWarp) {

    case 1:
        warp "gefenia01",58,169;
        break;

    case 2:
        warp "gefenia02",116,115;
        break;

    case 3:
        warp "gefenia03",130,206;
        break;

    case 4:
        warp "gefenia04",133,88;
        break;

    }

OnWarping:
    misceffect 215;
    mapannounce "geffen","With a flash of light from Geffen Fountain, the door to Geffenia has opened.",1,0x9CFF00;
    misceffect 247;
    initnpctimer;
    end;

OnTimer15000:
    misceffect 247;
    end;

OnTimer30000:
    misceffect 247;
    end;

OnTimer45000:
    stopnpctimer;
    mapannounce "geffen","The portal to Geffenia is now closed.",1,0x9CFF00;
    misceffect 16;

OnInit:
    disablenpc "GeffeniaWarper";
    set $GeffeniaWarp,0;
    end;

}

geffen,119,49,1	script	Fountain#SignFountain	111,{

	if(countitem(7025) && !$GeffeniaWarp)goto L_Lament;
	mes "^3355FFThis is the";
	mes "Geffen Fountain.";
	close;

L_Lament:
	specialeffect2 200;
	mes "^3355FFAs you approach the fountain, a strange light begins to emit from the Lucifer's Lament in your pocket and from something deep within the fountain's water.";
	next;
	menu "Throw Lucifer's Lament into the fountain.",L_Throw,"Ignore the light.",-;

	mes "......";
	close;

L_Throw:
	misceffect 247;
	set $GeffeniaWarp,rand(1,4);
	enablenpc "GeffeniaWarper";
	donpcevent "GeffeniaWarper::OnWarping";
	mes "^3355FFOnce the Lucifer's Lament";
	mes "splashes into the water, the";
	mes "light reveals a peculiar warp";
	mes "in front of the fountain...";
	close;

}

//==================================================
// que_sign02 - Monster Spawns
//==================================================

que_sign02,0,0,0,0	monster	Incubus	1580,1,0,0,0
que_sign02,0,0,0,0	monster	Wraith Dead	1566,3,0,0,0
que_sign02,0,0,0,0	monster	Evil Druid	1435,5,0,0,0
que_sign02,0,0,0,0	monster	Wraith	1475,5,0,0,0
que_sign02,0,0,0,0	monster	Injustice	1446,10,0,0,0
que_sign02,0,0,0,0	monster	Skeleton Prisoner	1479,10,0,0,0
que_sign02,0,0,0,0	monster	Zombie Prisoner	1480,10,0,0,0
que_sign02,0,0,0,0	monster	Ghoul	1423,15,0,0,0
