//Le Livre d'Ymir http://www.bookofymir.net/
//traduit par Leonid, corrigé par Myllena et Icaros
//===== eAthena Script ======================================= 
//= Counteragent and Mixture Quest(Morgenstein)
//===== By: ================================================== 
//= kobra_k88
//= added some dialogs for Morgenstein by Komurka
//===== Current Version: ===================================== 
//= 2.2b
//===== Compatible With: ===================================== 
//= eAthena SVN
//===== Description: ========================================= 
//= [Aegis COnversion]
//= Counteragent and Mixtures for making dyes & Alchemist Job Quest
//===== Additional Comments: ================================= 
//= 2.2 Rescripted to Aegis 10.3 standards. [L0ne_W0lf]
//= 2.2a A few minor fixes. (bugreport:1122) [L0ne_W0lf]
//= 2.2b Follow up fixes to bugreport:1122 [L0ne_W0lf]
//============================================================ 

alberta_in,133,55,3	script	Louitz#cm	84,{
	if ( molgenstain == 2 || MISC_QUEST&4 ) { // Bugfix: cette portion de la quête devient répétable si on ne check pas MISC_QUEST aussi [NoH]
		mes "[Marchand Louitz]";
		mes "Oh, c'est encore vous.";
		mes "Alors, avez-vous réussi à trouver ce scientifique fou qui habite Geffen?";
		next;
		if (select("Parler de Molgenstein:S'en aller") == 1) {
			mes "[Marchand Louitz]";
			mes "Lui avez-vous rendu visite? Hé, il est peut-être devenu fou, mais je suppose que tous les génies sont comme ça.";
			next;
			mes "[Marchand Louitz]";
			mes "Je veux dire...";
			mes "Ce n'est qu'une question de temps avant qu'un type futé comme lui n'invente quelque chose de vraiment miraculeux, vous ne pensez pas?";
			close;
		}
		mes "[Marchand Louitz]";
		mes "...Allo?";
		mes "Allooo? Hé! Je vous parle! Je déteste les aventuriers impolis qui font semblant de rien...";
		close;
	}
	mes "[Marchand Louitz]";
	mes ( isday() ? "Bonjour" : "Bonsoir" ) + ".";
	mes "Comment allez-vous?";
	next;
	if (countitem(971) > 0 && countitem(972) > 0) {
		switch(select("L'écouter.:Que savez-vous des produits chimiques?:S'en aller.")) {
		case 1:
			mes "[Marchand Louitz]";
			mes "J'étais à Geffen il y a quelques temps... J'essayais de trouver une boutique pas chère pour mon matériel de magie. J'ai entendu des rumeurs concernant un scientifique un peu fou.";
			mes "Piqué par la curiosité, j'ai voulu en savoir plus et éventuellement le rencontrer.";
			next;
			mes "[Marchand Louitz]";
			mes "Si vous saviez, ce type était barjo.";
			mes "Il ne m'a même pas remarqué et il murmurait des mots incompréhensibles tout en travaillant sur ses expériences.";
			mes "Des mots comme, heu...";
			next;
			mes "[Marchand Louitz]";
			mes "Ah oui! Il murmurait des mots comme 'Karvodailnirol' et 'Détrimindexta'.";
			mes "La première fois que je les ai entendus, j'ai pensé qu'il était devenu complètement fou, vous comprenez?";
			next;
			mes "[Marchand Louitz]";
			mes "Mais il s'avère que ces Karvodailnirol et Détrimindexta existent vraiment."; 
			mes "J'ai appris par la suite que ces noms se rapportaient à des produits chimiques très rares.";
			close;
		case 2:
			set molgenstain,1;
			mes "[Marchand Louitz]";
			mes "Hé, mais ce sont les produits chimiques que le scientifique a mentionné!";
			mes "Vous avez été en mesure d'en obtenir? Eh bien! Maintenant, je n'ai aucune idée de ce que je pourrais bien en faire... ";
			next;
			mes "[Marchand Louitz]";
			mes "Ah, mais ce scientifique barjo devrait le savoir.";
			mes "Je ne me souviens plus exactement où il vit, mais je sais qu'il se trouve à Geffen et qu'il s'appelle ^0000FFMolgenstein^000000.";
			next;
			mes "[Marchand Louitz]";
			mes "Hum... vous feriez mieux de vous rendre directement à Geffen et d'aller d'abord y faire un tour.";
			mes "Je suis sûr que quelqu'un sait où vous pouvez le trouver.";
			close;
		case 3:
			mes "[Marchand Louitz]";
			mes "Hum...";
			mes "Ce fut un plaisir de discuter avec vous mon ami. Heu, à bientôt dans le coin. Prenez soin de vous, d'accord?";
			close;
		}
	}
	if (countitem(972) > 0) {
		switch(select("L'écouter.:Que savez-vous du Karvodailnirol?:S'en aller.")) {
		case 1:
			mes "[Marchand Louitz]";
			mes "J'étais à Geffen il y a quelques temps... J'essayais de trouver une boutique pas chère pour mon matériel de magie. J'ai entendu des rumeurs concernant un scientifique un peu fou.";
			mes "Piqué par la curiosité, j'ai voulu en savoir plus et éventuellement le rencontrer.";
			next;
			mes "[Marchand Louitz]";
			mes "Si vous saviez, ce type était barjo.";
			mes "Il ne m'a même pas remarqué et il murmurait des mots incompréhensibles tout en travaillant sur ses expériences.";
			mes "Des mots comme, heu...";
			next;
			mes "[Marchand Louitz]";
			mes "Ah oui! Il murmurait des mots comme 'Karvodailnirol' et 'Détrimindexta'.";
			mes "La première fois que je les ai entendus, j'ai pensé qu'il était devenu complètement fou, vous comprenez?";
			next;
			mes "[Marchand Louitz]";
			mes "Mais il s'avère que ces Karvodailnirol et Détrimindexta existent vraiment."; 
			mes "J'ai appris par la suite que ces noms se rapportaient à des produits chimiques très rares.";
			close;
		case 2:
			set molgenstain,1;
			mes "[Marchand Louitz]";
			mes "Oh hé, c'est ce Karvodailnirol dont parlait le vieux fou, n'est-ce pas?";
			mes "Évidemment, lui seul doit savoir comment s'en servir...";
			next;
			mes "[Marchand Louitz]";
			mes "Hé, pourquoi n'iriez-vous pas lui demander directement?";
			mes "Je ne me souviens plus exactement où il vit, mais je sais que vous pourrez le trouver à Geffen et qu'il s'appelle ^0000FFMolgenstein^000000.";
			next;
			mes "[Marchand Louitz]";
			mes "Hum... vous feriez mieux de vous rendre directement à Geffen et d'aller d'abord y faire un tour.";
			mes "Je suis sûr que quelqu'un sait où vous pouvez le trouver.";
			close;
		case 3:
			mes "[Marchand Louitz]";
			mes "Hum...";
			mes "Ce fut un plaisir de discuter avec vous, mon ami. Heu, à bientôt dans le coin. Prenez soin de vous, d'accord?";
			close;
		}
	}
	if (countitem(971) > 0) {
		switch(select("L'écouter.:Que savez-vous du Détrimindexta?:S'en aller.")) {
		case 1:
			mes "[Marchand Louitz]";
			mes "J'étais à Geffen il y a quelques temps... J'essayais de trouver une boutique pas chère pour mon matériel de magie. J'ai entendu des rumeurs concernant un scientifique un peu fou.";
			mes "Piqué par la curiosité, j'ai voulu en savoir plus et éventuellement le rencontrer.";
			next;
			mes "[Marchand Louitz]";
			mes "Si vous saviez, ce type était barjo.";
			mes "Il ne m'a même pas remarqué et il murmurait des mots incompréhensibles tout en travaillant sur ses expériences.";
			mes "Des mots comme, heu...";
			next;
			mes "[Marchand Louitz]";
			mes "Ah oui! Il murmurait des mots comme 'Karvodailnirol' et 'Détrimindexta'.";
			mes "La première fois que je les ai entendus, j'ai pensé qu'il était devenu complètement fou, vous comprenez?";
			next;
			mes "[Marchand Louitz]";
			mes "Mais il s'avère que ces Karvodailnirol et Détrimindexta existent vraiment."; 
			mes "J'ai appris par la suite que ces noms se rapportaient à des produits chimiques très rares.";
			close;
		case 2:
			set molgenstain,1;
			mes "[Marchand Louitz]";
			mes "Oh hé, c'est ce Détrimindexta dont parlait le vieux fou, n'est-ce pas?";
			mes "Évidemment, lui seul doit savoir comment s'en servir...";
			next;
			mes "[Marchand Louitz]";
			mes "Hé, pourquoi n'iriez-vous pas lui demander directement?";
			mes "Je ne me souviens plus exactement où il vit, mais je sais que vous pourrez le trouver à Geffen et qu'il s'appelle ^0000FFMolgenstein^000000.";
			next;
			mes "[Marchand Louitz]";
			mes "Hum... vous feriez mieux de vous rendre directement à Geffen et d'aller d'abord y faire un tour.";
			mes "Je suis sûr que quelqu'un sait où vous pouvez le trouver.";
			close;
		case 3:
			mes "[Marchand Louitz]";
			mes "Hum...";
			mes "Ce fut un plaisir de discuter avec vous, mon ami. Heu, à bientôt dans le coin. Prenez soin de vous, d'accord?";
			close;
		}
	}
	if (select("Parler:S'en aller") == 1) {
		mes "[Marchand Louitz]";
		mes "J'étais à Geffen il y a quelques temps... J'essayais de trouver une boutique pas chère pour mon matériel de magie. J'ai entendu des rumeurs concernant un scientifique un peu fou.";
		mes "Piqué par la curiosité, j'ai voulu en savoir plus et éventuellement le rencontrer.";
		next;
		mes "[Marchand Louitz]";
		mes "Si vous saviez, ce type était barjo.";
		mes "Il ne m'a même pas remarqué et il murmurait des mots incompréhensibles tout en travaillant sur ses expériences.";
		mes "Des mots comme, heu...";
		next;
		mes "[Marchand Louitz]";
		mes "Ah oui! Il murmurait des mots comme 'Karvodailnirol' et 'Détrimindexta'.";
		mes "La première fois que je les ai entendus, j'ai pensé qu'il était devenu complètement fou, vous comprenez?";
		next;
		mes "[Marchand Louitz]";
		mes "Mais il s'avère que ces Karvodailnirol et Détrimindexta existent vraiment."; 
		mes "J'ai appris par la suite que ces noms se rapportaient à des produits chimiques très rares.";
		close;
	}
	mes "[Marchand Louitz]";
	mes "Hum...";
	mes "Ce fut un plaisir de discuter avec vous, mon ami. Heu, à bientôt dans le coin. Prenez soin de vous, d'accord?";
	close;
}

geffen,181,114,3	script	Aure Dupon#cm	82,{
	if (molgenstain == 2) {
		mes "[Aure Dupon]";
		mes "Il semblerait que nos chemins se croisent encore une fois.";
		mes "Coïncidence? C'est plus que cela! C'est le ^0000FFdestin^000000.";
		next;
		if (select("Parler de Molgenstein.:S'en aller.") == 1) {
			mes "[Aure Dupon]";
			mes "Avez-vous déjà rencontré Molgenstein? Il habite au deuxième étage de la Forge.";
			mes "Mais faites attention à ne pas trop vous approcher de lui...";
			close;
		}
		mes "[Aure Dupon]";
		mes "Maintenant allez-y, et que les vagues du destin puissent vous guider où que vous alliez.";
		close;
	}
	mes "[Aure Dupon]";
	mes "Le temps s'écoule lentement et subtilement, mais aucune force en ce monde ne pourrait l'arrêter.";
	mes "L'Humanité ne représente qu'un grain de poussière dans ce grand système.";
	next;
	if (molgenstain > 0) {
		switch(select("Discuter.:Lui poser des questions sur Molgenstein.:S'en aller.")) {
		case 1:
			mes "[Aure Dupon]";
			mes "Avoir des objectifs et des centres d'intérêt c'est important, mais se prendre la tête pour quelque chose en particulier peut être particulièrement destructeur."; 
			mes "Détendez-vous, videz votre esprit, et laissez-vous porter par les vagues du destin.";
			close;
		case 2:
			set molgenstain,2;
			mes "[Aure Dupon]";
			mes "Molgenstein...?";
			mes "L'homme est obsédé par la conquête des pouvoirs qui contrôlent notre monde. Mais votre curiosité à propos de lui porte sur une raison particulière. Hum...";
			next;
			mes "[Aure Dupon]";
			mes "Il serait préférable que vous alliez voir Molgenstein et jugiez vous-même son personnage. Vous devriez le trouver au deuxième étage de la Forge de Geffen."; 
			mes "Partez, c'est votre destin.";
			close;
		case 3:
			mes "[Aure Dupon]";
			mes "Maintenant allez-y, et que les vagues du destin puissent vous guider où que vous alliez.";
			close;
			}
	}
	if (select("Parler:S'en aller") == 1) {
		mes "[Aure Dupon]";
		mes "Avoir des objectifs et des centres d'intérêt c'est important, mais se triturer l'esprit pour quelque chose en particulier peut être particulièrement destructeur."; 
		mes "Détendez-vous, faites le vide, et laissez-vous porter par les vagues du destin.";
		close;
	}
	mes "[Aure Dupon]";
	mes "Maintenant allez-y, et que les vagues du destin puissent vous guider où que vous alliez.";
	close;
}

geffen_in,141,140,3	script	Molgenstein#cm	121,{
	if (checkweight(1201,1) == 0) {
		mes "^3355FFAttendez!";
		mes "Vous portez bien trop de choses sur vous, vous allez vous faire un lumbago!";
		mes "Vous devriez déposer des objets dans votre Stock Kafra...^000000";
		close;
	}
	if (MISC_QUEST & 4) {
		mes "[Chimiste Molgenstein]";
		mes ".....";
		mes "Bienvenue.";
		mes "Héhéhéhéhé....";
		mes "Hihihihihihihihi....";
		next;
		switch(select("Lui poser des questions sur ses recherches.:Lui demander de fabriquer un produit chimique.:S'en aller.")) {
		case 1:
			mes "[Chimiste Molgenstein]";
			mes "Héhéhéhéhé...";
			mes "Vous devez avoir entendu des rumeurs à propos de mes recherches. Oui! Mais puisque vous le savez probablement déjà, je ne vais rien vous cacher, je veux dire, il n'y a rien à cacher.";
			next;
			mes "[Chimiste Molgenstein]";
			mes "En fait, vous pouvez considérer que mes recherches sont terminées! Rien n'est impossible pour mon génie! Hahaha, ce n'est qu'une question de temps!";
			next;
			mes "[Chimiste Molgenstein]";
			mes "Vous êtes encore là? Bien, vous vouliez en savoir plus sur mes recherches. C'est en réalité très simple. J'essayais juste de fabriquer un produit chimique particulier capable de faire fondre n'importe quoi!";
			next;
			mes "[Chimiste Molgenstein]";
			mes "N'est-ce pas intéressant? Peu importe combien vous êtes fort, vous ne pouvez pas briser de la pierre ou de l'acier, mais avec mon nouveau produit, vous pouvez faire fondre ces objets, en les rendant mous comme de la gelée!";
			next;
			mes "[Chimiste Molgenstein]";
			mes "Il ne peut pas encore tout faire fondre, mais j'ai trouvé que l'on pouvait combiner des choses qui n'auraient jamais pu être mélangées avant mon invention. Héhéhéhéhé~!";
			next;
			mes "[Chimiste Molgenstein]";
			mes "Vous pouvez faire tout un tas de choses que vous n'auriez jamais imaginé possibles! Je peux vous fabriquer un tas de nouvelles choses qu'il m'aurait été impossible de faire en utilisant cette méthode... autant que vous désirez!!";
			next;
			mes "[Chimiste Molgenstein]";
			mes "Les endorphines se bousculent dans ma tête au moins 2,1 fois plus rapidement que la normale! Ah! Je suis tellement excité! Je... Je n'arrive pas à le cacher!";
			close;
		case 2:
			mes "[Chimiste Molgenstein]";
			mes "Alors...";
			mes "Vous êtes intéressé par mes inventions, c'est ça? Héhéhéhé!? J'apprécie votre côté scientifique! Quel produit chimique souhaitez-vous que je fabrique?";
			next;
			switch(select("Antiagent:Mixture")) {
			case 1:
				mes "[Chimiste Molgenstein]";
				mes "Oh...!";
				mes "Vous voulez fabriquer un Antiagent? Hohohohoho, voyons voir ce dont nous avons besoin...";
				next;
				mes "[Chimiste Molgenstein]";
				mes "Oh, je me souviens, oui, un Alcool, et heu, hum, un Détrimindexta et une Bouteille Vide comme récipient. Tout ça et seulement 3000 Zénys.";
				next;
				mes "[Chimiste Molgenstein]";
				mes "Hahahahah!";
				mes "Oh, j'ai hâte de le fabriquer! Êtes-vous prêt à commencer?";
				next;
				if (select("Fabriquer:S'en aller") == 1) {
					if (countitem(970) == 0 || countitem(971) == 0 || countitem(713) == 0 || Zeny < 3000) {
						mes "[Chimiste Molgenstein]";
						mes "Heuheuheuheu.... pas assez... pas assez.. Ha...Haa... Allez..... récupérer le reste des matériaux!";
						mes "Nous allons devoir reporter le divertissement à plus tard... Heuheuheuheuheu.";
						close;
					}
					mes "[Chimiste Molgenstein]";
					mes "Ooooooooh...... héhéhéhéhé...... oui... comme ça...... oui... plus... plus........ héhéhéhéhé.";
					mes ".... Aaah.... ahah... ha....ahahooooooooohoh!";
					next;
					if (countitem(970) < 1 || countitem(971) < 1 || countitem(713) < 1) {
						mes "[Chimiste Molgenstein]";
						mes "Hohohoho.... pas assez... pas assez... haa...haa... allez..... allez récupérer le reste des matériaux!!";
						close;
					}
					delitem 970,1; //Alchol
					delitem 971,1; //Detrimindexta
					delitem 713,1; //Empty_Bottle
					set zeny,zeny-3000;
					getitem 973,1; //Counteragent
					mes "[Chimiste Molgenstein]";
					mes "Hé hé hé... Haaaaa......";
					mes "Oh? C'est déjà fini?!";
					close;
				}
				mes "[Chimiste Molgenstein]";
				mes "Hé hé hé...!";
				mes "Revenez quand vous serez prêt~";
				close;
			case 2:
				mes "[Chimiste Molgenstein]";
				mes "Ooh...!";
				mes "Vous voulez fabriquer une Mixture? Hohohohoho, voyons voir ce dont nous avons besoin...";
				next;
				mes "[Chimiste Molgenstein]";
				mes "Oh, je me rappelle maintenant, oui, un Alcool, et heu, hum, un Karvodailnirol et une Bouteille Vide comme récipient. Tout ça et seulement 4000 Zénys.";
				next;
				mes "[Chimiste Molgenstein]";
				mes "Hahahahah!";
				mes "Oh, j'ai hâte de la fabriquer! Êtes-vous prêt à commencer?";
				next;
				if (select("Fabriquer:S'en aller") == 1) {
					if (countitem(970) == 0 || countitem(972) == 0 || countitem(713) == 0 || Zeny < 4000) {
						mes "[Chimiste Molgenstein]";
						mes "Hohohoho.... pas assez... pas assez... haa...haa... allez..... allez récupérer le reste des matériaux!!";
						mes "Nous allons devoir reporter l'amusement à plus tard... Héhéhéhé";
						close;
					}
					mes "[Chimiste Molgenstein]";
					mes "Ooooooooh... héhé...... oui... comme ça...... oui... encore plus... encore plus........ héhéhéhéhé";
					mes ".... Aaah.... ahah... ha....ahah...oooooooooooooooooh!!!...!!!!!!";
					next;
					if (countitem(970) < 1 || countitem(972) < 1 || countitem(713) < 1) {
						mes "[Chimiste Molgenstein]";
						mes "Hohohoho.... pas assez... pas assez... haa...haa... allez..... allez récupérer le reste des matériaux!!";
						close;
					}
					delitem 970,1; //Alchol
					delitem 972,1; //Karvodailnirol
					delitem 713,1; //Empty_Bottle
					set zeny,zeny-4000;
					getitem 974,1; //Mixture
					mes "[Chimiste Molgenstein]";
					mes "Hé hé hé... Haaaaa......";
					mes "Oh? C'est déjà fini?!";
					close;
				}
				mes "[Chimiste Molgenstein]";
				mes "Hé hé hé...!";
				mes "Revenez me voir quand vous serez prêt~";
				mes "Hé... héhéhéhéhé....";
				close;
			}
		case 3:
			mes "[Chimiste Molgenstein]";
			mes "Héhé....héhéhéhéhé....";
			close;
		}
	}
	if (molgenstain == 2) {
		set MISC_QUEST,MISC_QUEST | 4;
		set molgenstain,0;
		mes "[Chimiste Molgenstein]";
		mes "Héhéhéhéhé.... bienvenue. Héhéhéhéhé.... héhéhéhéhé....";
		next;
		mes "[Chimiste Molgenstein]";
		mes "Ah...?!";
		mes "Désolé si je vous ai paru bizarre. C'est juste que... je ne vois personne depuis si longtemps. Donc, alors, que puis-je faire pour vous??";
		next;
		if (select("Lui poser des questions sur ses recherches.:S'en aller.") == 1) {
			mes "[Chimiste Molgenstein]";
			mes "Héhéhéhéhé...";
			mes "Vous devez avoir entendu des rumeurs à propos de mes recherches. Oui! Mais puisque vous le savez probablement déjà, je ne vais rien vous cacher, je veux dire, il n'y a rien à cacher.";
			next;
			mes "[Chimiste Molgenstein]";
			mes "En fait, vous pouvez considérer que mes recherches sont terminées! Rien n'est impossible pour mon génie! Hahaha, ce n'est qu'une question de temps!";
			next;
			mes "[Chimiste Molgenstein]";
			mes "Vous êtes encore là? Bien, vous vouliez en savoir plus sur mes recherches. C'est en réalité très simple. J'essayais juste de fabriquer un produit chimique particulier capable de faire fondre n'importe quoi!";
			next;
			mes "[Chimiste Molgenstein]";
			mes "N'est-ce pas intéressant? Peu importe combien vous êtes fort, vous ne pouvez pas briser de la pierre ou de l'acier, mais avec mon nouveau produit, vous pouvez faire fondre ces objets, en les rendant mous comme de la gelée!";
			next;
			mes "[Chimiste Molgenstein]";
			mes "Il ne peut pas encore tout faire fondre, mais j'ai trouvé que l'on pouvait combiner des choses qui n'auraient jamais pu être mélangées avant mon invention. Héhéhéhéhé~!";
			next;
			mes "[Chimiste Molgenstein]";
			mes "Vous pouvez faire tout un tas de choses que vous n'auriez jamais imaginé possibles! Je peux vous fabriquer un tas de nouvelles choses qu'il m'aurait été impossible de faire en utilisant cette méthode... autant que vous désirez!!";
			next;
			mes "[Chimiste Molgenstein]";
			mes "Les endorphines se bousculent dans ma tête au moins 2,1 fois plus rapidement que la normale! Ah! Je suis tellement excité! Je... Je n'arrive pas à le cacher!";
			close;
		}
		close;
	}
	mes "[Chimiste Molgenstein]";
	mes "Héhéhéhé...";
	mes "Vous n'êtes pas venu ici pour devenir un cobaye, n'est-ce pas? Probablement pas, j'imagine. Pas depuis mon petit 'accident'. Héhéhéhéhé~!";
	close;
}

//============================================================ 
// Old changelog
//============================================================ 
//= 1.0 Fully working
//= 1.1 Update for Alchemist Quest.
//= 1.2 added check for Empty Bottle [Lupus]
//= 1.3 Fixed some lil thingys [Darkchild]
//= 1.4 More li'l thing, added comments for items IDs [Lupus]
//= 1.5 Fixed Spelling mistakes. [Nexon]
//= 1.6 Fixed some bugs, also related to Alch Job quest [Lupus]
//= 1,7 Fixed exploit
//= 1.8 Got rid of 'al_morgen' var [Lupus]
//= 2.1 now uses (MISC_QUEST & 4) bit instead of al_morgen [Lupus]
//============================================================ 

